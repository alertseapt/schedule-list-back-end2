/* empty css             */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Yn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const re={},Ut=[],st=()=>{},aa=()=>!1,Xs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Qn=e=>e.startsWith("onUpdate:"),Ce=Object.assign,Zn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},la=Object.prototype.hasOwnProperty,Z=(e,t)=>la.call(e,t),j=Array.isArray,It=e=>ys(e)==="[object Map]",Ht=e=>ys(e)==="[object Set]",wo=e=>ys(e)==="[object Date]",K=e=>typeof e=="function",be=e=>typeof e=="string",nt=e=>typeof e=="symbol",fe=e=>e!==null&&typeof e=="object",yi=e=>(fe(e)||K(e))&&K(e.then)&&K(e.catch),vi=Object.prototype.toString,ys=e=>vi.call(e),ca=e=>ys(e).slice(8,-1),Si=e=>ys(e)==="[object Object]",eo=e=>be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ss=Yn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ys=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},da=/-(\w)/g,$e=Ys(e=>e.replace(da,(t,s)=>s?s.toUpperCase():"")),ua=/\B([A-Z])/g,yt=Ys(e=>e.replace(ua,"-$1").toLowerCase()),Qs=Ys(e=>e.charAt(0).toUpperCase()+e.slice(1)),gn=Ys(e=>e?`on${Qs(e)}`:""),Dt=(e,t)=>!Object.is(e,t),xs=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},xn=(e,t,s,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:s})},Is=e=>{const t=parseFloat(e);return isNaN(t)?e:t},fa=e=>{const t=be(e)?Number(e):NaN;return isNaN(t)?e:t};let _o;const Zs=()=>_o||(_o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function en(e){if(j(e)){const t={};for(let s=0;s<e.length;s++){const o=e[s],n=be(o)?ga(o):en(o);if(n)for(const i in n)t[i]=n[i]}return t}else if(be(e)||fe(e))return e}const ha=/;(?![^(]*\))/g,pa=/:([^]+)/,ma=/\/\*[^]*?\*\//g;function ga(e){const t={};return e.replace(ma,"").split(ha).forEach(s=>{if(s){const o=s.split(pa);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Q(e){let t="";if(be(e))t=e;else if(j(e))for(let s=0;s<e.length;s++){const o=Q(e[s]);o&&(t+=o+" ")}else if(fe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ba="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ya=Yn(ba);function Ci(e){return!!e||e===""}function va(e,t){if(e.length!==t.length)return!1;let s=!0;for(let o=0;s&&o<e.length;o++)s=vs(e[o],t[o]);return s}function vs(e,t){if(e===t)return!0;let s=wo(e),o=wo(t);if(s||o)return s&&o?e.getTime()===t.getTime():!1;if(s=nt(e),o=nt(t),s||o)return e===t;if(s=j(e),o=j(t),s||o)return s&&o?va(e,t):!1;if(s=fe(e),o=fe(t),s||o){if(!s||!o)return!1;const n=Object.keys(e).length,i=Object.keys(t).length;if(n!==i)return!1;for(const r in e){const l=e.hasOwnProperty(r),c=t.hasOwnProperty(r);if(l&&!c||!l&&c||!vs(e[r],t[r]))return!1}}return String(e)===String(t)}function to(e,t){return e.findIndex(s=>vs(s,t))}const wi=e=>!!(e&&e.__v_isRef===!0),_=e=>be(e)?e:e==null?"":j(e)||fe(e)&&(e.toString===vi||!K(e.toString))?wi(e)?_(e.value):JSON.stringify(e,_i,2):String(e),_i=(e,t)=>wi(t)?_i(e,t.value):It(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[o,n],i)=>(s[bn(o,i)+" =>"]=n,s),{})}:Ht(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>bn(s))}:nt(t)?bn(t):fe(t)&&!j(t)&&!Si(t)?String(t):t,bn=(e,t="")=>{var s;return nt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ne;class Sa{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ne,!t&&Ne&&(this.index=(Ne.scopes||(Ne.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Ne;try{return Ne=this,t()}finally{Ne=s}}}on(){++this._on===1&&(this.prevScope=Ne,Ne=this)}off(){this._on>0&&--this._on===0&&(Ne=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,o;for(s=0,o=this.effects.length;s<o;s++)this.effects[s].stop();for(this.effects.length=0,s=0,o=this.cleanups.length;s<o;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Ca(){return Ne}let de;const yn=new WeakSet;class Ei{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ne&&Ne.active&&Ne.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yn.has(this)&&(yn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Di(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Eo(this),ki(this);const t=de,s=Ve;de=this,Ve=!0;try{return this.fn()}finally{Ti(this),de=t,Ve=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)oo(t);this.deps=this.depsTail=void 0,Eo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nn(this)&&this.run()}get dirty(){return Nn(this)}}let Ai=0,ns,os;function Di(e,t=!1){if(e.flags|=8,t){e.next=os,os=e;return}e.next=ns,ns=e}function so(){Ai++}function no(){if(--Ai>0)return;if(os){let t=os;for(os=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;ns;){let t=ns;for(ns=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=s}}if(e)throw e}function ki(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ti(e){let t,s=e.depsTail,o=s;for(;o;){const n=o.prevDep;o.version===-1?(o===s&&(s=n),oo(o),wa(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=n}e.deps=t,e.depsTail=s}function Nn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Pi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ds)||(e.globalVersion=ds,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Nn(e))))return;e.flags|=2;const t=e.dep,s=de,o=Ve;de=e,Ve=!0;try{ki(e);const n=e.fn(e._value);(t.version===0||Dt(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{de=s,Ve=o,Ti(e),e.flags&=-3}}function oo(e,t=!1){const{dep:s,prevSub:o,nextSub:n}=e;if(o&&(o.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=o,e.nextSub=void 0),s.subs===e&&(s.subs=o,!o&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)oo(i,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function wa(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Ve=!0;const xi=[];function ct(){xi.push(Ve),Ve=!1}function dt(){const e=xi.pop();Ve=e===void 0?!0:e}function Eo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=de;de=void 0;try{t()}finally{de=s}}}let ds=0;class _a{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ni{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!de||!Ve||de===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==de)s=this.activeLink=new _a(de,this),de.deps?(s.prevDep=de.depsTail,de.depsTail.nextDep=s,de.depsTail=s):de.deps=de.depsTail=s,Fi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const o=s.nextDep;o.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=o),s.prevDep=de.depsTail,s.nextDep=void 0,de.depsTail.nextDep=s,de.depsTail=s,de.deps===s&&(de.deps=o)}return s}trigger(t){this.version++,ds++,this.notify(t)}notify(t){so();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{no()}}}function Fi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Fi(o)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Fn=new WeakMap,kt=Symbol(""),Rn=Symbol(""),us=Symbol("");function _e(e,t,s){if(Ve&&de){let o=Fn.get(e);o||Fn.set(e,o=new Map);let n=o.get(s);n||(o.set(s,n=new Ni),n.map=o,n.key=s),n.track()}}function rt(e,t,s,o,n,i){const r=Fn.get(e);if(!r){ds++;return}const l=c=>{c&&c.trigger()};if(so(),t==="clear")r.forEach(l);else{const c=j(e),d=c&&eo(s);if(c&&s==="length"){const u=Number(o);r.forEach((h,y)=>{(y==="length"||y===us||!nt(y)&&y>=u)&&l(h)})}else switch((s!==void 0||r.has(void 0))&&l(r.get(s)),d&&l(r.get(us)),t){case"add":c?d&&l(r.get("length")):(l(r.get(kt)),It(e)&&l(r.get(Rn)));break;case"delete":c||(l(r.get(kt)),It(e)&&l(r.get(Rn)));break;case"set":It(e)&&l(r.get(kt));break}}no()}function Rt(e){const t=oe(e);return t===e?t:(_e(t,"iterate",us),He(e)?t:t.map(De))}function tn(e){return _e(e=oe(e),"iterate",us),e}const Ea={__proto__:null,[Symbol.iterator](){return vn(this,Symbol.iterator,De)},concat(...e){return Rt(this).concat(...e.map(t=>j(t)?Rt(t):t))},entries(){return vn(this,"entries",e=>(e[1]=De(e[1]),e))},every(e,t){return ot(this,"every",e,t,void 0,arguments)},filter(e,t){return ot(this,"filter",e,t,s=>s.map(De),arguments)},find(e,t){return ot(this,"find",e,t,De,arguments)},findIndex(e,t){return ot(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ot(this,"findLast",e,t,De,arguments)},findLastIndex(e,t){return ot(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ot(this,"forEach",e,t,void 0,arguments)},includes(...e){return Sn(this,"includes",e)},indexOf(...e){return Sn(this,"indexOf",e)},join(e){return Rt(this).join(e)},lastIndexOf(...e){return Sn(this,"lastIndexOf",e)},map(e,t){return ot(this,"map",e,t,void 0,arguments)},pop(){return Xt(this,"pop")},push(...e){return Xt(this,"push",e)},reduce(e,...t){return Ao(this,"reduce",e,t)},reduceRight(e,...t){return Ao(this,"reduceRight",e,t)},shift(){return Xt(this,"shift")},some(e,t){return ot(this,"some",e,t,void 0,arguments)},splice(...e){return Xt(this,"splice",e)},toReversed(){return Rt(this).toReversed()},toSorted(e){return Rt(this).toSorted(e)},toSpliced(...e){return Rt(this).toSpliced(...e)},unshift(...e){return Xt(this,"unshift",e)},values(){return vn(this,"values",De)}};function vn(e,t,s){const o=tn(e),n=o[t]();return o!==e&&!He(e)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const Aa=Array.prototype;function ot(e,t,s,o,n,i){const r=tn(e),l=r!==e&&!He(e),c=r[t];if(c!==Aa[t]){const h=c.apply(e,i);return l?De(h):h}let d=s;r!==e&&(l?d=function(h,y){return s.call(this,De(h),y,e)}:s.length>2&&(d=function(h,y){return s.call(this,h,y,e)}));const u=c.call(r,d,o);return l&&n?n(u):u}function Ao(e,t,s,o){const n=tn(e);let i=s;return n!==e&&(He(e)?s.length>3&&(i=function(r,l,c){return s.call(this,r,l,c,e)}):i=function(r,l,c){return s.call(this,r,De(l),c,e)}),n[t](i,...o)}function Sn(e,t,s){const o=oe(e);_e(o,"iterate",us);const n=o[t](...s);return(n===-1||n===!1)&&lo(s[0])?(s[0]=oe(s[0]),o[t](...s)):n}function Xt(e,t,s=[]){ct(),so();const o=oe(e)[t].apply(e,s);return no(),dt(),o}const Da=Yn("__proto__,__v_isRef,__isVue"),Ri=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(nt));function ka(e){nt(e)||(e=String(e));const t=oe(this);return _e(t,"has",e),t.hasOwnProperty(e)}class Mi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,o){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return o===(n?i?Ua:Ii:i?Ui:Li).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const r=j(t);if(!n){let c;if(r&&(c=Ea[s]))return c;if(s==="hasOwnProperty")return ka}const l=Reflect.get(t,s,Te(t)?t:o);return(nt(s)?Ri.has(s):Da(s))||(n||_e(t,"get",s),i)?l:Te(l)?r&&eo(s)?l:l.value:fe(l)?n?qi(l):ro(l):l}}class Oi extends Mi{constructor(t=!1){super(!1,t)}set(t,s,o,n){let i=t[s];if(!this._isShallow){const c=xt(i);if(!He(o)&&!xt(o)&&(i=oe(i),o=oe(o)),!j(t)&&Te(i)&&!Te(o))return c?!1:(i.value=o,!0)}const r=j(t)&&eo(s)?Number(s)<t.length:Z(t,s),l=Reflect.set(t,s,o,Te(t)?t:n);return t===oe(n)&&(r?Dt(o,i)&&rt(t,"set",s,o):rt(t,"add",s,o)),l}deleteProperty(t,s){const o=Z(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&o&&rt(t,"delete",s,void 0),n}has(t,s){const o=Reflect.has(t,s);return(!nt(s)||!Ri.has(s))&&_e(t,"has",s),o}ownKeys(t){return _e(t,"iterate",j(t)?"length":kt),Reflect.ownKeys(t)}}class Ta extends Mi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Pa=new Oi,xa=new Ta,Na=new Oi(!0);const Mn=e=>e,Ds=e=>Reflect.getPrototypeOf(e);function Fa(e,t,s){return function(...o){const n=this.__v_raw,i=oe(n),r=It(i),l=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,d=n[e](...o),u=s?Mn:t?qs:De;return!t&&_e(i,"iterate",c?Rn:kt),{next(){const{value:h,done:y}=d.next();return y?{value:h,done:y}:{value:l?[u(h[0]),u(h[1])]:u(h),done:y}},[Symbol.iterator](){return this}}}}function ks(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ra(e,t){const s={get(n){const i=this.__v_raw,r=oe(i),l=oe(n);e||(Dt(n,l)&&_e(r,"get",n),_e(r,"get",l));const{has:c}=Ds(r),d=t?Mn:e?qs:De;if(c.call(r,n))return d(i.get(n));if(c.call(r,l))return d(i.get(l));i!==r&&i.get(n)},get size(){const n=this.__v_raw;return!e&&_e(oe(n),"iterate",kt),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,r=oe(i),l=oe(n);return e||(Dt(n,l)&&_e(r,"has",n),_e(r,"has",l)),n===l?i.has(n):i.has(n)||i.has(l)},forEach(n,i){const r=this,l=r.__v_raw,c=oe(l),d=t?Mn:e?qs:De;return!e&&_e(c,"iterate",kt),l.forEach((u,h)=>n.call(i,d(u),d(h),r))}};return Ce(s,e?{add:ks("add"),set:ks("set"),delete:ks("delete"),clear:ks("clear")}:{add(n){!t&&!He(n)&&!xt(n)&&(n=oe(n));const i=oe(this);return Ds(i).has.call(i,n)||(i.add(n),rt(i,"add",n,n)),this},set(n,i){!t&&!He(i)&&!xt(i)&&(i=oe(i));const r=oe(this),{has:l,get:c}=Ds(r);let d=l.call(r,n);d||(n=oe(n),d=l.call(r,n));const u=c.call(r,n);return r.set(n,i),d?Dt(i,u)&&rt(r,"set",n,i):rt(r,"add",n,i),this},delete(n){const i=oe(this),{has:r,get:l}=Ds(i);let c=r.call(i,n);c||(n=oe(n),c=r.call(i,n)),l&&l.call(i,n);const d=i.delete(n);return c&&rt(i,"delete",n,void 0),d},clear(){const n=oe(this),i=n.size!==0,r=n.clear();return i&&rt(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Fa(n,e,t)}),s}function io(e,t){const s=Ra(e,t);return(o,n,i)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?o:Reflect.get(Z(s,n)&&n in o?s:o,n,i)}const Ma={get:io(!1,!1)},Oa={get:io(!1,!0)},La={get:io(!0,!1)};const Li=new WeakMap,Ui=new WeakMap,Ii=new WeakMap,Ua=new WeakMap;function Ia(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qa(e){return e.__v_skip||!Object.isExtensible(e)?0:Ia(ca(e))}function ro(e){return xt(e)?e:ao(e,!1,Pa,Ma,Li)}function ja(e){return ao(e,!1,Na,Oa,Ui)}function qi(e){return ao(e,!0,xa,La,Ii)}function ao(e,t,s,o,n){if(!fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=qa(e);if(i===0)return e;const r=n.get(e);if(r)return r;const l=new Proxy(e,i===2?o:s);return n.set(e,l),l}function qt(e){return xt(e)?qt(e.__v_raw):!!(e&&e.__v_isReactive)}function xt(e){return!!(e&&e.__v_isReadonly)}function He(e){return!!(e&&e.__v_isShallow)}function lo(e){return e?!!e.__v_raw:!1}function oe(e){const t=e&&e.__v_raw;return t?oe(t):e}function Ba(e){return!Z(e,"__v_skip")&&Object.isExtensible(e)&&xn(e,"__v_skip",!0),e}const De=e=>fe(e)?ro(e):e,qs=e=>fe(e)?qi(e):e;function Te(e){return e?e.__v_isRef===!0:!1}function $a(e){return Te(e)?e.value:e}const Va={get:(e,t,s)=>t==="__v_raw"?e:$a(Reflect.get(e,t,s)),set:(e,t,s,o)=>{const n=e[t];return Te(n)&&!Te(s)?(n.value=s,!0):Reflect.set(e,t,s,o)}};function ji(e){return qt(e)?e:new Proxy(e,Va)}class Ha{constructor(t,s,o){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Ni(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ds-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&de!==this)return Di(this,!0),!0}get value(){const t=this.dep.track();return Pi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function za(e,t,s=!1){let o,n;return K(e)?o=e:(o=e.get,n=e.set),new Ha(o,n,s)}const Ts={},js=new WeakMap;let Et;function Ja(e,t=!1,s=Et){if(s){let o=js.get(s);o||js.set(s,o=[]),o.push(e)}}function Ka(e,t,s=re){const{immediate:o,deep:n,once:i,scheduler:r,augmentJob:l,call:c}=s,d=O=>n?O:He(O)||n===!1||n===0?at(O,1):at(O);let u,h,y,w,C=!1,v=!1;if(Te(e)?(h=()=>e.value,C=He(e)):qt(e)?(h=()=>d(e),C=!0):j(e)?(v=!0,C=e.some(O=>qt(O)||He(O)),h=()=>e.map(O=>{if(Te(O))return O.value;if(qt(O))return d(O);if(K(O))return c?c(O,2):O()})):K(e)?t?h=c?()=>c(e,2):e:h=()=>{if(y){ct();try{y()}finally{dt()}}const O=Et;Et=u;try{return c?c(e,3,[w]):e(w)}finally{Et=O}}:h=st,t&&n){const O=h,H=n===!0?1/0:n;h=()=>at(O(),H)}const D=Ca(),U=()=>{u.stop(),D&&D.active&&Zn(D.effects,u)};if(i&&t){const O=t;t=(...H)=>{O(...H),U()}}let B=v?new Array(e.length).fill(Ts):Ts;const $=O=>{if(!(!(u.flags&1)||!u.dirty&&!O))if(t){const H=u.run();if(n||C||(v?H.some((ee,Y)=>Dt(ee,B[Y])):Dt(H,B))){y&&y();const ee=Et;Et=u;try{const Y=[H,B===Ts?void 0:v&&B[0]===Ts?[]:B,w];B=H,c?c(t,3,Y):t(...Y)}finally{Et=ee}}}else u.run()};return l&&l($),u=new Ei(h),u.scheduler=r?()=>r($,!1):$,w=O=>Ja(O,!1,u),y=u.onStop=()=>{const O=js.get(u);if(O){if(c)c(O,4);else for(const H of O)H();js.delete(u)}},t?o?$(!0):B=u.run():r?r($.bind(null,!0),!0):u.run(),U.pause=u.pause.bind(u),U.resume=u.resume.bind(u),U.stop=U,U}function at(e,t=1/0,s){if(t<=0||!fe(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,Te(e))at(e.value,t,s);else if(j(e))for(let o=0;o<e.length;o++)at(e[o],t,s);else if(Ht(e)||It(e))e.forEach(o=>{at(o,t,s)});else if(Si(e)){for(const o in e)at(e[o],t,s);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&at(e[o],t,s)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ss(e,t,s,o){try{return o?e(...o):e()}catch(n){sn(n,t,s)}}function ze(e,t,s,o){if(K(e)){const n=Ss(e,t,s,o);return n&&yi(n)&&n.catch(i=>{sn(i,t,s)}),n}if(j(e)){const n=[];for(let i=0;i<e.length;i++)n.push(ze(e[i],t,s,o));return n}}function sn(e,t,s,o=!0){const n=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||re;if(t){let l=t.parent;const c=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,c,d)===!1)return}l=l.parent}if(i){ct(),Ss(i,null,10,[e,c,d]),dt();return}}Wa(e,s,n,o,r)}function Wa(e,t,s,o=!0,n=!1){if(n)throw e;console.error(e)}const ke=[];let et=-1;const jt=[];let mt=null,Ot=0;const Bi=Promise.resolve();let Bs=null;function $i(e){const t=Bs||Bi;return e?t.then(this?e.bind(this):e):t}function Ga(e){let t=et+1,s=ke.length;for(;t<s;){const o=t+s>>>1,n=ke[o],i=fs(n);i<e||i===e&&n.flags&2?t=o+1:s=o}return t}function co(e){if(!(e.flags&1)){const t=fs(e),s=ke[ke.length-1];!s||!(e.flags&2)&&t>=fs(s)?ke.push(e):ke.splice(Ga(t),0,e),e.flags|=1,Vi()}}function Vi(){Bs||(Bs=Bi.then(zi))}function Xa(e){j(e)?jt.push(...e):mt&&e.id===-1?mt.splice(Ot+1,0,e):e.flags&1||(jt.push(e),e.flags|=1),Vi()}function Do(e,t,s=et+1){for(;s<ke.length;s++){const o=ke[s];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;ke.splice(s,1),s--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Hi(e){if(jt.length){const t=[...new Set(jt)].sort((s,o)=>fs(s)-fs(o));if(jt.length=0,mt){mt.push(...t);return}for(mt=t,Ot=0;Ot<mt.length;Ot++){const s=mt[Ot];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}mt=null,Ot=0}}const fs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function zi(e){try{for(et=0;et<ke.length;et++){const t=ke[et];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ss(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;et<ke.length;et++){const t=ke[et];t&&(t.flags&=-2)}et=-1,ke.length=0,Hi(),Bs=null,(ke.length||jt.length)&&zi()}}let Fe=null,Ji=null;function $s(e){const t=Fe;return Fe=e,Ji=e&&e.type.__scopeId||null,t}function Ki(e,t=Fe,s){if(!t||e._n)return e;const o=(...n)=>{o._d&&Lo(-1);const i=$s(t);let r;try{r=e(...n)}finally{$s(i),o._d&&Lo(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function X(e,t){if(Fe===null)return e;const s=an(Fe),o=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[i,r,l,c=re]=t[n];i&&(K(i)&&(i={mounted:i,updated:i}),i.deep&&at(r),o.push({dir:i,instance:s,value:r,oldValue:void 0,arg:l,modifiers:c}))}return e}function Ct(e,t,s,o){const n=e.dirs,i=t&&t.dirs;for(let r=0;r<n.length;r++){const l=n[r];i&&(l.oldValue=i[r].value);let c=l.dir[o];c&&(ct(),ze(c,s,8,[e.el,l,e,t]),dt())}}const Ya=Symbol("_vte"),Qa=e=>e.__isTeleport,Mt=Symbol("_leaveCb"),Ps=Symbol("_enterCb");function Za(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qi(()=>{e.isMounted=!0}),er(()=>{e.isUnmounting=!0}),e}const Be=[Function,Array],el={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Be,onEnter:Be,onAfterEnter:Be,onEnterCancelled:Be,onBeforeLeave:Be,onLeave:Be,onAfterLeave:Be,onLeaveCancelled:Be,onBeforeAppear:Be,onAppear:Be,onAfterAppear:Be,onAppearCancelled:Be};function tl(e,t){const{leavingVNodes:s}=e;let o=s.get(t.type);return o||(o=Object.create(null),s.set(t.type,o)),o}function On(e,t,s,o,n){const{appear:i,mode:r,persisted:l=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:y,onLeave:w,onAfterLeave:C,onLeaveCancelled:v,onBeforeAppear:D,onAppear:U,onAfterAppear:B,onAppearCancelled:$}=t,O=String(e.key),H=tl(s,e),ee=(z,te)=>{z&&ze(z,o,9,te)},Y=(z,te)=>{const ae=te[1];ee(z,te),j(z)?z.every(L=>L.length<=1)&&ae():z.length<=1&&ae()},me={mode:r,persisted:l,beforeEnter(z){let te=c;if(!s.isMounted)if(i)te=D||c;else return;z[Mt]&&z[Mt](!0);const ae=H[O];ae&&Lt(e,ae)&&ae.el[Mt]&&ae.el[Mt](),ee(te,[z])},enter(z){let te=d,ae=u,L=h;if(!s.isMounted)if(i)te=U||d,ae=B||u,L=$||h;else return;let ie=!1;const ye=z[Ps]=je=>{ie||(ie=!0,je?ee(L,[z]):ee(ae,[z]),me.delayedLeave&&me.delayedLeave(),z[Ps]=void 0)};te?Y(te,[z,ye]):ye()},leave(z,te){const ae=String(e.key);if(z[Ps]&&z[Ps](!0),s.isUnmounting)return te();ee(y,[z]);let L=!1;const ie=z[Mt]=ye=>{L||(L=!0,te(),ye?ee(v,[z]):ee(C,[z]),z[Mt]=void 0,H[ae]===e&&delete H[ae])};H[ae]=e,w?Y(w,[z,ie]):ie()},clone(z){return On(z,t,s,o)}};return me}function hs(e,t){e.shapeFlag&6&&e.component?(e.transition=t,hs(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wi(e,t=!1,s){let o=[],n=0;for(let i=0;i<e.length;i++){let r=e[i];const l=s==null?r.key:String(s)+String(r.key!=null?r.key:i);r.type===W?(r.patchFlag&128&&n++,o=o.concat(Wi(r.children,t,l))):(t||r.type!==ut)&&o.push(l!=null?Nt(r,{key:l}):r)}if(n>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}function Gi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function is(e,t,s,o,n=!1){if(j(e)){e.forEach((C,v)=>is(C,t&&(j(t)?t[v]:t),s,o,n));return}if(rs(o)&&!n){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&is(e,t,s,o.component.subTree);return}const i=o.shapeFlag&4?an(o.component):o.el,r=n?null:i,{i:l,r:c}=e,d=t&&t.r,u=l.refs===re?l.refs={}:l.refs,h=l.setupState,y=oe(h),w=h===re?()=>!1:C=>Z(y,C);if(d!=null&&d!==c&&(be(d)?(u[d]=null,w(d)&&(h[d]=null)):Te(d)&&(d.value=null)),K(c))Ss(c,l,12,[r,u]);else{const C=be(c),v=Te(c);if(C||v){const D=()=>{if(e.f){const U=C?w(c)?h[c]:u[c]:c.value;n?j(U)&&Zn(U,i):j(U)?U.includes(i)||U.push(i):C?(u[c]=[i],w(c)&&(h[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else C?(u[c]=r,w(c)&&(h[c]=r)):v&&(c.value=r,e.k&&(u[e.k]=r))};r?(D.id=-1,Le(D,s)):D()}}}Zs().requestIdleCallback;Zs().cancelIdleCallback;const rs=e=>!!e.type.__asyncLoader,Xi=e=>e.type.__isKeepAlive;function sl(e,t){Yi(e,"a",t)}function nl(e,t){Yi(e,"da",t)}function Yi(e,t,s=we){const o=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(nn(t,o,s),s){let n=s.parent;for(;n&&n.parent;)Xi(n.parent.vnode)&&ol(o,t,s,n),n=n.parent}}function ol(e,t,s,o){const n=nn(t,e,o,!0);tr(()=>{Zn(o[t],n)},s)}function nn(e,t,s=we,o=!1){if(s){const n=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...r)=>{ct();const l=Cs(s),c=ze(t,s,e,r);return l(),dt(),c});return o?n.unshift(i):n.push(i),i}}const ft=e=>(t,s=we)=>{(!ms||e==="sp")&&nn(e,(...o)=>t(...o),s)},il=ft("bm"),Qi=ft("m"),rl=ft("bu"),Zi=ft("u"),er=ft("bum"),tr=ft("um"),al=ft("sp"),ll=ft("rtg"),cl=ft("rtc");function dl(e,t=we){nn("ec",e,t)}const ul="components";function Ue(e,t){return hl(ul,e,!0,t)||e}const fl=Symbol.for("v-ndc");function hl(e,t,s=!0,o=!1){const n=Fe||we;if(n){const i=n.type;{const l=tc(i,!1);if(l&&(l===t||l===$e(t)||l===Qs($e(t))))return i}const r=ko(n[e]||i[e],t)||ko(n.appContext[e],t);return!r&&o?i:r}}function ko(e,t){return e&&(e[t]||e[$e(t)]||e[Qs($e(t))])}function pe(e,t,s,o){let n;const i=s,r=j(e);if(r||be(e)){const l=r&&qt(e);let c=!1,d=!1;l&&(c=!He(e),d=xt(e),e=tn(e)),n=new Array(e.length);for(let u=0,h=e.length;u<h;u++)n[u]=t(c?d?qs(De(e[u])):De(e[u]):e[u],u,void 0,i)}else if(typeof e=="number"){n=new Array(e);for(let l=0;l<e;l++)n[l]=t(l+1,l,void 0,i)}else if(fe(e))if(e[Symbol.iterator])n=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);n=new Array(l.length);for(let c=0,d=l.length;c<d;c++){const u=l[c];n[c]=t(e[u],u,c,i)}}else n=[];return n}const Ln=e=>e?wr(e)?an(e):Ln(e.parent):null,as=Ce(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ln(e.parent),$root:e=>Ln(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>nr(e),$forceUpdate:e=>e.f||(e.f=()=>{co(e.update)}),$nextTick:e=>e.n||(e.n=$i.bind(e.proxy)),$watch:e=>Ol.bind(e)}),Cn=(e,t)=>e!==re&&!e.__isScriptSetup&&Z(e,t),pl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:o,data:n,props:i,accessCache:r,type:l,appContext:c}=e;let d;if(t[0]!=="$"){const w=r[t];if(w!==void 0)switch(w){case 1:return o[t];case 2:return n[t];case 4:return s[t];case 3:return i[t]}else{if(Cn(o,t))return r[t]=1,o[t];if(n!==re&&Z(n,t))return r[t]=2,n[t];if((d=e.propsOptions[0])&&Z(d,t))return r[t]=3,i[t];if(s!==re&&Z(s,t))return r[t]=4,s[t];Un&&(r[t]=0)}}const u=as[t];let h,y;if(u)return t==="$attrs"&&_e(e.attrs,"get",""),u(e);if((h=l.__cssModules)&&(h=h[t]))return h;if(s!==re&&Z(s,t))return r[t]=4,s[t];if(y=c.config.globalProperties,Z(y,t))return y[t]},set({_:e},t,s){const{data:o,setupState:n,ctx:i}=e;return Cn(n,t)?(n[t]=s,!0):o!==re&&Z(o,t)?(o[t]=s,!0):Z(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:o,appContext:n,propsOptions:i}},r){let l;return!!s[r]||e!==re&&Z(e,r)||Cn(t,r)||(l=i[0])&&Z(l,r)||Z(o,r)||Z(as,r)||Z(n.config.globalProperties,r)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Z(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function To(e){return j(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Un=!0;function ml(e){const t=nr(e),s=e.proxy,o=e.ctx;Un=!1,t.beforeCreate&&Po(t.beforeCreate,e,"bc");const{data:n,computed:i,methods:r,watch:l,provide:c,inject:d,created:u,beforeMount:h,mounted:y,beforeUpdate:w,updated:C,activated:v,deactivated:D,beforeDestroy:U,beforeUnmount:B,destroyed:$,unmounted:O,render:H,renderTracked:ee,renderTriggered:Y,errorCaptured:me,serverPrefetch:z,expose:te,inheritAttrs:ae,components:L,directives:ie,filters:ye}=t;if(d&&gl(d,o,null),r)for(const le in r){const se=r[le];K(se)&&(o[le]=se.bind(s))}if(n){const le=n.call(s,s);fe(le)&&(e.data=ro(le))}if(Un=!0,i)for(const le in i){const se=i[le],vt=K(se)?se.bind(s,s):K(se.get)?se.get.bind(s,s):st,Es=!K(se)&&K(se.set)?se.set.bind(s):st,St=nc({get:vt,set:Es});Object.defineProperty(o,le,{enumerable:!0,configurable:!0,get:()=>St.value,set:Ke=>St.value=Ke})}if(l)for(const le in l)sr(l[le],o,s,le);if(c){const le=K(c)?c.call(s):c;Reflect.ownKeys(le).forEach(se=>{wl(se,le[se])})}u&&Po(u,e,"c");function ge(le,se){j(se)?se.forEach(vt=>le(vt.bind(s))):se&&le(se.bind(s))}if(ge(il,h),ge(Qi,y),ge(rl,w),ge(Zi,C),ge(sl,v),ge(nl,D),ge(dl,me),ge(cl,ee),ge(ll,Y),ge(er,B),ge(tr,O),ge(al,z),j(te))if(te.length){const le=e.exposed||(e.exposed={});te.forEach(se=>{Object.defineProperty(le,se,{get:()=>s[se],set:vt=>s[se]=vt})})}else e.exposed||(e.exposed={});H&&e.render===st&&(e.render=H),ae!=null&&(e.inheritAttrs=ae),L&&(e.components=L),ie&&(e.directives=ie),z&&Gi(e)}function gl(e,t,s=st){j(e)&&(e=In(e));for(const o in e){const n=e[o];let i;fe(n)?"default"in n?i=Ns(n.from||o,n.default,!0):i=Ns(n.from||o):i=Ns(n),Te(i)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[o]=i}}function Po(e,t,s){ze(j(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,s)}function sr(e,t,s,o){let n=o.includes(".")?gr(s,o):()=>s[o];if(be(e)){const i=t[e];K(i)&&_n(n,i)}else if(K(e))_n(n,e.bind(s));else if(fe(e))if(j(e))e.forEach(i=>sr(i,t,s,o));else{const i=K(e.handler)?e.handler.bind(s):t[e.handler];K(i)&&_n(n,i,e)}}function nr(e){const t=e.type,{mixins:s,extends:o}=t,{mixins:n,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,l=i.get(t);let c;return l?c=l:!n.length&&!s&&!o?c=t:(c={},n.length&&n.forEach(d=>Vs(c,d,r,!0)),Vs(c,t,r)),fe(t)&&i.set(t,c),c}function Vs(e,t,s,o=!1){const{mixins:n,extends:i}=t;i&&Vs(e,i,s,!0),n&&n.forEach(r=>Vs(e,r,s,!0));for(const r in t)if(!(o&&r==="expose")){const l=bl[r]||s&&s[r];e[r]=l?l(e[r],t[r]):t[r]}return e}const bl={data:xo,props:No,emits:No,methods:es,computed:es,beforeCreate:Ae,created:Ae,beforeMount:Ae,mounted:Ae,beforeUpdate:Ae,updated:Ae,beforeDestroy:Ae,beforeUnmount:Ae,destroyed:Ae,unmounted:Ae,activated:Ae,deactivated:Ae,errorCaptured:Ae,serverPrefetch:Ae,components:es,directives:es,watch:vl,provide:xo,inject:yl};function xo(e,t){return t?e?function(){return Ce(K(e)?e.call(this,this):e,K(t)?t.call(this,this):t)}:t:e}function yl(e,t){return es(In(e),In(t))}function In(e){if(j(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Ae(e,t){return e?[...new Set([].concat(e,t))]:t}function es(e,t){return e?Ce(Object.create(null),e,t):t}function No(e,t){return e?j(e)&&j(t)?[...new Set([...e,...t])]:Ce(Object.create(null),To(e),To(t??{})):t}function vl(e,t){if(!e)return t;if(!t)return e;const s=Ce(Object.create(null),e);for(const o in t)s[o]=Ae(e[o],t[o]);return s}function or(){return{app:null,config:{isNativeTag:aa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sl=0;function Cl(e,t){return function(o,n=null){K(o)||(o=Ce({},o)),n!=null&&!fe(n)&&(n=null);const i=or(),r=new WeakSet,l=[];let c=!1;const d=i.app={_uid:Sl++,_component:o,_props:n,_container:null,_context:i,_instance:null,version:oc,get config(){return i.config},set config(u){},use(u,...h){return r.has(u)||(u&&K(u.install)?(r.add(u),u.install(d,...h)):K(u)&&(r.add(u),u(d,...h))),d},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),d},component(u,h){return h?(i.components[u]=h,d):i.components[u]},directive(u,h){return h?(i.directives[u]=h,d):i.directives[u]},mount(u,h,y){if(!c){const w=d._ceVNode||Se(o,n);return w.appContext=i,y===!0?y="svg":y===!1&&(y=void 0),e(w,u,y),c=!0,d._container=u,u.__vue_app__=d,an(w.component)}},onUnmount(u){l.push(u)},unmount(){c&&(ze(l,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,h){return i.provides[u]=h,d},runWithContext(u){const h=Bt;Bt=d;try{return u()}finally{Bt=h}}};return d}}let Bt=null;function wl(e,t){if(we){let s=we.provides;const o=we.parent&&we.parent.provides;o===s&&(s=we.provides=Object.create(o)),s[e]=t}}function Ns(e,t,s=!1){const o=we||Fe;if(o||Bt){let n=Bt?Bt._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&K(t)?t.call(o&&o.proxy):t}}const ir={},rr=()=>Object.create(ir),ar=e=>Object.getPrototypeOf(e)===ir;function _l(e,t,s,o=!1){const n={},i=rr();e.propsDefaults=Object.create(null),lr(e,t,n,i);for(const r in e.propsOptions[0])r in n||(n[r]=void 0);s?e.props=o?n:ja(n):e.type.props?e.props=n:e.props=i,e.attrs=i}function El(e,t,s,o){const{props:n,attrs:i,vnode:{patchFlag:r}}=e,l=oe(n),[c]=e.propsOptions;let d=!1;if((o||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let y=u[h];if(on(e.emitsOptions,y))continue;const w=t[y];if(c)if(Z(i,y))w!==i[y]&&(i[y]=w,d=!0);else{const C=$e(y);n[C]=qn(c,l,C,w,e,!1)}else w!==i[y]&&(i[y]=w,d=!0)}}}else{lr(e,t,n,i)&&(d=!0);let u;for(const h in l)(!t||!Z(t,h)&&((u=yt(h))===h||!Z(t,u)))&&(c?s&&(s[h]!==void 0||s[u]!==void 0)&&(n[h]=qn(c,l,h,void 0,e,!0)):delete n[h]);if(i!==l)for(const h in i)(!t||!Z(t,h))&&(delete i[h],d=!0)}d&&rt(e.attrs,"set","")}function lr(e,t,s,o){const[n,i]=e.propsOptions;let r=!1,l;if(t)for(let c in t){if(ss(c))continue;const d=t[c];let u;n&&Z(n,u=$e(c))?!i||!i.includes(u)?s[u]=d:(l||(l={}))[u]=d:on(e.emitsOptions,c)||(!(c in o)||d!==o[c])&&(o[c]=d,r=!0)}if(i){const c=oe(s),d=l||re;for(let u=0;u<i.length;u++){const h=i[u];s[h]=qn(n,c,h,d[h],e,!Z(d,h))}}return r}function qn(e,t,s,o,n,i){const r=e[s];if(r!=null){const l=Z(r,"default");if(l&&o===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&K(c)){const{propsDefaults:d}=n;if(s in d)o=d[s];else{const u=Cs(n);o=d[s]=c.call(null,t),u()}}else o=c;n.ce&&n.ce._setProp(s,o)}r[0]&&(i&&!l?o=!1:r[1]&&(o===""||o===yt(s))&&(o=!0))}return o}const Al=new WeakMap;function cr(e,t,s=!1){const o=s?Al:t.propsCache,n=o.get(e);if(n)return n;const i=e.props,r={},l=[];let c=!1;if(!K(e)){const u=h=>{c=!0;const[y,w]=cr(h,t,!0);Ce(r,y),w&&l.push(...w)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return fe(e)&&o.set(e,Ut),Ut;if(j(i))for(let u=0;u<i.length;u++){const h=$e(i[u]);Fo(h)&&(r[h]=re)}else if(i)for(const u in i){const h=$e(u);if(Fo(h)){const y=i[u],w=r[h]=j(y)||K(y)?{type:y}:Ce({},y),C=w.type;let v=!1,D=!0;if(j(C))for(let U=0;U<C.length;++U){const B=C[U],$=K(B)&&B.name;if($==="Boolean"){v=!0;break}else $==="String"&&(D=!1)}else v=K(C)&&C.name==="Boolean";w[0]=v,w[1]=D,(v||Z(w,"default"))&&l.push(h)}}const d=[r,l];return fe(e)&&o.set(e,d),d}function Fo(e){return e[0]!=="$"&&!ss(e)}const uo=e=>e[0]==="_"||e==="$stable",fo=e=>j(e)?e.map(tt):[tt(e)],Dl=(e,t,s)=>{if(t._n)return t;const o=Ki((...n)=>fo(t(...n)),s);return o._c=!1,o},dr=(e,t,s)=>{const o=e._ctx;for(const n in e){if(uo(n))continue;const i=e[n];if(K(i))t[n]=Dl(n,i,o);else if(i!=null){const r=fo(i);t[n]=()=>r}}},ur=(e,t)=>{const s=fo(t);e.slots.default=()=>s},fr=(e,t,s)=>{for(const o in t)(s||!uo(o))&&(e[o]=t[o])},kl=(e,t,s)=>{const o=e.slots=rr();if(e.vnode.shapeFlag&32){const n=t.__;n&&xn(o,"__",n,!0);const i=t._;i?(fr(o,t,s),s&&xn(o,"_",i,!0)):dr(t,o)}else t&&ur(e,t)},Tl=(e,t,s)=>{const{vnode:o,slots:n}=e;let i=!0,r=re;if(o.shapeFlag&32){const l=t._;l?s&&l===1?i=!1:fr(n,t,s):(i=!t.$stable,dr(t,n)),r=t}else t&&(ur(e,t),r={default:1});if(i)for(const l in n)!uo(l)&&r[l]==null&&delete n[l]},Le=$l;function Pl(e){return xl(e)}function xl(e,t){const s=Zs();s.__VUE__=!0;const{insert:o,remove:n,patchProp:i,createElement:r,createText:l,createComment:c,setText:d,setElementText:u,parentNode:h,nextSibling:y,setScopeId:w=st,insertStaticContent:C}=e,v=(f,p,S,k=null,E=null,A=null,F=void 0,x=null,P=!!p.dynamicChildren)=>{if(f===p)return;f&&!Lt(f,p)&&(k=As(f),Ke(f,E,A,!0),f=null),p.patchFlag===-2&&(P=!1,p.dynamicChildren=null);const{type:T,ref:q,shapeFlag:R}=p;switch(T){case rn:D(f,p,S,k);break;case ut:U(f,p,S,k);break;case Fs:f==null&&B(p,S,k,F);break;case W:L(f,p,S,k,E,A,F,x,P);break;default:R&1?H(f,p,S,k,E,A,F,x,P):R&6?ie(f,p,S,k,E,A,F,x,P):(R&64||R&128)&&T.process(f,p,S,k,E,A,F,x,P,Wt)}q!=null&&E?is(q,f&&f.ref,A,p||f,!p):q==null&&f&&f.ref!=null&&is(f.ref,null,A,f,!0)},D=(f,p,S,k)=>{if(f==null)o(p.el=l(p.children),S,k);else{const E=p.el=f.el;p.children!==f.children&&d(E,p.children)}},U=(f,p,S,k)=>{f==null?o(p.el=c(p.children||""),S,k):p.el=f.el},B=(f,p,S,k)=>{[f.el,f.anchor]=C(f.children,p,S,k,f.el,f.anchor)},$=({el:f,anchor:p},S,k)=>{let E;for(;f&&f!==p;)E=y(f),o(f,S,k),f=E;o(p,S,k)},O=({el:f,anchor:p})=>{let S;for(;f&&f!==p;)S=y(f),n(f),f=S;n(p)},H=(f,p,S,k,E,A,F,x,P)=>{p.type==="svg"?F="svg":p.type==="math"&&(F="mathml"),f==null?ee(p,S,k,E,A,F,x,P):z(f,p,E,A,F,x,P)},ee=(f,p,S,k,E,A,F,x)=>{let P,T;const{props:q,shapeFlag:R,transition:I,dirs:V}=f;if(P=f.el=r(f.type,A,q&&q.is,q),R&8?u(P,f.children):R&16&&me(f.children,P,null,k,E,wn(f,A),F,x),V&&Ct(f,null,k,"created"),Y(P,f,f.scopeId,F,k),q){for(const ce in q)ce!=="value"&&!ss(ce)&&i(P,ce,null,q[ce],A,k);"value"in q&&i(P,"value",null,q.value,A),(T=q.onVnodeBeforeMount)&&Ye(T,k,f)}V&&Ct(f,null,k,"beforeMount");const G=Nl(E,I);G&&I.beforeEnter(P),o(P,p,S),((T=q&&q.onVnodeMounted)||G||V)&&Le(()=>{T&&Ye(T,k,f),G&&I.enter(P),V&&Ct(f,null,k,"mounted")},E)},Y=(f,p,S,k,E)=>{if(S&&w(f,S),k)for(let A=0;A<k.length;A++)w(f,k[A]);if(E){let A=E.subTree;if(p===A||yr(A.type)&&(A.ssContent===p||A.ssFallback===p)){const F=E.vnode;Y(f,F,F.scopeId,F.slotScopeIds,E.parent)}}},me=(f,p,S,k,E,A,F,x,P=0)=>{for(let T=P;T<f.length;T++){const q=f[T]=x?gt(f[T]):tt(f[T]);v(null,q,p,S,k,E,A,F,x)}},z=(f,p,S,k,E,A,F)=>{const x=p.el=f.el;let{patchFlag:P,dynamicChildren:T,dirs:q}=p;P|=f.patchFlag&16;const R=f.props||re,I=p.props||re;let V;if(S&&wt(S,!1),(V=I.onVnodeBeforeUpdate)&&Ye(V,S,p,f),q&&Ct(p,f,S,"beforeUpdate"),S&&wt(S,!0),(R.innerHTML&&I.innerHTML==null||R.textContent&&I.textContent==null)&&u(x,""),T?te(f.dynamicChildren,T,x,S,k,wn(p,E),A):F||se(f,p,x,null,S,k,wn(p,E),A,!1),P>0){if(P&16)ae(x,R,I,S,E);else if(P&2&&R.class!==I.class&&i(x,"class",null,I.class,E),P&4&&i(x,"style",R.style,I.style,E),P&8){const G=p.dynamicProps;for(let ce=0;ce<G.length;ce++){const ne=G[ce],Pe=R[ne],xe=I[ne];(xe!==Pe||ne==="value")&&i(x,ne,Pe,xe,E,S)}}P&1&&f.children!==p.children&&u(x,p.children)}else!F&&T==null&&ae(x,R,I,S,E);((V=I.onVnodeUpdated)||q)&&Le(()=>{V&&Ye(V,S,p,f),q&&Ct(p,f,S,"updated")},k)},te=(f,p,S,k,E,A,F)=>{for(let x=0;x<p.length;x++){const P=f[x],T=p[x],q=P.el&&(P.type===W||!Lt(P,T)||P.shapeFlag&198)?h(P.el):S;v(P,T,q,null,k,E,A,F,!0)}},ae=(f,p,S,k,E)=>{if(p!==S){if(p!==re)for(const A in p)!ss(A)&&!(A in S)&&i(f,A,p[A],null,E,k);for(const A in S){if(ss(A))continue;const F=S[A],x=p[A];F!==x&&A!=="value"&&i(f,A,x,F,E,k)}"value"in S&&i(f,"value",p.value,S.value,E)}},L=(f,p,S,k,E,A,F,x,P)=>{const T=p.el=f?f.el:l(""),q=p.anchor=f?f.anchor:l("");let{patchFlag:R,dynamicChildren:I,slotScopeIds:V}=p;V&&(x=x?x.concat(V):V),f==null?(o(T,S,k),o(q,S,k),me(p.children||[],S,q,E,A,F,x,P)):R>0&&R&64&&I&&f.dynamicChildren?(te(f.dynamicChildren,I,S,E,A,F,x),(p.key!=null||E&&p===E.subTree)&&hr(f,p,!0)):se(f,p,S,q,E,A,F,x,P)},ie=(f,p,S,k,E,A,F,x,P)=>{p.slotScopeIds=x,f==null?p.shapeFlag&512?E.ctx.activate(p,S,k,F,P):ye(p,S,k,E,A,F,P):je(f,p,P)},ye=(f,p,S,k,E,A,F)=>{const x=f.component=Gl(f,k,E);if(Xi(f)&&(x.ctx.renderer=Wt),Yl(x,!1,F),x.asyncDep){if(E&&E.registerDep(x,ge,F),!f.el){const P=x.subTree=Se(ut);U(null,P,p,S)}}else ge(x,f,p,S,E,A,F)},je=(f,p,S)=>{const k=p.component=f.component;if(jl(f,p,S))if(k.asyncDep&&!k.asyncResolved){le(k,p,S);return}else k.next=p,k.update();else p.el=f.el,k.vnode=p},ge=(f,p,S,k,E,A,F)=>{const x=()=>{if(f.isMounted){let{next:R,bu:I,u:V,parent:G,vnode:ce}=f;{const Ge=pr(f);if(Ge){R&&(R.el=ce.el,le(f,R,F)),Ge.asyncDep.then(()=>{f.isUnmounted||x()});return}}let ne=R,Pe;wt(f,!1),R?(R.el=ce.el,le(f,R,F)):R=ce,I&&xs(I),(Pe=R.props&&R.props.onVnodeBeforeUpdate)&&Ye(Pe,G,R,ce),wt(f,!0);const xe=Mo(f),We=f.subTree;f.subTree=xe,v(We,xe,h(We.el),As(We),f,E,A),R.el=xe.el,ne===null&&Bl(f,xe.el),V&&Le(V,E),(Pe=R.props&&R.props.onVnodeUpdated)&&Le(()=>Ye(Pe,G,R,ce),E)}else{let R;const{el:I,props:V}=p,{bm:G,m:ce,parent:ne,root:Pe,type:xe}=f,We=rs(p);wt(f,!1),G&&xs(G),!We&&(R=V&&V.onVnodeBeforeMount)&&Ye(R,ne,p),wt(f,!0);{Pe.ce&&Pe.ce._def.shadowRoot!==!1&&Pe.ce._injectChildStyle(xe);const Ge=f.subTree=Mo(f);v(null,Ge,S,k,f,E,A),p.el=Ge.el}if(ce&&Le(ce,E),!We&&(R=V&&V.onVnodeMounted)){const Ge=p;Le(()=>Ye(R,ne,Ge),E)}(p.shapeFlag&256||ne&&rs(ne.vnode)&&ne.vnode.shapeFlag&256)&&f.a&&Le(f.a,E),f.isMounted=!0,p=S=k=null}};f.scope.on();const P=f.effect=new Ei(x);f.scope.off();const T=f.update=P.run.bind(P),q=f.job=P.runIfDirty.bind(P);q.i=f,q.id=f.uid,P.scheduler=()=>co(q),wt(f,!0),T()},le=(f,p,S)=>{p.component=f;const k=f.vnode.props;f.vnode=p,f.next=null,El(f,p.props,k,S),Tl(f,p.children,S),ct(),Do(f),dt()},se=(f,p,S,k,E,A,F,x,P=!1)=>{const T=f&&f.children,q=f?f.shapeFlag:0,R=p.children,{patchFlag:I,shapeFlag:V}=p;if(I>0){if(I&128){Es(T,R,S,k,E,A,F,x,P);return}else if(I&256){vt(T,R,S,k,E,A,F,x,P);return}}V&8?(q&16&&Kt(T,E,A),R!==T&&u(S,R)):q&16?V&16?Es(T,R,S,k,E,A,F,x,P):Kt(T,E,A,!0):(q&8&&u(S,""),V&16&&me(R,S,k,E,A,F,x,P))},vt=(f,p,S,k,E,A,F,x,P)=>{f=f||Ut,p=p||Ut;const T=f.length,q=p.length,R=Math.min(T,q);let I;for(I=0;I<R;I++){const V=p[I]=P?gt(p[I]):tt(p[I]);v(f[I],V,S,null,E,A,F,x,P)}T>q?Kt(f,E,A,!0,!1,R):me(p,S,k,E,A,F,x,P,R)},Es=(f,p,S,k,E,A,F,x,P)=>{let T=0;const q=p.length;let R=f.length-1,I=q-1;for(;T<=R&&T<=I;){const V=f[T],G=p[T]=P?gt(p[T]):tt(p[T]);if(Lt(V,G))v(V,G,S,null,E,A,F,x,P);else break;T++}for(;T<=R&&T<=I;){const V=f[R],G=p[I]=P?gt(p[I]):tt(p[I]);if(Lt(V,G))v(V,G,S,null,E,A,F,x,P);else break;R--,I--}if(T>R){if(T<=I){const V=I+1,G=V<q?p[V].el:k;for(;T<=I;)v(null,p[T]=P?gt(p[T]):tt(p[T]),S,G,E,A,F,x,P),T++}}else if(T>I)for(;T<=R;)Ke(f[T],E,A,!0),T++;else{const V=T,G=T,ce=new Map;for(T=G;T<=I;T++){const Oe=p[T]=P?gt(p[T]):tt(p[T]);Oe.key!=null&&ce.set(Oe.key,T)}let ne,Pe=0;const xe=I-G+1;let We=!1,Ge=0;const Gt=new Array(xe);for(T=0;T<xe;T++)Gt[T]=0;for(T=V;T<=R;T++){const Oe=f[T];if(Pe>=xe){Ke(Oe,E,A,!0);continue}let Xe;if(Oe.key!=null)Xe=ce.get(Oe.key);else for(ne=G;ne<=I;ne++)if(Gt[ne-G]===0&&Lt(Oe,p[ne])){Xe=ne;break}Xe===void 0?Ke(Oe,E,A,!0):(Gt[Xe-G]=T+1,Xe>=Ge?Ge=Xe:We=!0,v(Oe,p[Xe],S,null,E,A,F,x,P),Pe++)}const So=We?Fl(Gt):Ut;for(ne=So.length-1,T=xe-1;T>=0;T--){const Oe=G+T,Xe=p[Oe],Co=Oe+1<q?p[Oe+1].el:k;Gt[T]===0?v(null,Xe,S,Co,E,A,F,x,P):We&&(ne<0||T!==So[ne]?St(Xe,S,Co,2):ne--)}}},St=(f,p,S,k,E=null)=>{const{el:A,type:F,transition:x,children:P,shapeFlag:T}=f;if(T&6){St(f.component.subTree,p,S,k);return}if(T&128){f.suspense.move(p,S,k);return}if(T&64){F.move(f,p,S,Wt);return}if(F===W){o(A,p,S);for(let R=0;R<P.length;R++)St(P[R],p,S,k);o(f.anchor,p,S);return}if(F===Fs){$(f,p,S);return}if(k!==2&&T&1&&x)if(k===0)x.beforeEnter(A),o(A,p,S),Le(()=>x.enter(A),E);else{const{leave:R,delayLeave:I,afterLeave:V}=x,G=()=>{f.ctx.isUnmounted?n(A):o(A,p,S)},ce=()=>{R(A,()=>{G(),V&&V()})};I?I(A,G,ce):ce()}else o(A,p,S)},Ke=(f,p,S,k=!1,E=!1)=>{const{type:A,props:F,ref:x,children:P,dynamicChildren:T,shapeFlag:q,patchFlag:R,dirs:I,cacheIndex:V}=f;if(R===-2&&(E=!1),x!=null&&(ct(),is(x,null,S,f,!0),dt()),V!=null&&(p.renderCache[V]=void 0),q&256){p.ctx.deactivate(f);return}const G=q&1&&I,ce=!rs(f);let ne;if(ce&&(ne=F&&F.onVnodeBeforeUnmount)&&Ye(ne,p,f),q&6)ra(f.component,S,k);else{if(q&128){f.suspense.unmount(S,k);return}G&&Ct(f,null,p,"beforeUnmount"),q&64?f.type.remove(f,p,S,Wt,k):T&&!T.hasOnce&&(A!==W||R>0&&R&64)?Kt(T,p,S,!1,!0):(A===W&&R&384||!E&&q&16)&&Kt(P,p,S),k&&yo(f)}(ce&&(ne=F&&F.onVnodeUnmounted)||G)&&Le(()=>{ne&&Ye(ne,p,f),G&&Ct(f,null,p,"unmounted")},S)},yo=f=>{const{type:p,el:S,anchor:k,transition:E}=f;if(p===W){ia(S,k);return}if(p===Fs){O(f);return}const A=()=>{n(S),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(f.shapeFlag&1&&E&&!E.persisted){const{leave:F,delayLeave:x}=E,P=()=>F(S,A);x?x(f.el,A,P):P()}else A()},ia=(f,p)=>{let S;for(;f!==p;)S=y(f),n(f),f=S;n(p)},ra=(f,p,S)=>{const{bum:k,scope:E,job:A,subTree:F,um:x,m:P,a:T,parent:q,slots:{__:R}}=f;Ro(P),Ro(T),k&&xs(k),q&&j(R)&&R.forEach(I=>{q.renderCache[I]=void 0}),E.stop(),A&&(A.flags|=8,Ke(F,f,p,S)),x&&Le(x,p),Le(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Kt=(f,p,S,k=!1,E=!1,A=0)=>{for(let F=A;F<f.length;F++)Ke(f[F],p,S,k,E)},As=f=>{if(f.shapeFlag&6)return As(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const p=y(f.anchor||f.el),S=p&&p[Ya];return S?y(S):p};let mn=!1;const vo=(f,p,S)=>{f==null?p._vnode&&Ke(p._vnode,null,null,!0):v(p._vnode||null,f,p,null,null,null,S),p._vnode=f,mn||(mn=!0,Do(),Hi(),mn=!1)},Wt={p:v,um:Ke,m:St,r:yo,mt:ye,mc:me,pc:se,pbc:te,n:As,o:e};return{render:vo,hydrate:void 0,createApp:Cl(vo)}}function wn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function wt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Nl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function hr(e,t,s=!1){const o=e.children,n=t.children;if(j(o)&&j(n))for(let i=0;i<o.length;i++){const r=o[i];let l=n[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[i]=gt(n[i]),l.el=r.el),!s&&l.patchFlag!==-2&&hr(r,l)),l.type===rn&&(l.el=r.el),l.type===ut&&!l.el&&(l.el=r.el)}}function Fl(e){const t=e.slice(),s=[0];let o,n,i,r,l;const c=e.length;for(o=0;o<c;o++){const d=e[o];if(d!==0){if(n=s[s.length-1],e[n]<d){t[o]=n,s.push(o);continue}for(i=0,r=s.length-1;i<r;)l=i+r>>1,e[s[l]]<d?i=l+1:r=l;d<e[s[i]]&&(i>0&&(t[o]=s[i-1]),s[i]=o)}}for(i=s.length,r=s[i-1];i-- >0;)s[i]=r,r=t[r];return s}function pr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:pr(t)}function Ro(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Rl=Symbol.for("v-scx"),Ml=()=>Ns(Rl);function _n(e,t,s){return mr(e,t,s)}function mr(e,t,s=re){const{immediate:o,deep:n,flush:i,once:r}=s,l=Ce({},s),c=t&&o||!t&&i!=="post";let d;if(ms){if(i==="sync"){const w=Ml();d=w.__watcherHandles||(w.__watcherHandles=[])}else if(!c){const w=()=>{};return w.stop=st,w.resume=st,w.pause=st,w}}const u=we;l.call=(w,C,v)=>ze(w,u,C,v);let h=!1;i==="post"?l.scheduler=w=>{Le(w,u&&u.suspense)}:i!=="sync"&&(h=!0,l.scheduler=(w,C)=>{C?w():co(w)}),l.augmentJob=w=>{t&&(w.flags|=4),h&&(w.flags|=2,u&&(w.id=u.uid,w.i=u))};const y=Ka(e,t,l);return ms&&(d?d.push(y):c&&y()),y}function Ol(e,t,s){const o=this.proxy,n=be(e)?e.includes(".")?gr(o,e):()=>o[e]:e.bind(o,o);let i;K(t)?i=t:(i=t.handler,s=t);const r=Cs(this),l=mr(n,i.bind(o),s);return r(),l}function gr(e,t){const s=t.split(".");return()=>{let o=e;for(let n=0;n<s.length&&o;n++)o=o[s[n]];return o}}const Ll=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${$e(t)}Modifiers`]||e[`${yt(t)}Modifiers`];function Ul(e,t,...s){if(e.isUnmounted)return;const o=e.vnode.props||re;let n=s;const i=t.startsWith("update:"),r=i&&Ll(o,t.slice(7));r&&(r.trim&&(n=s.map(u=>be(u)?u.trim():u)),r.number&&(n=s.map(Is)));let l,c=o[l=gn(t)]||o[l=gn($e(t))];!c&&i&&(c=o[l=gn(yt(t))]),c&&ze(c,e,6,n);const d=o[l+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ze(d,e,6,n)}}function br(e,t,s=!1){const o=t.emitsCache,n=o.get(e);if(n!==void 0)return n;const i=e.emits;let r={},l=!1;if(!K(e)){const c=d=>{const u=br(d,t,!0);u&&(l=!0,Ce(r,u))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(fe(e)&&o.set(e,null),null):(j(i)?i.forEach(c=>r[c]=null):Ce(r,i),fe(e)&&o.set(e,r),r)}function on(e,t){return!e||!Xs(t)?!1:(t=t.slice(2).replace(/Once$/,""),Z(e,t[0].toLowerCase()+t.slice(1))||Z(e,yt(t))||Z(e,t))}function Mo(e){const{type:t,vnode:s,proxy:o,withProxy:n,propsOptions:[i],slots:r,attrs:l,emit:c,render:d,renderCache:u,props:h,data:y,setupState:w,ctx:C,inheritAttrs:v}=e,D=$s(e);let U,B;try{if(s.shapeFlag&4){const O=n||o,H=O;U=tt(d.call(H,O,u,h,w,y,C)),B=l}else{const O=t;U=tt(O.length>1?O(h,{attrs:l,slots:r,emit:c}):O(h,null)),B=t.props?l:Il(l)}}catch(O){ls.length=0,sn(O,e,1),U=Se(ut)}let $=U;if(B&&v!==!1){const O=Object.keys(B),{shapeFlag:H}=$;O.length&&H&7&&(i&&O.some(Qn)&&(B=ql(B,i)),$=Nt($,B,!1,!0))}return s.dirs&&($=Nt($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(s.dirs):s.dirs),s.transition&&hs($,s.transition),U=$,$s(D),U}const Il=e=>{let t;for(const s in e)(s==="class"||s==="style"||Xs(s))&&((t||(t={}))[s]=e[s]);return t},ql=(e,t)=>{const s={};for(const o in e)(!Qn(o)||!(o.slice(9)in t))&&(s[o]=e[o]);return s};function jl(e,t,s){const{props:o,children:n,component:i}=e,{props:r,children:l,patchFlag:c}=t,d=i.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return o?Oo(o,r,d):!!r;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const y=u[h];if(r[y]!==o[y]&&!on(d,y))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:o===r?!1:o?r?Oo(o,r,d):!0:!!r;return!1}function Oo(e,t,s){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let n=0;n<o.length;n++){const i=o[n];if(t[i]!==e[i]&&!on(s,i))return!0}return!1}function Bl({vnode:e,parent:t},s){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=s,t=t.parent;else break}}const yr=e=>e.__isSuspense;function $l(e,t){t&&t.pendingBranch?j(e)?t.effects.push(...e):t.effects.push(e):Xa(e)}const W=Symbol.for("v-fgt"),rn=Symbol.for("v-txt"),ut=Symbol.for("v-cmt"),Fs=Symbol.for("v-stc"),ls=[];let Ie=null;function m(e=!1){ls.push(Ie=e?null:[])}function Vl(){ls.pop(),Ie=ls[ls.length-1]||null}let ps=1;function Lo(e,t=!1){ps+=e,e<0&&Ie&&t&&(Ie.hasOnce=!0)}function vr(e){return e.dynamicChildren=ps>0?Ie||Ut:null,Vl(),ps>0&&Ie&&Ie.push(e),e}function g(e,t,s,o,n,i){return vr(a(e,t,s,o,n,i,!0))}function Tt(e,t,s,o,n){return vr(Se(e,t,s,o,n,!0))}function Sr(e){return e?e.__v_isVNode===!0:!1}function Lt(e,t){return e.type===t.type&&e.key===t.key}const Cr=({key:e})=>e??null,Rs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?be(e)||Te(e)||K(e)?{i:Fe,r:e,k:t,f:!!s}:e:null);function a(e,t=null,s=null,o=0,n=null,i=e===W?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cr(t),ref:t&&Rs(t),scopeId:Ji,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Fe};return l?(ho(c,s),i&128&&e.normalize(c)):s&&(c.shapeFlag|=be(s)?8:16),ps>0&&!r&&Ie&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ie.push(c),c}const Se=Hl;function Hl(e,t=null,s=null,o=0,n=null,i=!1){if((!e||e===fl)&&(e=ut),Sr(e)){const l=Nt(e,t,!0);return s&&ho(l,s),ps>0&&!i&&Ie&&(l.shapeFlag&6?Ie[Ie.indexOf(e)]=l:Ie.push(l)),l.patchFlag=-2,l}if(sc(e)&&(e=e.__vccOpts),t){t=zl(t);let{class:l,style:c}=t;l&&!be(l)&&(t.class=Q(l)),fe(c)&&(lo(c)&&!j(c)&&(c=Ce({},c)),t.style=en(c))}const r=be(e)?1:yr(e)?128:Qa(e)?64:fe(e)?4:K(e)?2:0;return a(e,t,s,o,n,r,i,!0)}function zl(e){return e?lo(e)||ar(e)?Ce({},e):e:null}function Nt(e,t,s=!1,o=!1){const{props:n,ref:i,patchFlag:r,children:l,transition:c}=e,d=t?Jl(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Cr(d),ref:t&&t.ref?s&&i?j(i)?i.concat(Rs(t)):[i,Rs(t)]:Rs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nt(e.ssContent),ssFallback:e.ssFallback&&Nt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&o&&hs(u,c.clone(u)),u}function N(e=" ",t=0){return Se(rn,null,e,t)}function cs(e,t){const s=Se(Fs,null,e);return s.staticCount=t,s}function M(e="",t=!1){return t?(m(),Tt(ut,null,e)):Se(ut,null,e)}function tt(e){return e==null||typeof e=="boolean"?Se(ut):j(e)?Se(W,null,e.slice()):Sr(e)?gt(e):Se(rn,null,String(e))}function gt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Nt(e)}function ho(e,t){let s=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(j(t))s=16;else if(typeof t=="object")if(o&65){const n=t.default;n&&(n._c&&(n._d=!1),ho(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!ar(t)?t._ctx=Fe:n===3&&Fe&&(Fe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else K(t)?(t={default:t,_ctx:Fe},s=32):(t=String(t),o&64?(s=16,t=[N(t)]):s=8);e.children=t,e.shapeFlag|=s}function Jl(...e){const t={};for(let s=0;s<e.length;s++){const o=e[s];for(const n in o)if(n==="class")t.class!==o.class&&(t.class=Q([t.class,o.class]));else if(n==="style")t.style=en([t.style,o.style]);else if(Xs(n)){const i=t[n],r=o[n];r&&i!==r&&!(j(i)&&i.includes(r))&&(t[n]=i?[].concat(i,r):r)}else n!==""&&(t[n]=o[n])}return t}function Ye(e,t,s,o=null){ze(e,t,7,[s,o])}const Kl=or();let Wl=0;function Gl(e,t,s){const o=e.type,n=(t?t.appContext:e.appContext)||Kl,i={uid:Wl++,vnode:e,type:o,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Sa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cr(o,n),emitsOptions:br(o,n),emit:null,emitted:null,propsDefaults:re,inheritAttrs:o.inheritAttrs,ctx:re,data:re,props:re,attrs:re,slots:re,refs:re,setupState:re,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Ul.bind(null,i),e.ce&&e.ce(i),i}let we=null;const Xl=()=>we||Fe;let Hs,jn;{const e=Zs(),t=(s,o)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(o),i=>{n.length>1?n.forEach(r=>r(i)):n[0](i)}};Hs=t("__VUE_INSTANCE_SETTERS__",s=>we=s),jn=t("__VUE_SSR_SETTERS__",s=>ms=s)}const Cs=e=>{const t=we;return Hs(e),e.scope.on(),()=>{e.scope.off(),Hs(t)}},Uo=()=>{we&&we.scope.off(),Hs(null)};function wr(e){return e.vnode.shapeFlag&4}let ms=!1;function Yl(e,t=!1,s=!1){t&&jn(t);const{props:o,children:n}=e.vnode,i=wr(e);_l(e,o,i,t),kl(e,n,s||t);const r=i?Ql(e,t):void 0;return t&&jn(!1),r}function Ql(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pl);const{setup:o}=s;if(o){ct();const n=e.setupContext=o.length>1?ec(e):null,i=Cs(e),r=Ss(o,e,0,[e.props,n]),l=yi(r);if(dt(),i(),(l||e.sp)&&!rs(e)&&Gi(e),l){if(r.then(Uo,Uo),t)return r.then(c=>{Io(e,c)}).catch(c=>{sn(c,e,0)});e.asyncDep=r}else Io(e,r)}else _r(e)}function Io(e,t,s){K(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fe(t)&&(e.setupState=ji(t)),_r(e)}function _r(e,t,s){const o=e.type;e.render||(e.render=o.render||st);{const n=Cs(e);ct();try{ml(e)}finally{dt(),n()}}}const Zl={get(e,t){return _e(e,"get",""),e[t]}};function ec(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Zl),slots:e.slots,emit:e.emit,expose:t}}function an(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ji(Ba(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in as)return as[s](e)},has(t,s){return s in t||s in as}})):e.proxy}function tc(e,t=!0){return K(e)?e.displayName||e.name:e.name||t&&e.__name}function sc(e){return K(e)&&"__vccOpts"in e}const nc=(e,t)=>za(e,t,ms),oc="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bn;const qo=typeof window<"u"&&window.trustedTypes;if(qo)try{Bn=qo.createPolicy("vue",{createHTML:e=>e})}catch{}const Er=Bn?e=>Bn.createHTML(e):e=>e,ic="http://www.w3.org/2000/svg",rc="http://www.w3.org/1998/Math/MathML",it=typeof document<"u"?document:null,jo=it&&it.createElement("template"),ac={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,o)=>{const n=t==="svg"?it.createElementNS(ic,e):t==="mathml"?it.createElementNS(rc,e):s?it.createElement(e,{is:s}):it.createElement(e);return e==="select"&&o&&o.multiple!=null&&n.setAttribute("multiple",o.multiple),n},createText:e=>it.createTextNode(e),createComment:e=>it.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>it.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,o,n,i){const r=s?s.previousSibling:t.lastChild;if(n&&(n===i||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{jo.innerHTML=Er(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=jo.content;if(o==="svg"||o==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ht="transition",Yt="animation",$t=Symbol("_vtc"),Ar={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lc=Ce({},el,Ar),_t=(e,t=[])=>{j(e)?e.forEach(s=>s(...t)):e&&e(...t)},Bo=e=>e?j(e)?e.some(t=>t.length>1):e.length>1:!1;function cc(e){const t={};for(const L in e)L in Ar||(t[L]=e[L]);if(e.css===!1)return t;const{name:s="v",type:o,duration:n,enterFromClass:i=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:c=i,appearActiveClass:d=r,appearToClass:u=l,leaveFromClass:h=`${s}-leave-from`,leaveActiveClass:y=`${s}-leave-active`,leaveToClass:w=`${s}-leave-to`}=e,C=dc(n),v=C&&C[0],D=C&&C[1],{onBeforeEnter:U,onEnter:B,onEnterCancelled:$,onLeave:O,onLeaveCancelled:H,onBeforeAppear:ee=U,onAppear:Y=B,onAppearCancelled:me=$}=t,z=(L,ie,ye,je)=>{L._enterCancelled=je,pt(L,ie?u:l),pt(L,ie?d:r),ye&&ye()},te=(L,ie)=>{L._isLeaving=!1,pt(L,h),pt(L,w),pt(L,y),ie&&ie()},ae=L=>(ie,ye)=>{const je=L?Y:B,ge=()=>z(ie,L,ye);_t(je,[ie,ge]),$o(()=>{pt(ie,L?c:i),Ze(ie,L?u:l),Bo(je)||Vo(ie,o,v,ge)})};return Ce(t,{onBeforeEnter(L){_t(U,[L]),Ze(L,i),Ze(L,r)},onBeforeAppear(L){_t(ee,[L]),Ze(L,c),Ze(L,d)},onEnter:ae(!1),onAppear:ae(!0),onLeave(L,ie){L._isLeaving=!0;const ye=()=>te(L,ie);Ze(L,h),L._enterCancelled?(Ze(L,y),$n()):($n(),Ze(L,y)),$o(()=>{L._isLeaving&&(pt(L,h),Ze(L,w),Bo(O)||Vo(L,o,D,ye))}),_t(O,[L,ye])},onEnterCancelled(L){z(L,!1,void 0,!0),_t($,[L])},onAppearCancelled(L){z(L,!0,void 0,!0),_t(me,[L])},onLeaveCancelled(L){te(L),_t(H,[L])}})}function dc(e){if(e==null)return null;if(fe(e))return[En(e.enter),En(e.leave)];{const t=En(e);return[t,t]}}function En(e){return fa(e)}function Ze(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[$t]||(e[$t]=new Set)).add(t)}function pt(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const s=e[$t];s&&(s.delete(t),s.size||(e[$t]=void 0))}function $o(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let uc=0;function Vo(e,t,s,o){const n=e._endId=++uc,i=()=>{n===e._endId&&o()};if(s!=null)return setTimeout(i,s);const{type:r,timeout:l,propCount:c}=Dr(e,t);if(!r)return o();const d=r+"end";let u=0;const h=()=>{e.removeEventListener(d,y),i()},y=w=>{w.target===e&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},l+1),e.addEventListener(d,y)}function Dr(e,t){const s=window.getComputedStyle(e),o=C=>(s[C]||"").split(", "),n=o(`${ht}Delay`),i=o(`${ht}Duration`),r=Ho(n,i),l=o(`${Yt}Delay`),c=o(`${Yt}Duration`),d=Ho(l,c);let u=null,h=0,y=0;t===ht?r>0&&(u=ht,h=r,y=i.length):t===Yt?d>0&&(u=Yt,h=d,y=c.length):(h=Math.max(r,d),u=h>0?r>d?ht:Yt:null,y=u?u===ht?i.length:c.length:0);const w=u===ht&&/\b(transform|all)(,|$)/.test(o(`${ht}Property`).toString());return{type:u,timeout:h,propCount:y,hasTransform:w}}function Ho(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,o)=>zo(s)+zo(e[o])))}function zo(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function $n(){return document.body.offsetHeight}function fc(e,t,s){const o=e[$t];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const zs=Symbol("_vod"),kr=Symbol("_vsh"),hc={beforeMount(e,{value:t},{transition:s}){e[zs]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Qt(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:o}){!t!=!s&&(o?t?(o.beforeEnter(e),Qt(e,!0),o.enter(e)):o.leave(e,()=>{Qt(e,!1)}):Qt(e,t))},beforeUnmount(e,{value:t}){Qt(e,t)}};function Qt(e,t){e.style.display=t?e[zs]:"none",e[kr]=!t}const pc=Symbol(""),mc=/(^|;)\s*display\s*:/;function gc(e,t,s){const o=e.style,n=be(s);let i=!1;if(s&&!n){if(t)if(be(t))for(const r of t.split(";")){const l=r.slice(0,r.indexOf(":")).trim();s[l]==null&&Ms(o,l,"")}else for(const r in t)s[r]==null&&Ms(o,r,"");for(const r in s)r==="display"&&(i=!0),Ms(o,r,s[r])}else if(n){if(t!==s){const r=o[pc];r&&(s+=";"+r),o.cssText=s,i=mc.test(s)}}else t&&e.removeAttribute("style");zs in e&&(e[zs]=i?o.display:"",e[kr]&&(o.display="none"))}const Jo=/\s*!important$/;function Ms(e,t,s){if(j(s))s.forEach(o=>Ms(e,t,o));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const o=bc(e,t);Jo.test(s)?e.setProperty(yt(o),s.replace(Jo,""),"important"):e[o]=s}}const Ko=["Webkit","Moz","ms"],An={};function bc(e,t){const s=An[t];if(s)return s;let o=$e(t);if(o!=="filter"&&o in e)return An[t]=o;o=Qs(o);for(let n=0;n<Ko.length;n++){const i=Ko[n]+o;if(i in e)return An[t]=i}return t}const Wo="http://www.w3.org/1999/xlink";function Go(e,t,s,o,n,i=ya(t)){o&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Wo,t.slice(6,t.length)):e.setAttributeNS(Wo,t,s):s==null||i&&!Ci(s)?e.removeAttribute(t):e.setAttribute(t,i?"":nt(s)?String(s):s)}function Xo(e,t,s,o,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Er(s):s);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=Ci(s):s==null&&l==="string"?(s="",r=!0):l==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(n||t)}function bt(e,t,s,o){e.addEventListener(t,s,o)}function yc(e,t,s,o){e.removeEventListener(t,s,o)}const Yo=Symbol("_vei");function vc(e,t,s,o,n=null){const i=e[Yo]||(e[Yo]={}),r=i[t];if(o&&r)r.value=o;else{const[l,c]=Sc(t);if(o){const d=i[t]=_c(o,n);bt(e,l,d,c)}else r&&(yc(e,l,r,c),i[t]=void 0)}}const Qo=/(?:Once|Passive|Capture)$/;function Sc(e){let t;if(Qo.test(e)){t={};let o;for(;o=e.match(Qo);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):yt(e.slice(2)),t]}let Dn=0;const Cc=Promise.resolve(),wc=()=>Dn||(Cc.then(()=>Dn=0),Dn=Date.now());function _c(e,t){const s=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=s.attached)return;ze(Ec(o,s.value),t,5,[o])};return s.value=e,s.attached=wc(),s}function Ec(e,t){if(j(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(o=>n=>!n._stopped&&o&&o(n))}else return t}const Zo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ac=(e,t,s,o,n,i)=>{const r=n==="svg";t==="class"?fc(e,o,r):t==="style"?gc(e,s,o):Xs(t)?Qn(t)||vc(e,t,s,o,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Dc(e,t,o,r))?(Xo(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Go(e,t,o,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!be(o))?Xo(e,$e(t),o,i,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Go(e,t,o,r))};function Dc(e,t,s,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Zo(t)&&K(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Zo(t)&&be(s)?!1:t in e}const Tr=new WeakMap,Pr=new WeakMap,Js=Symbol("_moveCb"),ei=Symbol("_enterCb"),kc=e=>(delete e.props.mode,e),Tc=kc({name:"TransitionGroup",props:Ce({},lc,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=Xl(),o=Za();let n,i;return Zi(()=>{if(!n.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!Rc(n[0].el,s.vnode.el,r)){n=[];return}n.forEach(xc),n.forEach(Nc);const l=n.filter(Fc);$n(),l.forEach(c=>{const d=c.el,u=d.style;Ze(d,r),u.transform=u.webkitTransform=u.transitionDuration="";const h=d[Js]=y=>{y&&y.target!==d||(!y||/transform$/.test(y.propertyName))&&(d.removeEventListener("transitionend",h),d[Js]=null,pt(d,r))};d.addEventListener("transitionend",h)}),n=[]}),()=>{const r=oe(e),l=cc(r);let c=r.tag||W;if(n=[],i)for(let d=0;d<i.length;d++){const u=i[d];u.el&&u.el instanceof Element&&(n.push(u),hs(u,On(u,l,o,s)),Tr.set(u,u.el.getBoundingClientRect()))}i=t.default?Wi(t.default()):[];for(let d=0;d<i.length;d++){const u=i[d];u.key!=null&&hs(u,On(u,l,o,s))}return Se(c,null,i)}}}),Pc=Tc;function xc(e){const t=e.el;t[Js]&&t[Js](),t[ei]&&t[ei]()}function Nc(e){Pr.set(e,e.el.getBoundingClientRect())}function Fc(e){const t=Tr.get(e),s=Pr.get(e),o=t.left-s.left,n=t.top-s.top;if(o||n){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${o}px,${n}px)`,i.transitionDuration="0s",e}}function Rc(e,t,s){const o=e.cloneNode(),n=e[$t];n&&n.forEach(l=>{l.split(/\s+/).forEach(c=>c&&o.classList.remove(c))}),s.split(/\s+/).forEach(l=>l&&o.classList.add(l)),o.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(o);const{hasTransform:r}=Dr(o);return i.removeChild(o),r}const Vt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return j(t)?s=>xs(t,s):t};function Mc(e){e.target.composing=!0}function ti(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const lt=Symbol("_assign"),ue={created(e,{modifiers:{lazy:t,trim:s,number:o}},n){e[lt]=Vt(n);const i=o||n.props&&n.props.type==="number";bt(e,t?"change":"input",r=>{if(r.target.composing)return;let l=e.value;s&&(l=l.trim()),i&&(l=Is(l)),e[lt](l)}),s&&bt(e,"change",()=>{e.value=e.value.trim()}),t||(bt(e,"compositionstart",Mc),bt(e,"compositionend",ti),bt(e,"change",ti))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:o,trim:n,number:i}},r){if(e[lt]=Vt(r),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Is(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(o&&t===s||n&&e.value.trim()===c)||(e.value=c))}},po={deep:!0,created(e,t,s){e[lt]=Vt(s),bt(e,"change",()=>{const o=e._modelValue,n=gs(e),i=e.checked,r=e[lt];if(j(o)){const l=to(o,n),c=l!==-1;if(i&&!c)r(o.concat(n));else if(!i&&c){const d=[...o];d.splice(l,1),r(d)}}else if(Ht(o)){const l=new Set(o);i?l.add(n):l.delete(n),r(l)}else r(xr(e,i))})},mounted:si,beforeUpdate(e,t,s){e[lt]=Vt(s),si(e,t,s)}};function si(e,{value:t,oldValue:s},o){e._modelValue=t;let n;if(j(t))n=to(t,o.props.value)>-1;else if(Ht(t))n=t.has(o.props.value);else{if(t===s)return;n=vs(t,xr(e,!0))}e.checked!==n&&(e.checked=n)}const Ks={deep:!0,created(e,{value:t,modifiers:{number:s}},o){const n=Ht(t);bt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?Is(gs(r)):gs(r));e[lt](e.multiple?n?new Set(i):i:i[0]),e._assigning=!0,$i(()=>{e._assigning=!1})}),e[lt]=Vt(o)},mounted(e,{value:t}){ni(e,t)},beforeUpdate(e,t,s){e[lt]=Vt(s)},updated(e,{value:t}){e._assigning||ni(e,t)}};function ni(e,t){const s=e.multiple,o=j(t);if(!(s&&!o&&!Ht(t))){for(let n=0,i=e.options.length;n<i;n++){const r=e.options[n],l=gs(r);if(s)if(o){const c=typeof l;c==="string"||c==="number"?r.selected=t.some(d=>String(d)===String(l)):r.selected=to(t,l)>-1}else r.selected=t.has(l);else if(vs(gs(r),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function gs(e){return"_value"in e?e._value:e.value}function xr(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Oc=["ctrl","shift","alt","meta"],Lc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Oc.some(s=>e[`${s}Key`]&&!t.includes(s))},ts=(e,t)=>{const s=e._withMods||(e._withMods={}),o=t.join(".");return s[o]||(s[o]=(n,...i)=>{for(let r=0;r<t.length;r++){const l=Lc[t[r]];if(l&&l(n,t))return}return e(n,...i)})},Uc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ic=(e,t)=>{const s=e._withKeys||(e._withKeys={}),o=t.join(".");return s[o]||(s[o]=n=>{if(!("key"in n))return;const i=yt(n.key);if(t.some(r=>r===i||Uc[r]===i))return e(n)})},qc=Ce({patchProp:Ac},ac);let oi;function jc(){return oi||(oi=Pl(qc))}const Bc=(...e)=>{const t=jc().createApp(...e),{mount:s}=t;return t.mount=o=>{const n=Vc(o);if(!n)return;const i=t._component;!K(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=s(n,!1,$c(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},t};function $c(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Vc(e){return be(e)?document.querySelector(e):e}const Hc="/assets/logo-DeMe0Qxk.png",qe=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s},zc={name:"SidebarComponent",props:{user:{type:Object,default:()=>({})},activeMenu:{type:String,default:"dashboard"}},data(){return{expanded:!0,menuItems:[{id:"dashboard",icon:"fas fa-home",label:"Principal",submenu:[]},{id:"agendamento",icon:"fas fa-calendar-alt",label:"Agendamentos",submenu:[]},{id:"configuracoes",icon:"fas fa-cog",label:"Configurações",submenu:[]}]}},computed:{sidebarClasses(){return{sidebar:!0,"sidebar-expanded":this.expanded}},logoUrl(){return Hc},userRole(){if(!this.user)return"Usuário";switch(this.user.level_access){case 0:return"Desenvolvedor";case 1:return"Usuário";case 2:return"Administrador";case 3:return"Gerente";default:return"Usuário"}}},methods:{handleMenuClick(e){this.$emit("menu-click",e)},handleLogout(){this.$emit("logout")},isMenuActive(e){return this.activeMenu===e}}},Jc={class:"sidebar-logo expanded"},Kc={class:"logo-shine logo-box"},Wc=["src"],Gc={class:"sidebar-menu"},Xc=["onClick"],Yc={class:"icon-container"},Qc={class:"menu-label"},Zc={class:"user-info"},ed={class:"user-details"},td={class:"user-name"},sd={class:"user-role"};function nd(e,t,s,o,n,i){return m(),g("aside",{class:Q(i.sidebarClasses)},[a("div",Jc,[a("div",Kc,[a("img",{src:i.logoUrl,alt:"Logo",class:"sidebar-logo-img"},null,8,Wc)]),t[1]||(t[1]=a("div",{class:"logo-texts"},[a("div",{class:"logo-title"},"Recebimento")],-1))]),a("nav",Gc,[(m(!0),g(W,null,pe(n.menuItems,r=>(m(),g("div",{key:r.id,class:Q(["menu-item",{active:i.isMenuActive(r.id)}])},[a("div",{onClick:l=>i.handleMenuClick(r.id),class:"menu-main"},[a("div",Yc,[a("i",{class:Q(r.icon)},null,2)]),a("span",Qc,_(r.label),1)],8,Xc)],2))),128))]),a("div",Zc,[t[3]||(t[3]=a("div",{class:"user-avatar"},[a("i",{class:"fas fa-user"})],-1)),a("div",ed,[a("div",td,_(s.user.name||s.user.user||"Usuário"),1),a("div",sd,_(i.userRole),1)]),a("button",{class:"logout-btn",onClick:t[0]||(t[0]=(...r)=>i.handleLogout&&i.handleLogout(...r)),title:"Sair"},t[2]||(t[2]=[a("i",{class:"fas fa-sign-out-alt"},null,-1)]))])],2)}const od=qe(zc,[["render",nd]]),id={name:"StatsCards",props:{stats:{type:Object,default:()=>({pendingDeliveries:0,processing:0,completedToday:0,divergences:0})},loading:{type:Boolean,default:!1}},computed:{statsData(){return[{id:"solicitacoes",title:"Solicitações",value:this.stats.solicitacoes,icon:"fa-solid fa-hourglass-half",type:"pending"},{id:"agendamentos",title:"Agendamentos",value:this.stats.agendamentos,icon:"fa-solid fa-truck",type:"processing"},{id:"conferencia",title:"Conferência",value:this.stats.conferencia,icon:"fa-solid fa-magnifying-glass",type:"completed"},{id:"tratativa",title:"Tratativa",value:this.stats.tratativa,icon:"fas fa-exclamation-triangle",type:"alert"}]}},methods:{formatNumber(e){return Number(e).toLocaleString("pt-BR")}}},rd={class:"stats-grid"},ad={class:"stat-icon"},ld={key:1,class:"fas fa-spinner fa-spin"},cd={class:"stat-details"};function dd(e,t,s,o,n,i){return m(),g("div",rd,[(m(!0),g(W,null,pe(i.statsData,r=>(m(),g("div",{key:r.id,class:Q(["stat-card",r.type])},[a("div",ad,[s.loading?(m(),g("i",ld)):(m(),g("i",{key:0,class:Q(r.icon)},null,2))]),a("div",cd,[a("h3",null,_(s.loading?"...":i.formatNumber(r.value)),1),a("p",null,_(r.title),1)])],2))),128))])}const ud=qe(id,[["render",dd]]),fd={name:"RecentActivities",props:{activities:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},computed:{statusConfig(){return{success:{class:"success",label:"Conferido"},warning:{class:"warning",label:"Pendente"},danger:{class:"danger",label:"Revisar"}}},activityIconConfig(){return{received:"received",pending:"pending",divergence:"divergence",completed:"completed"}}},methods:{getStatusBadge(e){return this.statusConfig[e]||{class:"secondary",label:"Desconhecido"}},getActivityIcon(e){return{received:"fas fa-arrow-down",pending:"fas fa-clock",divergence:"fas fa-exclamation-circle",completed:"fas fa-check"}[e]||"fas fa-info"},handleViewAll(){console.log("Ver todas as atividades")}}},hd={class:"recent-activities"},pd={class:"section-header"},md={class:"activities-list"},gd={key:0,class:"activity-item"},bd={key:1,class:"activity-item"},yd={class:"activity-details"},vd={class:"activity-time"},Sd={class:"activity-status"};function Cd(e,t,s,o,n,i){return m(),g("div",hd,[a("div",pd,[t[1]||(t[1]=a("h2",null,"Atividades Recentes",-1)),a("button",{class:"btn view-all-btn",onClick:t[0]||(t[0]=(...r)=>i.handleViewAll&&i.handleViewAll(...r))},"Ver Todas")]),a("div",md,[s.loading?(m(),g("div",gd,t[2]||(t[2]=[a("div",{class:"activity-icon"},[a("i",{class:"fas fa-spinner fa-spin"})],-1),a("div",{class:"activity-details"},[a("h4",null,"Carregando atividades..."),a("p",null,"Por favor, aguarde")],-1)]))):s.activities.length===0?(m(),g("div",bd,t[3]||(t[3]=[a("div",{class:"activity-icon"},[a("i",{class:"fas fa-info-circle"})],-1),a("div",{class:"activity-details"},[a("h4",null,"Nenhuma atividade recente"),a("p",null,"Não há atividades para exibir no momento")],-1)]))):(m(!0),g(W,{key:2},pe(s.activities,r=>(m(),g("div",{key:r.id,class:"activity-item"},[a("div",{class:Q(["activity-icon",i.activityIconConfig[r.type]])},[a("i",{class:Q(i.getActivityIcon(r.type))},null,2)],2),a("div",yd,[a("h4",null,_(r.title),1),a("p",null,_(r.description),1),a("span",vd,_(r.time),1)]),a("div",Sd,[a("span",{class:Q(["status-badge",i.getStatusBadge(r.status).class])},_(i.getStatusBadge(r.status).label),3)])]))),128))])])}const wd=qe(fd,[["render",Cd]]),_d={name:"PendingDeliveries",props:{deliveries:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},computed:{statusConfig(){return{scheduled:{class:"warning",label:"Agendado"},on_way:{class:"info",label:"A Caminho"},processing:{class:"secondary",label:"Processando"},completed:{class:"success",label:"Concluído"}}}},methods:{getStatusBadge(e){return this.statusConfig[e]||{class:"secondary",label:"Desconhecido"}},handleAction(e,t){this.$emit("action",e,t)},getActionButtons(){return[{action:"view",icon:"fas fa-info-circle",title:"Mais informações",class:"btn-info"}]}}},Ed={class:"pending-deliveries"},Ad={class:"table-container"},Dd={class:"data-table"},kd={key:0},Td={key:1},Pd=["onClick"];function xd(e,t,s,o,n,i){return m(),g("div",Ed,[t[4]||(t[4]=a("div",{class:"section-header"},[a("h2",null,"Entregas Agendadas")],-1)),a("div",Ad,[a("table",Dd,[t[3]||(t[3]=a("thead",null,[a("tr",null,[a("th",null,"Nº NF-e"),a("th",null,"Fornecedor"),a("th",null,"Volumes"),a("th",null,"Data Agendada"),a("th",null,"Estoque"),a("th",null,"Status"),a("th",null,"Mais informações")])],-1)),a("tbody",null,[s.loading?(m(),g("tr",kd,t[0]||(t[0]=[a("td",{colspan:"7",style:{"text-align":"center",padding:"20px"}},[a("i",{class:"fas fa-spinner fa-spin"}),N(" Carregando entregas agendadas... ")],-1)]))):s.deliveries.length===0?(m(),g("tr",Td,t[1]||(t[1]=[a("td",{colspan:"7",style:{"text-align":"center",padding:"20px"}},[a("i",{class:"fas fa-inbox"}),N(" Nenhuma entrega agendada ")],-1)]))):(m(!0),g(W,{key:2},pe(s.deliveries,r=>(m(),g("tr",{key:r.id},[a("td",null,_(r.nfe||r.order||"N/A"),1),a("td",null,_(r.supplier),1),a("td",null,_(r.volumes||r.quantity||"N/A"),1),a("td",null,_(r.scheduledDate||r.scheduledTime||"N/A"),1),a("td",null,_(r.warehouse||"Principal"),1),a("td",null,[a("span",{class:Q(["status-badge",i.getStatusBadge(r.status).class])},_(i.getStatusBadge(r.status).label),3)]),a("td",null,[a("button",{class:"btn btn-icon btn-info",title:"Mais informações",onClick:l=>i.handleAction("view",r.id)},t[2]||(t[2]=[a("i",{class:"fas fa-info-circle"},null,-1)]),8,Pd)])]))),128))])])])])}const Nd=qe(_d,[["render",xd]]),Fd={name:"NotificationsComponent",props:{notifications:{type:Array,default:()=>[]}},computed:{typeConfig(){return{success:{icon:"fas fa-check-circle",class:"notification-success"},error:{icon:"fas fa-exclamation-circle",class:"notification-error"},warning:{icon:"fas fa-exclamation-triangle",class:"notification-warning"},info:{icon:"fas fa-info-circle",class:"notification-info"}}}},methods:{getNotificationConfig(e){return this.typeConfig[e]||this.typeConfig.info},handleClose(e){this.$emit("close",e)},formatTime(e){return new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}}},Rd={class:"notifications-container"},Md={class:"notification-icon"},Od={class:"notification-content"},Ld={class:"notification-message"},Ud={class:"notification-time"},Id=["onClick"];function qd(e,t,s,o,n,i){return m(),g("div",Rd,[Se(Pc,{name:"notification",tag:"div"},{default:Ki(()=>[(m(!0),g(W,null,pe(s.notifications,r=>(m(),g("div",{key:r.id,class:Q(["notification",i.getNotificationConfig(r.type).class])},[a("div",Md,[a("i",{class:Q(i.getNotificationConfig(r.type).icon)},null,2)]),a("div",Od,[a("div",Ld,_(r.message),1),a("div",Ud,_(i.formatTime(r.timestamp)),1)]),a("button",{class:"notification-close",onClick:l=>i.handleClose(r.id)},t[0]||(t[0]=[a("i",{class:"fas fa-times"},null,-1)]),8,Id)],2))),128))]),_:1})])}const jd=qe(Fd,[["render",qd]]),Bd={name:"NfeInfoModal",props:{nfeData:{type:Object,default:()=>({})},showModal:{type:Boolean,default:!1},user:{type:Object,default:()=>({})}},data(){return{activeTab:"general",expandedSections:{},copySuccess:!1,selectedNewStatus:""}},computed:{formattedNfeData(){return this.nfeData?{general:{title:"Informações Gerais",icon:"fas fa-file-alt",data:{"Número da NF-e":this.nfeData.nfe_number||this.nfeData.number,"Chave da NF-e":this.nfeData.nfe_key,Status:this.nfeData.status,"Data de Entrega":this.formatDateOnly(this.nfeData.date),Fornecedor:this.getSupplierInfo(),Destinatário:this.getClientInfo(),Estoque:this.getStockInfo(),Volumes:this.getVolumeCount(),"Qtd. Produtos":this.nfeData.qt_prod,"Valor Total":this.getTotalValue()}},products:{title:"Produtos",icon:"fas fa-boxes",data:this.getProducts()},history:{title:"Histórico",icon:"fas fa-history",data:this.getHistoryEntries()}}:{}},statusBadgeClass(){return{Solicitado:"warning",Agendado:"info",Conferência:"success",Recebido:"success",Tratativa:"danger",Estoque:"success",Recusar:"danger",Recusado:"dark",Cancelado:"secondary"}[this.nfeData.status]||"secondary"},canEditSchedule(){return console.log("canEditSchedule user:",this.user),this.user&&this.user.level_access!==void 0&&this.user.level_access!==1},canMarkAsTratativa(){var s,o;if(console.log("canMarkAsTratativa user:",this.user,"status:",(s=this.nfeData)==null?void 0:s.status),!this.user||this.user.level_access===void 0||this.user.level_access===1)return!1;const e=(o=this.nfeData)==null?void 0:o.status;return e&&!["Estoque","Recusado","Cancelado","Tratativa"].includes(e)},canChangeStatusFromTratativa(){var e,t;return console.log("canChangeStatusFromTratativa user:",this.user,"status:",(e=this.nfeData)==null?void 0:e.status),!this.user||this.user.level_access===void 0||this.user.level_access===1?!1:((t=this.nfeData)==null?void 0:t.status)==="Tratativa"},availableStatusOptions(){return[{value:"Solicitado",label:"Solicitado"},{value:"Contestado",label:"Contestado"},{value:"Agendado",label:"Agendado"},{value:"Conferência",label:"Em conferência"},{value:"Recebido",label:"Em conferência"},{value:"Estoque",label:"Em estoque"},{value:"Cancelar",label:"Cancelar"},{value:"Cancelado",label:"Cancelado"},{value:"Recusado",label:"Recusado"}]}},methods:{closeModal(){this.$emit("close")},openEditModal(){console.log("🔧 Abrindo modal de edição para:",this.nfeData),this.$emit("edit",this.nfeData)},markAsTratativa(){console.log("⚠️ Marcando como tratativa:",this.nfeData),this.$emit("mark-tratativa",this.nfeData)},changeStatusFromTratativa(){this.selectedNewStatus&&(console.log("🔄 Alterando status de tratativa para:",this.selectedNewStatus,"agendamento:",this.nfeData),this.$emit("change-status",{scheduleData:this.nfeData,newStatus:this.selectedNewStatus}),this.selectedNewStatus="")},setActiveTab(e){this.activeTab=e},toggleSection(e){this.expandedSections[e]=!this.expandedSections[e]},formatDate(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{return new Date(e).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}},formatDateOnly(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{return new Date(e).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return e}},formatCurrency(e){return e?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):"R$ 0,00"},getVolumeCount(){return this.nfeData.info&&this.nfeData.info.case_count?this.nfeData.info.case_count:this.nfeData.case_count?this.nfeData.case_count:this.nfeData.volumes?this.nfeData.volumes:"-"},getTotalValue(){return this.nfeData.total_value!==void 0&&this.nfeData.total_value!==null&&this.nfeData.total_value>0?this.formatCurrency(this.nfeData.total_value):"-"},getProducts(){return this.nfeData.info&&this.nfeData.info.products&&Array.isArray(this.nfeData.info.products)?this.nfeData.info.products:this.nfeData.products&&Array.isArray(this.nfeData.products)?this.nfeData.products:[]},getSupplierInfo(){if(this.nfeData.info){const e=this.nfeData.info.supplier_name||"",t=this.nfeData.info.supplier_cnpj||"";if(e&&t)return`${e} - CNPJ: ${t}`;if(e)return e;if(t)return`CNPJ: ${t}`}return this.nfeData.supplier_name||this.nfeData.supplier||"-"},getClientInfo(){if(this.nfeData.info){const e=this.nfeData.info.client_name||"",t=this.nfeData.info.client_cnpj||"";if(e&&t)return`${e} - CNPJ: ${t}`;if(e)return e;if(t)return`CNPJ: ${t}`}return this.nfeData.client_name||this.nfeData.client||"-"},getStockInfo(){if(this.nfeData.client_info){const t=this.nfeData.client_info.name,s=this.nfeData.client_info.number,o=this.nfeData.client_cnpj||this.nfeData.client;let n="";return t&&t!==`Cliente ${o}`&&(n+=t),s&&s!==o&&(n&&(n+=" "),n+=`(Nº ${s})`),o&&(n&&(n+=" - "),n+=`CNPJ: ${o}`),n||"-"}const e=this.nfeData.client_cnpj||this.nfeData.client;return e?`CNPJ: ${e}`:"-"},getLastUpdateFromHistoric(){if(this.nfeData.historic&&typeof this.nfeData.historic=="object"){let e=null,t=null;if(Object.values(this.nfeData.historic).forEach(s=>{if(s&&s.timestamp){const o=new Date(s.timestamp);(!e||o>e)&&(e=o,t=s)}}),t)return{timestamp:e.toISOString(),user:t.user||"Sistema"}}return{timestamp:this.nfeData.updated_at||this.nfeData.created_at,user:"Sistema"}},async copyToClipboard(e){try{await navigator.clipboard.writeText(e),this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},2e3)}catch(t){console.error("Erro ao copiar para área de transferência:",t)}},copySection(e){const t=JSON.stringify(e,null,2);this.copyToClipboard(t)},copyFullData(){const e=JSON.stringify(this.nfeData,null,2);this.copyToClipboard(e)},formatJsonData(e,t=0){if(typeof e!="object"||e===null)return e;const s="  ".repeat(t),o="  ".repeat(t+1);if(Array.isArray(e)){if(e.length===0)return"[]";let n=`[
`;return e.forEach((i,r)=>{n+=o+this.formatJsonData(i,t+1),r<e.length-1&&(n+=","),n+=`
`}),n+=s+"]",n}else{const n=Object.keys(e);if(n.length===0)return"{}";let i=`{
`;return n.forEach((r,l)=>{i+=o+`"${r}": ${this.formatJsonData(e[r],t+1)}`,l<n.length-1&&(i+=","),i+=`
`}),i+=s+"}",i}},getHistoryEntries(){return!this.nfeData.historic||typeof this.nfeData.historic!="object"?[]:Object.entries(this.nfeData.historic).map(([t,s])=>({id:t,timestamp:this.formatDate(s.timestamp),user:s.user||"Sistema",action:this.getFormattedAction(s),changes:s.changes||[],comment:s.comment||"",rawEntry:s})).sort((t,s)=>{const o=new Date(t.rawEntry.timestamp||t.timestamp);return new Date(s.rawEntry.timestamp||s.timestamp)-o})},getObservations(){return this.nfeData.observations||""},getFormattedAction(e){if(e.changes&&e.changes.length>0){const t=e.changes.length,s=e.changes[0].split(":")[0];return t===1?`${s} alterado`:`${t} campos alterados`}return e.action||"Alteração realizada"},getHistoryIcon(e){if(!e)return"fas fa-question-circle";const t=e.toLowerCase();return t.includes("criado")||t.includes("created")?"fas fa-plus-circle text-success":t.includes("status")?"fas fa-exchange-alt text-info":t.includes("data")||t.includes("date")?"fas fa-calendar-alt text-warning":t.includes("editado")||t.includes("edit")?"fas fa-edit text-primary":t.includes("cancelado")||t.includes("cancel")?"fas fa-times-circle text-danger":t.includes("conferência")||t.includes("conferencia")||t.includes("received")?"fas fa-check-circle text-success":t.includes("contestado")||t.includes("contest")?"fas fa-exclamation-triangle text-warning":"fas fa-history text-secondary"},handleModalClick(e){e.target.classList.contains("modal-overlay")&&this.closeModal()}},mounted(){console.log("🔍 NfeInfoModal montado:",{showModal:this.showModal,nfeData:this.nfeData}),this.$nextTick(()=>{const e=this.$refs.modal;e&&e.focus()})},watch:{showModal(e){console.log("🔍 showModal changed:",e)},nfeData(e){console.log("🔍 nfeData changed:",e)}}},$d={class:"modal-content nfe-info-modal large",ref:"modal",tabindex:"-1"},Vd={class:"modal-header"},Hd={class:"header-buttons"},zd={key:0,class:"status-change-dropdown me-2"},Jd=["value"],Kd={class:"modal-tabs"},Wd=["onClick"],Gd={class:"modal-body"},Xd={key:0,class:"tab-content"},Yd={class:"info-grid"},Qd={class:"info-item observations-item"},Zd={key:0,class:"observations-text"},eu={key:1,class:"no-observations"},tu={key:1,class:"tab-content"},su={key:0,class:"products-table-container"},nu={class:"products-table"},ou={key:1,class:"empty-state"},iu={key:2,class:"tab-content history-tab-content"},ru={key:0,class:"history-container"},au={class:"history-timeline"},lu={class:"history-icon"},cu={class:"history-content"},du={class:"history-header"},uu={class:"history-action"},fu={class:"history-timestamp"},hu={class:"history-user"},pu={key:0,class:"history-changes"},mu={class:"changes-grid"},gu={class:"change-field"},bu={class:"change-values"},yu={key:1,class:"history-comment"},vu={key:1,class:"empty-state"},Su={class:"modal-footer",style:{"justify-content":"flex-end"}},Cu={class:"footer-info",style:{"margin-left":"auto"}},wu={class:"text-muted"},_u={key:0,class:"copy-toast"};function Eu(e,t,s,o,n,i){return s.showModal?(m(),g("div",{key:0,class:"modal-overlay",onClick:t[5]||(t[5]=(...r)=>i.handleModalClick&&i.handleModalClick(...r))},[a("div",$d,[a("div",Vd,[t[10]||(t[10]=a("h3",null,[a("i",{class:"fas fa-file-invoice"}),N(" Informações da NF-e ")],-1)),a("div",Hd,[i.canChangeStatusFromTratativa?(m(),g("div",zd,[X(a("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>n.selectedNewStatus=r),onChange:t[1]||(t[1]=(...r)=>i.changeStatusFromTratativa&&i.changeStatusFromTratativa(...r)),class:"form-select form-select-sm",title:"Alterar status do agendamento"},[t[6]||(t[6]=a("option",{value:""},"Alterar Status",-1)),(m(!0),g(W,null,pe(i.availableStatusOptions,r=>(m(),g("option",{key:r.value,value:r.value},_(r.label),9,Jd))),128))],544),[[Ks,n.selectedNewStatus]])])):M("",!0),i.canMarkAsTratativa?(m(),g("button",{key:1,class:"btn btn-sm btn-warning me-2",onClick:t[2]||(t[2]=(...r)=>i.markAsTratativa&&i.markAsTratativa(...r)),title:"Marcar como Em Tratativa"},t[7]||(t[7]=[a("i",{class:"fas fa-exclamation-triangle"},null,-1),N(" Em Tratativa ")]))):M("",!0),i.canEditSchedule?(m(),g("button",{key:2,class:"btn btn-sm btn-outline-primary me-2",onClick:t[3]||(t[3]=(...r)=>i.openEditModal&&i.openEditModal(...r)),title:"Editar Agendamento"},t[8]||(t[8]=[a("i",{class:"fas fa-cog"},null,-1),N(" Editar ")]))):M("",!0),a("button",{class:"btn-close",onClick:t[4]||(t[4]=(...r)=>i.closeModal&&i.closeModal(...r))},t[9]||(t[9]=[a("i",{class:"fas fa-times"},null,-1)]))])]),a("div",Kd,[(m(!0),g(W,null,pe(i.formattedNfeData,(r,l)=>(m(),g("button",{key:l,class:Q(["tab-button",{active:n.activeTab===l}]),onClick:c=>i.setActiveTab(l)},[a("i",{class:Q(r.icon)},null,2),N(" "+_(r.title),1)],10,Wd))),128))]),a("div",Gd,[n.activeTab==="general"?(m(),g("div",Xd,[a("div",Yd,[(m(!0),g(W,null,pe(i.formattedNfeData.general.data,(r,l)=>(m(),g("div",{key:l,class:"info-item"},[a("label",null,_(l)+":",1),a("span",{class:Q(l==="Chave da NF-e"?"nfe-key":"")},_(r||"-"),3)]))),128))]),a("div",Qd,[t[12]||(t[12]=a("label",null,[a("i",{class:"fas fa-sticky-note"}),N(" Observações do Agendamento: ")],-1)),i.getObservations()&&i.getObservations().trim()?(m(),g("span",Zd,_(i.getObservations()),1)):(m(),g("span",eu,t[11]||(t[11]=[a("i",{class:"fas fa-info-circle"},null,-1),a("em",null,"Não há observações para este agendamento",-1)])))])])):M("",!0),n.activeTab==="products"?(m(),g("div",tu,[i.formattedNfeData.products.data.length>0?(m(),g("div",su,[a("table",nu,[t[13]||(t[13]=a("thead",null,[a("tr",null,[a("th",null,"Cód. Fornecedor"),a("th",null,"Descrição Fornecedor"),a("th",null,"Cód. Venda"),a("th",null,"Descrição Venda"),a("th",null,"Quantidade"),a("th",null,"Valor Unit."),a("th",null,"Valor Total"),a("th",null,"Código EAN")])],-1)),a("tbody",null,[(m(!0),g(W,null,pe(i.formattedNfeData.products.data,r=>(m(),g("tr",{key:r.id},[a("td",null,_(r.supplier_code||r.code||"-"),1),a("td",null,_(r.supplier_description||r.description||"-"),1),a("td",null,_(r.client_code||r.code||"-"),1),a("td",null,_(r.client_description||r.description||"-"),1),a("td",null,_(r.quantity)+" "+_(r.unit),1),a("td",null,_(i.formatCurrency(r.unit_value)),1),a("td",null,_(i.formatCurrency(r.total_value)),1),a("td",null,_(r.ean_code||"-"),1)]))),128))])])])):(m(),g("div",ou,t[14]||(t[14]=[a("i",{class:"fas fa-box-open"},null,-1),a("p",null,"Nenhum produto encontrado",-1)])))])):M("",!0),n.activeTab==="history"?(m(),g("div",iu,[i.formattedNfeData.history&&i.formattedNfeData.history.data.length>0?(m(),g("div",ru,[a("div",au,[(m(!0),g(W,null,pe(i.formattedNfeData.history.data,r=>(m(),g("div",{key:r.id,class:"history-entry"},[a("div",lu,[a("i",{class:Q(i.getHistoryIcon(r.action))},null,2)]),a("div",cu,[a("div",du,[a("h5",uu,_(r.action),1),a("span",fu,_(r.timestamp),1)]),a("div",hu,[t[15]||(t[15]=a("i",{class:"fas fa-user"},null,-1)),t[16]||(t[16]=N(" Por: ")),a("strong",null,_(r.user),1)]),r.changes&&r.changes.length>0?(m(),g("div",pu,[a("div",mu,[(m(!0),g(W,null,pe(r.changes,l=>(m(),g("div",{key:l,class:"change-item"},[a("div",gu,_(l.split(":")[0].trim()),1),a("div",bu,_(l.split(":")[1].trim()),1)]))),128))])])):M("",!0),r.comment&&!r.comment.startsWith("Alterações realizadas:")?(m(),g("div",yu,[t[17]||(t[17]=a("i",{class:"fas fa-comment"},null,-1)),a("span",null,_(r.comment),1)])):M("",!0)])]))),128))])])):(m(),g("div",vu,t[18]||(t[18]=[a("i",{class:"fas fa-history"},null,-1),a("h3",null,"Nenhum histórico encontrado",-1),a("p",null,"Este agendamento ainda não possui histórico de alterações.",-1)])))])):M("",!0)]),a("div",Su,[a("div",Cu,[a("small",wu,[t[19]||(t[19]=a("i",{class:"fas fa-info-circle"},null,-1)),N(" Última atualização: "+_(i.formatDate(i.getLastUpdateFromHistoric().timestamp))+" por "+_(i.getLastUpdateFromHistoric().user),1)])])]),n.copySuccess?(m(),g("div",_u,t[20]||(t[20]=[a("i",{class:"fas fa-check"},null,-1),N(" Copiado para área de transferência! ")]))):M("",!0)],512)])):M("",!0)}const Nr=qe(Bd,[["render",Eu],["__scopeId","data-v-1a3f075f"]]),Au={name:"ScheduleEditModal",props:{scheduleData:{type:Object,default:()=>({})},showModal:{type:Boolean,default:!1}},data(){return{formData:{id:null,number:"",nfe_key:"",status:"",date:"",client:"",case_count:1,observations:""},clientCnpj:"",loading:!1,errors:[]}},computed:{isFormValid(){return this.formData.status&&this.formData.date&&this.clientCnpj&&this.formData.case_count>0}},watch:{scheduleData:{handler(e){e&&Object.keys(e).length>0&&this.populateForm(e)},immediate:!0},showModal(e){e&&this.scheduleData&&this.populateForm(this.scheduleData)}},methods:{closeModal(){this.$emit("close"),this.resetForm()},populateForm(e){var s;console.log("📝 Populando formulário com:",e),this.clientCnpj=e.client_cnpj||e.client||"";const t=((s=e.client_info)==null?void 0:s.name)||e.client_name||e.client||"";console.log("🔍 Populando formulário:"),console.log("   data.client:",e.client),console.log("   data.client_cnpj:",e.client_cnpj),console.log("   clientCnpj definido como:",this.clientCnpj),console.log("   clientDisplayName:",t),this.formData={id:e.id,number:e.number||e.nfe_number||"",nfe_key:e.nfe_key||"",status:e.status||"",date:this.formatDateForInput(e.date),client:t,case_count:e.case_count||e.volumes||1,observations:e.observations||""}},formatDateForInput(e){if(!e)return"";try{if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(typeof e=="string"&&e.includes("T"))return e.split("T")[0];const t=new Date(e);if(isNaN(t.getTime()))return"";const s=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${s}-${o}-${n}`}catch(t){return console.error("Erro ao formatar data:",t),""}},async updateSchedule(){var e,t,s,o;if(!this.isFormValid){this.addError("Por favor, preencha todos os campos obrigatórios.");return}this.loading=!0,this.errors=[];try{const n=window.apiClient,i=this.getCurrentUser(),l=(await n.request(`/schedules/${this.formData.id}`,{method:"GET"})).schedule;console.log("🔍 Dados atuais do agendamento:",l),console.log("🔍 Novos dados do formulário:",this.formData);const c=this.identifyChanges(l,this.formData);if(console.log("🔍 Alterações identificadas:",c),c.length===0){this.addError("Nenhuma alteração detectada para salvar.");return}const d=l.historic||{},u={};Object.keys(d).forEach(w=>{var v,D;const C=d[w];(C&&(C.changes||(v=C.action)!=null&&v.includes("campo(s) alterado(s)"))||w!=="updated"&&!((D=C.action)!=null&&D.includes("Agendamento atualizado")))&&(u[w]=C)}),console.log("🔍 Histórico filtrado (removendo entradas redundantes):",u);const h={number:this.formData.number,nfe_key:this.formData.nfe_key,status:this.formData.status,date:this.formData.date,client:this.clientCnpj,case_count:parseInt(this.formData.case_count),qt_prod:l.qt_prod||0,observations:this.formData.observations||null,historic:{...u,[`edit_${Date.now()}`]:{timestamp:new Date().toISOString(),user:i,action:`${c.length} campo(s) alterado(s)`,changes:c,comment:c.join(", ")}}};console.log("📤 Enviando dados de atualização:",h),console.log("🔍 Histórico sendo enviado:",h.historic);const y=await n.request(`/schedules/${this.formData.id}`,{method:"PUT",data:h});console.log("✅ Agendamento atualizado com sucesso:",y),console.log("🔍 Esta é a única requisição de atualização sendo feita"),setTimeout(()=>{console.log("🔍 Verificando se houve outras chamadas após 2 segundos...")},2e3),this.$emit("updated",y),this.closeModal(),this.$emit("notification",{type:"success",message:"Agendamento atualizado com sucesso!"})}catch(n){console.error("❌ Erro ao atualizar agendamento:",n);let i="Erro ao atualizar o agendamento.";(t=(e=n.response)==null?void 0:e.data)!=null&&t.message?i=n.response.data.message:(o=(s=n.response)==null?void 0:s.data)!=null&&o.error?i=n.response.data.error:n.message&&(i=n.message),this.addError(i)}finally{this.loading=!1}},resetForm(){this.formData={id:null,number:"",nfe_key:"",status:"",date:"",client:"",case_count:1,observations:""},this.clientCnpj="",this.errors=[]},addError(e){this.errors.includes(e)||this.errors.push(e)},removeError(e){this.errors.splice(e,1)},handleModalClick(e){e.target.classList.contains("modal-overlay")&&this.closeModal()},identifyChanges(e,t){const s=[];e.status!==t.status&&s.push(`Status: "${e.status}" → "${t.status}"`),this.formatDateForComparison(e.date)!==this.formatDateForComparison(t.date)&&s.push(`Data de entrega: "${this.formatDateForDisplay(e.date)}" → "${this.formatDateForDisplay(t.date)}"`);const o=e.client_cnpj||e.client,n=this.clientCnpj;console.log("🔍 Comparação de cliente:"),console.log("   currentSchedule.client:",e.client),console.log("   currentSchedule.client_cnpj:",e.client_cnpj),console.log("   Current CNPJ (usado para comparação):",o),console.log("   this.clientCnpj:",this.clientCnpj),console.log("   New CNPJ (usado para comparação):",n),console.log("   São diferentes?",o!==n),o!==n&&s.push(`Estoque: "${e.client}" → "${t.client}"`),parseInt(e.case_count)!==parseInt(t.case_count)&&s.push(`Volumes: ${e.case_count} → ${t.case_count}`);const i=e.observations||"",r=t.observations||"";return i!==r&&s.push(`Observações: "${i}" → "${r}"`),s},formatDateForComparison(e){if(!e)return"";try{return new Date(e).toISOString().slice(0,16)}catch{return e}},formatDateForDisplay(e){if(!e)return"";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{return new Date(e).toLocaleDateString("pt-BR")}catch{return e}},getCurrentUser(){try{const e=localStorage.getItem("user");return e&&JSON.parse(e).user||"Usuário desconhecido"}catch(e){return console.error("Erro ao obter usuário atual:",e),"Usuário desconhecido"}}},mounted(){console.log("ScheduleEditModal montado com scheduleData:",this.scheduleData),this.$nextTick(()=>{const e=this.$refs.modal;e&&e.focus()})}},Du={class:"modal-content large schedule-edit-modal",ref:"modal",tabindex:"-1",style:{background:"#fff",border:"2px solid red","z-index":"10000",display:"block !important"}},ku={class:"modal-header"},Tu={key:0,class:"error-container"},Pu=["onClick"],xu={class:"modal-body"},Nu={class:"form-section"},Fu={class:"form-row"},Ru={class:"form-group"},Mu={class:"form-group"},Ou={class:"form-section"},Lu={class:"form-row"},Uu={class:"form-group"},Iu={class:"form-group"},qu={class:"form-section"},ju={class:"form-row"},Bu={class:"form-group"},$u={class:"form-group"},Vu={class:"form-section"},Hu={class:"form-group"},zu={class:"modal-footer"},Ju=["disabled"],Ku=["disabled"],Wu={key:0,class:"fas fa-spinner fa-spin"},Gu={key:1,class:"fas fa-save"};function Xu(e,t,s,o,n,i){return m(),g("div",null,[t[28]||(t[28]=a("div",{style:{color:"blue","font-weight":"bold"}},"DEBUG: ScheduleEditModal está sendo renderizado",-1)),a("div",{class:"modal-overlay",onClick:t[11]||(t[11]=(...r)=>i.handleModalClick&&i.handleModalClick(...r)),style:{"z-index":"9999",display:"flex !important",background:"rgba(0,0,0,0.7)"}},[a("div",Du,[a("div",ku,[t[13]||(t[13]=a("h3",null,[a("i",{class:"fas fa-edit"}),N(" Editar Agendamento ")],-1)),a("button",{class:"btn-close",onClick:t[0]||(t[0]=(...r)=>i.closeModal&&i.closeModal(...r))},t[12]||(t[12]=[a("i",{class:"fas fa-times"},null,-1)]))]),n.errors.length>0?(m(),g("div",Tu,[(m(!0),g(W,null,pe(n.errors,(r,l)=>(m(),g("div",{key:l,class:"error-message"},[t[15]||(t[15]=a("i",{class:"fas fa-exclamation-triangle"},null,-1)),N(" "+_(r)+" ",1),a("button",{onClick:c=>i.removeError(l),class:"btn-close-error"},t[14]||(t[14]=[a("i",{class:"fas fa-times"},null,-1)]),8,Pu)]))),128))])):M("",!0),a("div",xu,[a("form",{onSubmit:t[8]||(t[8]=ts((...r)=>i.updateSchedule&&i.updateSchedule(...r),["prevent"])),class:"edit-form"},[a("div",Nu,[t[18]||(t[18]=a("h4",null,[a("i",{class:"fas fa-info-circle"}),N(" Informações Básicas")],-1)),a("div",Fu,[a("div",Ru,[t[16]||(t[16]=a("label",{for:"nfe_number"},"Número da NF-e",-1)),X(a("input",{id:"nfe_number","onUpdate:modelValue":t[1]||(t[1]=r=>n.formData.number=r),type:"text",class:"form-control",readonly:""},null,512),[[ue,n.formData.number]])]),a("div",Mu,[t[17]||(t[17]=a("label",{for:"nfe_key"},"Chave da NF-e",-1)),X(a("input",{id:"nfe_key","onUpdate:modelValue":t[2]||(t[2]=r=>n.formData.nfe_key=r),type:"text",class:"form-control",readonly:""},null,512),[[ue,n.formData.nfe_key]])])])]),a("div",Ou,[t[22]||(t[22]=a("h4",null,[a("i",{class:"fas fa-calendar-check"}),N(" Agendamento")],-1)),a("div",Lu,[a("div",Uu,[t[20]||(t[20]=a("label",{for:"status"},"Status",-1)),X(a("select",{id:"status","onUpdate:modelValue":t[3]||(t[3]=r=>n.formData.status=r),class:"form-control",required:""},t[19]||(t[19]=[cs('<option value="" data-v-286cf091>Selecione um status</option><option value="Solicitado" data-v-286cf091>Solicitado</option><option value="Agendado" data-v-286cf091>Agendado</option><option value="Conferência" data-v-286cf091>Conferência</option><option value="Tratativa" data-v-286cf091>Tratativa</option><option value="Estoque" data-v-286cf091>Estoque</option><option value="Recusar" data-v-286cf091>Recusar</option><option value="Recusado" data-v-286cf091>Recusado</option><option value="Cancelado" data-v-286cf091>Cancelado</option>',9)]),512),[[Ks,n.formData.status]])]),a("div",Iu,[t[21]||(t[21]=a("label",{for:"delivery_date"},"Data de Entrega",-1)),X(a("input",{id:"delivery_date","onUpdate:modelValue":t[4]||(t[4]=r=>n.formData.date=r),type:"date",class:"form-control",required:""},null,512),[[ue,n.formData.date]])])])]),a("div",qu,[t[25]||(t[25]=a("h4",null,[a("i",{class:"fas fa-warehouse"}),N(" Estoque")],-1)),a("div",ju,[a("div",Bu,[t[23]||(t[23]=a("label",{for:"client"},"Estoque",-1)),X(a("input",{id:"client","onUpdate:modelValue":t[5]||(t[5]=r=>n.formData.client=r),type:"text",class:"form-control",required:""},null,512),[[ue,n.formData.client]])]),a("div",$u,[t[24]||(t[24]=a("label",{for:"case_count"},"Quantidade de Volumes",-1)),X(a("input",{id:"case_count","onUpdate:modelValue":t[6]||(t[6]=r=>n.formData.case_count=r),type:"number",class:"form-control",min:"1",required:""},null,512),[[ue,n.formData.case_count]])])])]),a("div",Vu,[t[27]||(t[27]=a("h4",null,[a("i",{class:"fas fa-sticky-note"}),N(" Observações")],-1)),a("div",Hu,[t[26]||(t[26]=a("label",{for:"observations"},"Observações Adicionais",-1)),X(a("textarea",{id:"observations","onUpdate:modelValue":t[7]||(t[7]=r=>n.formData.observations=r),class:"form-control",rows:"3",placeholder:"Digite observações sobre este agendamento..."},null,512),[[ue,n.formData.observations]])])])],32)]),a("div",zu,[a("button",{type:"button",onClick:t[9]||(t[9]=(...r)=>i.closeModal&&i.closeModal(...r)),class:"btn btn-secondary",disabled:n.loading}," Cancelar ",8,Ju),a("button",{type:"button",onClick:t[10]||(t[10]=(...r)=>i.updateSchedule&&i.updateSchedule(...r)),disabled:n.loading||!i.isFormValid,class:"btn btn-primary"},[n.loading?(m(),g("i",Wu)):(m(),g("i",Gu)),N(" "+_(n.loading?"Salvando...":"Salvar Alterações"),1)],8,Ku)])],512)])])}const Fr=qe(Au,[["render",Xu],["__scopeId","data-v-286cf091"]]),Yu={name:"ScheduleFilters",props:{filters:{type:Object,required:!0},statusOptions:{type:Array,default:()=>[]},availableClients:{type:Array,default:()=>[]}},data(){return{localFilters:{...this.filters},expanded:!1}},watch:{filters:{handler(e){this.localFilters={...e}},deep:!0}},computed:{hasActiveFilters(){return Object.values(this.localFilters).some(e=>e&&e.toString().trim()!=="")},filterCount(){return Object.values(this.localFilters).filter(e=>e&&e.toString().trim()!=="").length}},methods:{applyFilters(){this.$emit("filters-changed",{...this.localFilters})},resetFilters(){this.localFilters={status:"",client:"",date_from:"",date_to:"",nfe_number:""},this.$emit("reset-filters")},toggleExpanded(){this.expanded=!this.expanded},handleInputChange(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.applyFilters()},500)},handleSelectChange(){this.applyFilters()},formatDate(e){return e?new Date(e).toISOString().split("T")[0]:""},saveFilters(){localStorage.setItem("scheduleFilters",JSON.stringify(this.localFilters))},loadSavedFilters(){const e=localStorage.getItem("scheduleFilters");if(e)try{this.localFilters={...this.localFilters,...JSON.parse(e)}}catch(t){console.error("Erro ao carregar filtros salvos:",t)}}},mounted(){this.loadSavedFilters()},beforeUnmount(){this.debounceTimer&&clearTimeout(this.debounceTimer)}},Qu={class:"schedule-filters"},Zu={class:"filter-header"},ef={class:"filter-title"},tf={key:0,class:"filter-count"},sf={class:"filter-actions"},nf=["title"],of={class:"filter-content"},rf={class:"filter-row"},af={class:"filter-group"},lf={class:"filter-group"},cf=["value"],df={class:"filter-group"},uf=["value"],ff={class:"filter-row"},hf={class:"filter-group"},pf={class:"filter-group"},mf={class:"filter-group filter-actions-buttons"};function gf(e,t,s,o,n,i){return m(),g("div",Qu,[a("div",Zu,[a("div",ef,[a("h4",null,[t[14]||(t[14]=a("i",{class:"fas fa-filter"},null,-1)),t[15]||(t[15]=N(" Filtros ")),i.filterCount>0?(m(),g("span",tf," ("+_(i.filterCount)+") ",1)):M("",!0)])]),a("div",sf,[a("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[0]||(t[0]=(...r)=>i.toggleExpanded&&i.toggleExpanded(...r)),title:n.expanded?"Recolher filtros":"Expandir filtros"},[a("i",{class:Q(n.expanded?"fas fa-chevron-up":"fas fa-chevron-down")},null,2)],8,nf),i.hasActiveFilters?(m(),g("button",{key:0,class:"btn btn-sm btn-outline-danger",onClick:t[1]||(t[1]=(...r)=>i.resetFilters&&i.resetFilters(...r)),title:"Limpar filtros"},t[16]||(t[16]=[a("i",{class:"fas fa-times"},null,-1),N(" Limpar ")]))):M("",!0)])]),X(a("div",of,[a("div",rf,[a("div",af,[t[17]||(t[17]=a("label",{for:"nfe-number"},"№ NF-e:",-1)),X(a("input",{id:"nfe-number",type:"text","onUpdate:modelValue":t[2]||(t[2]=r=>n.localFilters.nfe_number=r),onInput:t[3]||(t[3]=(...r)=>i.handleInputChange&&i.handleInputChange(...r)),placeholder:"Digite o número da NF-e",class:"form-control"},null,544),[[ue,n.localFilters.nfe_number]])]),a("div",lf,[t[18]||(t[18]=a("label",{for:"status"},"Status:",-1)),X(a("select",{id:"status","onUpdate:modelValue":t[4]||(t[4]=r=>n.localFilters.status=r),onChange:t[5]||(t[5]=(...r)=>i.handleSelectChange&&i.handleSelectChange(...r)),class:"form-control"},[(m(!0),g(W,null,pe(s.statusOptions,r=>(m(),g("option",{key:r.value,value:r.value},_(r.label),9,cf))),128))],544),[[Ks,n.localFilters.status]])]),a("div",df,[t[20]||(t[20]=a("label",{for:"client"},"Cliente/Estoque:",-1)),X(a("select",{id:"client","onUpdate:modelValue":t[6]||(t[6]=r=>n.localFilters.client=r),onChange:t[7]||(t[7]=(...r)=>i.handleSelectChange&&i.handleSelectChange(...r)),class:"form-control"},[t[19]||(t[19]=a("option",{value:""},"Todos os clientes",-1)),(m(!0),g(W,null,pe(s.availableClients,r=>(m(),g("option",{key:r.cnpj,value:r.cnpj},_(r.name),9,uf))),128))],544),[[Ks,n.localFilters.client]])])]),a("div",ff,[a("div",hf,[t[21]||(t[21]=a("label",{for:"date-from"},"Data de:",-1)),X(a("input",{id:"date-from",type:"date","onUpdate:modelValue":t[8]||(t[8]=r=>n.localFilters.date_from=r),onChange:t[9]||(t[9]=(...r)=>i.handleSelectChange&&i.handleSelectChange(...r)),class:"form-control"},null,544),[[ue,n.localFilters.date_from]])]),a("div",pf,[t[22]||(t[22]=a("label",{for:"date-to"},"Data até:",-1)),X(a("input",{id:"date-to",type:"date","onUpdate:modelValue":t[10]||(t[10]=r=>n.localFilters.date_to=r),onChange:t[11]||(t[11]=(...r)=>i.handleSelectChange&&i.handleSelectChange(...r)),class:"form-control"},null,544),[[ue,n.localFilters.date_to]])]),a("div",mf,[a("button",{class:"btn btn-primary",onClick:t[12]||(t[12]=(...r)=>i.applyFilters&&i.applyFilters(...r)),title:"Aplicar filtros"},t[23]||(t[23]=[a("i",{class:"fas fa-search"},null,-1),N(" Filtrar ")])),a("button",{class:"btn btn-secondary",onClick:t[13]||(t[13]=(...r)=>i.saveFilters&&i.saveFilters(...r)),title:"Salvar filtros"},t[24]||(t[24]=[a("i",{class:"fas fa-save"},null,-1),N(" Salvar ")]))])])],512),[[hc,n.expanded]])])}const Rr=qe(Yu,[["render",gf]]),bf={name:"SchedulesList",components:{NfeInfoModal:Nr,ScheduleEditModal:Fr,ScheduleFilters:Rr},data(){return{schedules:[],loading:!1,selectedSchedule:null,selectedSchedules:[],newDate:"",bulkActionLoading:!1,showInfoModal:!1,showEditModal:!1,scheduleToEdit:null,pagination:{page:1,limit:20,total:0,hasMore:!0},loadingMore:!1,currentFilters:{status:"",client:"",date_from:"",date_to:"",nfe_number:""},availableClients:[]}},computed:{statusConfig(){return{Solicitado:{class:"warning",label:"Solicitado"},Contestado:{class:"contestado",label:"Contestado"},Agendado:{class:"primary",label:"Agendado"},Conferência:{class:"success",label:"Conferência"},Recebido:{class:"success",label:"Conferência"},Tratativa:{class:"danger",label:"Tratativa"},Estoque:{class:"success",label:"Estoque"},Recusar:{class:"danger",label:"Recusar"},Cancelar:{class:"warning",label:"Cancelar"},Recusado:{class:"dark",label:"Recusado"},Cancelado:{class:"secondary",label:"Cancelado"}}},selectedScheduleStatuses(){const e=this.schedules.filter(t=>this.selectedSchedules.includes(t.id));return[...new Set(e.map(t=>t.status))]},cancelRequestedBy(){if(this.selectedSchedules.length===0)return"administrador";const e=this.schedules.filter(n=>this.selectedSchedules.includes(n.id));if(e.length===0)return"administrador";const t=e[0];if(!t.historic)return"administrador";const o=Object.values(t.historic).find(n=>n.action&&n.action.includes("Cancelar")||n.action&&n.action.includes("cancelamento"));return o&&o.user?o.user:"administrador"},canBulkManage(){return this.selectedSchedules.length>0&&this.selectedScheduleStatuses.length===1},userLevel(){try{const e=localStorage.getItem("user");return e?JSON.parse(e).level_access:null}catch(e){return console.error("Erro ao obter nível do usuário:",e),null}},today(){return new Date().toISOString().split("T")[0]},statusOptions(){return[{value:"",label:"Todos os status"},{value:"Solicitado",label:"Solicitado"},{value:"Contestado",label:"Contestado"},{value:"Agendado",label:"Agendado"},{value:"Conferência",label:"Conferência"},{value:"Tratativa",label:"Tratativa"},{value:"Estoque",label:"Estoque"},{value:"Cancelar",label:"Cancelar"},{value:"Cancelado",label:"Cancelado"},{value:"Recusado",label:"Recusado"}]}},methods:{async loadSchedules(){var e,t,s,o,n,i,r,l,c;this.pagination.page===1&&(this.loading=!0,this.clearSelection());try{const d=window.apiClient;console.log("Fazendo requisição para /schedules"),console.log("Token presente:",!!localStorage.getItem("token"));const u=await d.request("/schedules",{method:"GET",params:{page:this.pagination.page,limit:this.pagination.limit,...this.currentFilters}});console.log("Resposta recebida:",u);const h=u.schedules||[];this.pagination.page===1?this.schedules=h:this.schedules=[...this.schedules,...h],this.pagination.total=((e=u.pagination)==null?void 0:e.total)||0,this.pagination.hasMore=h.length===this.pagination.limit}catch(d){if(console.error("Erro ao carregar agendamentos:",d),console.error("URL da requisição:",(t=d.config)==null?void 0:t.url),console.error("Status do erro:",(s=d.response)==null?void 0:s.status),console.error("Dados do erro:",(o=d.response)==null?void 0:o.data),console.error("Headers da requisição:",(n=d.config)==null?void 0:n.headers),((i=d.response)==null?void 0:i.status)===401||((r=d.response)==null?void 0:r.status)===403){this.$emit("notification",{type:"error",message:"Erro de autenticação. Por favor, faça login novamente."}),localStorage.removeItem("token"),window.location.href="/index.html";return}((l=d.response)==null?void 0:l.status)===500?this.$emit("notification",{type:"error",message:"Erro interno do servidor. Verifique se o backend está funcionando corretamente."}):this.$emit("notification",{type:"error",message:`Erro ao carregar agendamentos: ${((c=d.response)==null?void 0:c.status)||"Erro desconhecido"}`}),this.schedules=[]}finally{this.pagination.page===1&&(this.loading=!1)}},openInfoModal(e){console.log("📋 Abrindo modal NFe:",e),this.selectedSchedule=e,this.showInfoModal=!0,console.log("📋 Modal state:",{showInfoModal:this.showInfoModal,selectedSchedule:this.selectedSchedule})},closeInfoModal(){this.showInfoModal=!1,this.selectedSchedule=null},openEditModal(e){console.log("🔧 Abrindo modal de edição:",e),this.scheduleToEdit=e,this.showEditModal=!0,this.showInfoModal=!1},closeEditModal(){this.showEditModal=!1,this.scheduleToEdit=null},handleScheduleUpdated(e){console.log("✅ Agendamento atualizado:",e),this.loadSchedules(),this.closeEditModal()},async loadMoreSchedules(){if(!(this.loadingMore||!this.pagination.hasMore)){this.loadingMore=!0,this.pagination.page+=1;try{await this.loadSchedules()}catch{this.pagination.page-=1}finally{this.loadingMore=!1}}},handleScroll(e){const{scrollTop:t,scrollHeight:s,clientHeight:o}=e.target;t+o>=s-100&&this.loadMoreSchedules()},getStatusBadge(e){return this.statusConfig[e]||{class:"secondary",label:"Desconhecido"}},formatDate(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{return new Date(e).toLocaleDateString("pt-BR")}catch{return e}},formatCurrency(e){return e?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):"R$ 0,00"},formatDateForDisplay(e){if(!e)return"";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{return new Date(e).toLocaleDateString("pt-BR")}catch{return e}},onScheduleSelect(){if(this.schedules.filter(t=>this.canSelectSchedule(t)),this.selectedScheduleStatuses.length>1){const t=this.selectedSchedules[this.selectedSchedules.length-1],s=this.schedules.find(o=>o.id===t);s&&(this.selectedSchedules=this.selectedSchedules.filter(o=>{const n=this.schedules.find(i=>i.id===o);return n&&n.status===s.status}))}},canSelectSchedule(e){if(!["Solicitado","Contestado","Cancelar","Agendado","Conferência","Recebido","Tratativa","Estoque"].includes(e.status))return!1;if(this.selectedSchedules.length>0){const s=this.selectedScheduleStatuses;if(s.length===1&&!s.includes(e.status))return!1}return!0},clearSelection(){this.selectedSchedules=[],this.newDate=""},async acceptSchedules(){if(this.selectedSchedules.length!==0){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Agendado","Agendamento aceito"),this.$emit("notification",{type:"success",message:`${this.selectedSchedules.length} agendamento(s) aceito(s) com sucesso`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao aceitar agendamentos:",e),this.$emit("notification",{type:"error",message:"Erro ao aceitar agendamentos"})}finally{this.bulkActionLoading=!1}}},async changeDateToContestado(){if(!(this.selectedSchedules.length===0||!this.newDate)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatusWithDateAndComment("Contestado",this.newDate),this.$emit("notification",{type:"success",message:`Data alterada para ${this.selectedSchedules.length} agendamento(s)`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao alterar data:",e),this.$emit("notification",{type:"error",message:"Erro ao alterar data dos agendamentos"})}finally{this.bulkActionLoading=!1}}},async acceptNewDate(){if(this.selectedSchedules.length!==0){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Agendado","Nova data aceita"),this.$emit("notification",{type:"success",message:`Nova data aceita para ${this.selectedSchedules.length} agendamento(s)`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao aceitar nova data:",e),this.$emit("notification",{type:"error",message:"Erro ao aceitar nova data"})}finally{this.bulkActionLoading=!1}}},async confirmContestado(){if(this.selectedSchedules.length!==0){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Agendado","Data contestada confirmada"),this.$emit("notification",{type:"success",message:`${this.selectedSchedules.length} agendamento(s) confirmado(s)`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao confirmar agendamentos:",e),this.$emit("notification",{type:"error",message:"Erro ao confirmar agendamentos"})}finally{this.bulkActionLoading=!1}}},async changeContestadoToAgendado(){if(!(this.selectedSchedules.length===0||!this.newDate)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatusWithDate("Agendado",this.newDate,"Data contestada reagendada"),this.$emit("notification",{type:"success",message:`${this.selectedSchedules.length} agendamento(s) reagendado(s)`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao reagendar:",e),this.$emit("notification",{type:"error",message:"Erro ao reagendar agendamentos"})}finally{this.bulkActionLoading=!1}}},async cancelSchedules(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja cancelar ${this.selectedSchedules.length} agendamento(s)?`)){this.bulkActionLoading=!0;try{const e=this.userLevel===1?"Cancelar":"Cancelado",t=this.userLevel===1?"Agendamento solicitado para cancelamento":"Agendamento cancelado diretamente";await this.bulkUpdateStatus(e,t);const s=this.userLevel===1?`${this.selectedSchedules.length} agendamento(s) marcado(s) para cancelamento`:`${this.selectedSchedules.length} agendamento(s) cancelado(s) com sucesso`;this.$emit("notification",{type:"success",message:s}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao cancelar agendamentos:",e),this.$emit("notification",{type:"error",message:"Erro ao cancelar agendamentos"})}finally{this.bulkActionLoading=!1}}},async markAsReceived(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja marcar ${this.selectedSchedules.length} agendamento(s) como em conferência?`)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Conferência","Agendamento marcado como em conferência"),this.$emit("notification",{type:"success",message:`${this.selectedSchedules.length} agendamento(s) marcado(s) como em conferência`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao marcar como em conferência:",e),this.$emit("notification",{type:"error",message:"Erro ao marcar agendamentos como em conferência"})}finally{this.bulkActionLoading=!1}}},async markAsEstoque(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja marcar ${this.selectedSchedules.length} agendamento(s) como estoque?`)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Estoque","Agendamento marcado como estoque"),this.$emit("notification",{type:"success",message:`${this.selectedSchedules.length} agendamento(s) marcado(s) como estoque`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao marcar como estoque:",e),this.$emit("notification",{type:"error",message:"Erro ao marcar agendamentos como estoque"})}finally{this.bulkActionLoading=!1}}},async acceptCancellation(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja aceitar o cancelamento de ${this.selectedSchedules.length} agendamento(s)?`)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Cancelado","Cancelamento aceito"),this.$emit("notification",{type:"success",message:`${this.selectedSchedules.length} cancelamento(s) aceito(s)`}),this.clearSelection(),await this.loadSchedules()}catch(e){console.error("Erro ao aceitar cancelamento:",e),this.$emit("notification",{type:"error",message:"Erro ao aceitar cancelamento"})}finally{this.bulkActionLoading=!1}}},async bulkUpdateStatus(e,t){const s=window.apiClient;for(const o of this.selectedSchedules){const n={status:e,historic_entry:{user:this.getCurrentUser(),action:`Status alterado para ${e}`,comment:t}};console.log("📤 Enviando payload para status update:",n),console.log("📍 URL:",`/schedules/${o}/status`),await s.request(`/schedules/${o}/status`,{method:"PATCH",data:n})}},async bulkUpdateStatusWithDate(e,t,s){const o=window.apiClient,n=this.formatDateForBackend(t);console.log(`📤 Data escolhida: ${t}`),console.log(`📤 Data formatada para backend: ${n}`);for(const i of this.selectedSchedules){console.log(`📤 Atualizando agendamento ${i} com nova data ${n} e status ${e}`);const l=(await o.request(`/schedules/${i}`,{method:"GET"})).schedule,c={number:l.number,nfe_key:l.nfe_key,client:l.client_cnpj||l.client,case_count:l.case_count,date:n,qt_prod:l.qt_prod,historic:{...l.historic,[`date_change_${Date.now()}`]:{timestamp:new Date().toISOString(),user:this.getCurrentUser(),action:`Data alterada de ${this.formatDateForDisplay(l.date)} para ${this.formatDateForDisplay(n)}`,comment:"Data alterada via bulk action",previous_date:l.date,new_date:n}}};console.log("📤 Payload para atualização:",c),await o.request(`/schedules/${i}`,{method:"PUT",data:c});const d={status:e,historic_entry:{user:this.getCurrentUser(),action:`Status alterado para ${e} com nova data ${this.formatDateForDisplay(n)}`,comment:s}};console.log("📤 Payload para status:",d),await o.request(`/schedules/${i}/status`,{method:"PATCH",data:d})}},async bulkUpdateStatusWithDateAndComment(e,t){const s=window.apiClient,o=this.formatDateForBackend(t);for(const n of this.selectedSchedules){const r=(await s.request(`/schedules/${n}`,{method:"GET"})).schedule,l=this.formatDateForDisplay(r.date),c=this.formatDateForDisplay(o),d=`A data escolhida (${l}) está indisponível, a data escolhida pela nossa equipe é ${c}. Por gentileza confirmar em nossa plataforma.`,u={number:r.number,nfe_key:r.nfe_key,client:r.client_cnpj||r.client,case_count:r.case_count,date:o,qt_prod:r.qt_prod,historic:{...r.historic,[`date_change_${Date.now()}`]:{timestamp:new Date().toISOString(),user:this.getCurrentUser(),action:`Data alterada de ${l} para ${c}`,comment:d,previous_date:r.date,new_date:o}}};await s.request(`/schedules/${n}`,{method:"PUT",data:u});const h={status:e,historic_entry:{user:this.getCurrentUser(),action:`Status alterado para ${e} com nova data ${c}`,comment:d}};await s.request(`/schedules/${n}/status`,{method:"PATCH",data:h})}},getCurrentUser(){try{const e=localStorage.getItem("user");return e&&JSON.parse(e).user||"Usuário desconhecido"}catch{return"Usuário desconhecido"}},formatDateForBackend(e){if(!e)return null;if(e.match(/^\d{4}-\d{2}-\d{2}$/))return console.log("📅 Data original:",e),e;const t=new Date(e),s=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=`${s}-${o}-${n}`;return console.log("📅 Data formatada:",i),i},handleFiltersChanged(e){console.log("🔍 Filtros alterados:",e),this.currentFilters={...e},this.pagination.page=1,this.pagination.hasMore=!0,this.schedules=[],this.loadSchedules()},handleResetFilters(){console.log("🔄 Resetando filtros"),this.currentFilters={status:"",client:"",date_from:"",date_to:"",nfe_number:""},this.pagination.page=1,this.pagination.hasMore=!0,this.schedules=[],this.loadSchedules()},loadAvailableClients(){try{const e=localStorage.getItem("user");if(console.log("🔍 DEBUG SchedulesList: userData do localStorage:",e),!e){console.log("❌ Nenhum dado de usuário encontrado no localStorage");return}const t=JSON.parse(e);console.log("👤 SchedulesList - Usuário logado completo:",t),console.log("📊 Level access:",t.level_access),console.log("🏢 cli_access:",t.cli_access),console.log("🏢 cli_access type:",typeof t.cli_access);let s=t.cli_access;if(typeof s=="string"&&s)try{s=JSON.parse(s),console.log("🔄 cli_access parsed from string:",s)}catch(o){console.log("❌ Erro ao fazer parse do cli_access string:",o),s=null}if(t.level_access===0){console.log("🔓 Usuário desenvolvedor - buscando todos os clientes via API"),this.availableClients=[],console.log("📝 availableClients definido como vazio para desenvolvedor");return}if(s&&typeof s=="object"){console.log("✅ cli_access encontrado, processando...");const o=Object.entries(s);console.log("📋 Entradas do cli_access:",o);const n=o.map(([i,r])=>(console.log(`🏪 Processando cliente ${i}:`,r),{cnpj:i,name:r.nome||`Cliente ${i}`,number:r.numero||i}));console.log("👥 Clientes processados:",n),this.availableClients=n,console.log("💾 availableClients definido:",this.availableClients)}else console.log("⚠️ Usuário sem cli_access definido ou cli_access não é objeto"),console.log("⚠️ cli_access value:",s),this.availableClients=[]}catch(e){console.error("❌ Erro ao carregar clientes disponíveis:",e),this.availableClients=[]}}},mounted(){this.loadAvailableClients(),this.loadSchedules()}},yf={class:"schedules-list"},vf={key:0,class:"bulk-actions-bar"},Sf={class:"selected-info"},Cf={class:"selection-badge"},wf={class:"bulk-actions"},_f={key:0,class:"contestado-actions"},Ef={key:0,class:"level-1-actions"},Af=["disabled"],Df={key:1,class:"non-level-1-actions"},kf=["disabled"],Tf=["min"],Pf=["disabled"],xf={key:1,class:"solicitado-actions"},Nf=["disabled"],Ff=["min"],Rf=["disabled"],Mf={key:2,class:"agendado-actions"},Of=["disabled"],Lf={key:3,class:"conferencia-actions"},Uf=["disabled"],If={key:4,class:"cancelar-actions"},qf=["disabled"],jf={class:"text-muted",style:{"font-size":"0.85em"}},Bf={key:5,class:"universal-actions"},$f=["disabled"],Vf={class:"table-container"},Hf={key:0,class:"loading-container"},zf={key:1,class:"empty-state"},Jf={class:"schedules-table"},Kf=["value","disabled"],Wf=["onClick"],Gf={key:0,class:"loading-more"};function Xf(e,t,s,o,n,i){const r=Ue("ScheduleFilters"),l=Ue("nfe-info-modal"),c=Ue("schedule-edit-modal");return m(),g("div",yf,[Se(r,{filters:n.currentFilters,"status-options":i.statusOptions,"available-clients":n.availableClients,onFiltersChanged:i.handleFiltersChanged,onResetFilters:i.handleResetFilters},null,8,["filters","status-options","available-clients","onFiltersChanged","onResetFilters"]),i.canBulkManage?(m(),g("div",vf,[a("div",Sf,[a("button",{class:"btn btn-outline-secondary action-btn selection-btn",onClick:t[0]||(t[0]=(...d)=>i.clearSelection&&i.clearSelection(...d))},[t[16]||(t[16]=a("i",{class:"fas fa-times"},null,-1)),t[17]||(t[17]=N(" Limpar seleção ")),a("span",Cf,_(n.selectedSchedules.length),1)])]),a("div",wf,[i.selectedScheduleStatuses[0]==="Contestado"?(m(),g("div",_f,[i.userLevel===1?(m(),g("div",Ef,[a("button",{class:"btn btn-success action-btn",onClick:t[1]||(t[1]=(...d)=>i.acceptNewDate&&i.acceptNewDate(...d)),disabled:n.bulkActionLoading},t[18]||(t[18]=[a("i",{class:"fas fa-check"},null,-1),N(" Aceitar Nova Data ")]),8,Af),t[19]||(t[19]=a("span",{class:"contact-text"},"Ou entre em contato com nossa equipe",-1))])):(m(),g("div",Df,[a("button",{class:"btn btn-success action-btn",onClick:t[2]||(t[2]=(...d)=>i.confirmContestado&&i.confirmContestado(...d)),disabled:n.bulkActionLoading},t[20]||(t[20]=[a("i",{class:"fas fa-check"},null,-1),N(" Confirmar ")]),8,kf),X(a("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=d=>n.newDate=d),class:"form-control",min:i.today},null,8,Tf),[[ue,n.newDate]]),a("button",{class:"btn btn-success action-btn",onClick:t[4]||(t[4]=(...d)=>i.changeContestadoToAgendado&&i.changeContestadoToAgendado(...d)),disabled:!n.newDate||n.bulkActionLoading},t[21]||(t[21]=[a("i",{class:"fas fa-calendar-alt"},null,-1),N(" Agendar ")]),8,Pf)]))])):M("",!0),i.selectedScheduleStatuses[0]==="Solicitado"&&i.userLevel!==1?(m(),g("div",xf,[a("button",{class:"btn btn-success action-btn",onClick:t[5]||(t[5]=(...d)=>i.acceptSchedules&&i.acceptSchedules(...d)),disabled:n.bulkActionLoading},t[22]||(t[22]=[a("i",{class:"fas fa-check"},null,-1),N(" Aceitar Agendamento ")]),8,Nf),X(a("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=d=>n.newDate=d),class:"form-control",min:i.today},null,8,Ff),[[ue,n.newDate]]),a("button",{class:"btn btn-warning action-btn",onClick:t[7]||(t[7]=(...d)=>i.changeDateToContestado&&i.changeDateToContestado(...d)),disabled:!n.newDate||n.bulkActionLoading},t[23]||(t[23]=[a("i",{class:"fas fa-calendar-alt"},null,-1),N(" Alterar Data ")]),8,Rf)])):M("",!0),i.selectedScheduleStatuses[0]==="Agendado"&&i.userLevel!==1?(m(),g("div",Mf,[a("button",{class:"btn btn-success action-btn",onClick:t[8]||(t[8]=(...d)=>i.markAsReceived&&i.markAsReceived(...d)),disabled:n.bulkActionLoading},t[24]||(t[24]=[a("i",{class:"fas fa-check-circle"},null,-1),N(" Marcar como Conferência ")]),8,Of)])):M("",!0),(i.selectedScheduleStatuses[0]==="Conferência"||i.selectedScheduleStatuses[0]==="Recebido")&&i.userLevel!==1?(m(),g("div",Lf,[a("button",{class:"btn btn-info action-btn",onClick:t[9]||(t[9]=(...d)=>i.markAsEstoque&&i.markAsEstoque(...d)),disabled:n.bulkActionLoading},t[25]||(t[25]=[a("i",{class:"fas fa-warehouse"},null,-1),N(" Marcar como Estoque ")]),8,Uf)])):M("",!0),i.selectedScheduleStatuses[0]==="Cancelar"&&i.userLevel!==1?(m(),g("div",If,[a("button",{class:"btn btn-danger action-btn btn-accept-cancel",onClick:t[10]||(t[10]=(...d)=>i.acceptCancellation&&i.acceptCancellation(...d)),disabled:n.bulkActionLoading},t[26]||(t[26]=[a("i",{class:"fas fa-times-circle"},null,-1),N(" Aceitar Cancelamento ")]),8,qf),a("span",jf,"Solicitado por "+_(i.cancelRequestedBy),1)])):M("",!0),n.selectedSchedules.length>0&&!["Cancelar","Cancelado","Recusado","Estoque"].includes(i.selectedScheduleStatuses[0])?(m(),g("div",Bf,[a("button",{class:"btn btn-outline-danger action-btn",onClick:t[11]||(t[11]=(...d)=>i.cancelSchedules&&i.cancelSchedules(...d)),disabled:n.bulkActionLoading},[t[27]||(t[27]=a("i",{class:"fas fa-ban"},null,-1)),N(" "+_(i.userLevel===1?"Solicitar Cancelamento":"Cancelar Agendamento"),1)],8,$f)])):M("",!0)])])):M("",!0),a("div",Vf,[n.loading?(m(),g("div",Hf,t[28]||(t[28]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1),a("p",null,"Carregando agendamentos...",-1)]))):n.schedules.length===0?(m(),g("div",zf,t[29]||(t[29]=[a("i",{class:"fas fa-inbox"},null,-1),a("h3",null,"Nenhum agendamento encontrado",-1),a("p",null,"Não há agendamentos que correspondam aos filtros aplicados.",-1)]))):(m(),g("div",{key:2,class:"table-wrapper",onScroll:t[14]||(t[14]=(...d)=>i.handleScroll&&i.handleScroll(...d)),ref:"tableWrapper"},[a("table",Jf,[t[31]||(t[31]=a("thead",null,[a("tr",null,[a("th",{style:{width:"50px"}}),a("th",null,"N° NF-e"),a("th",null,"Cliente"),a("th",null,"Data de Entrega"),a("th",null,"Volumes"),a("th",null,"Status"),a("th")])],-1)),a("tbody",null,[(m(!0),g(W,null,pe(n.schedules,d=>(m(),g("tr",{key:d.id},[a("td",null,[X(a("input",{type:"checkbox",value:d.id,"onUpdate:modelValue":t[12]||(t[12]=u=>n.selectedSchedules=u),onChange:t[13]||(t[13]=(...u)=>i.onScheduleSelect&&i.onScheduleSelect(...u)),disabled:!i.canSelectSchedule(d)},null,40,Kf),[[po,n.selectedSchedules]])]),a("td",null,_(d.number),1),a("td",null,_(d.client),1),a("td",null,_(i.formatDate(d.date)),1),a("td",null,_(d.case_count),1),a("td",null,[a("span",{class:Q(["status-badge "+i.getStatusBadge(d.status).class,"status-badge"])},_(i.getStatusBadge(d.status).label),3)]),a("td",null,[a("button",{class:"btn btn-sm btn-outline-primary",onClick:u=>i.openInfoModal(d),title:"Mais informações"},t[30]||(t[30]=[a("i",{class:"fas fa-info-circle"},null,-1),N(" Detalhes ")]),8,Wf)])]))),128))])]),n.loadingMore?(m(),g("div",Gf,t[32]||(t[32]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1),a("p",null,"Carregando mais agendamentos...",-1)]))):M("",!0)],544))]),n.showInfoModal?(m(),Tt(l,{key:1,"nfe-data":n.selectedSchedule,"show-modal":n.showInfoModal,onClose:i.closeInfoModal,onEdit:i.openEditModal},null,8,["nfe-data","show-modal","onClose","onEdit"])):M("",!0),n.showEditModal?(m(),Tt(c,{key:2,"schedule-data":n.scheduleToEdit,"show-modal":n.showEditModal,onClose:i.closeEditModal,onUpdated:i.handleScheduleUpdated,onNotification:t[15]||(t[15]=d=>e.$emit("notification",d))},null,8,["schedule-data","show-modal","onClose","onUpdated"])):M("",!0)])}const Yf=qe(bf,[["render",Xf],["__scopeId","data-v-be507e88"]]),Qf={name:"ProductEditModal",props:{product:{type:Object,default:()=>({})},showModal:{type:Boolean,default:!1}},data(){return{editableProduct:{},loading:!1,history:[],showHistory:!1,errors:[],originalDescription:""}},computed:{hasChanges(){return this.editableProduct.client_description!==this.originalDescription},canSave(){return this.hasChanges&&this.editableProduct.client_description&&this.editableProduct.client_description.trim()!==""}},watch:{product:{handler(e){e&&(this.editableProduct={...e},this.originalDescription=e.client_description||"")},immediate:!0}},methods:{closeModal(){this.resetModal(),this.$emit("close")},resetModal(){this.editableProduct={},this.loading=!1,this.history=[],this.showHistory=!1,this.errors=[],this.originalDescription=""},async loadProductHistory(){if(!(!this.product.id&&!this.product.supplier_code)){this.loading=!0;try{const e=window.apiClient,t=this.product.id||this.product.supplier_code,s=await e.request(`/products/${t}/history`,{method:"GET"});this.history=s.data||[]}catch(e){console.error("Erro ao carregar histórico:",e),this.showError("Erro ao carregar histórico do produto")}finally{this.loading=!1}}},async saveDescription(){var e,t;if(this.canSave){this.loading=!0,this.errors=[];try{const s=window.apiClient,o={client_description:this.editableProduct.client_description.trim(),client_code:this.editableProduct.client_code||"",factor:this.editableProduct.factor||1},n=await s.request("/products/update-description",{method:"PUT",data:{supplier_code:this.product.supplier_code,...o}});this.editableProduct={...this.editableProduct,...n.data},this.originalDescription=this.editableProduct.client_description,this.$emit("updated",this.editableProduct),this.showSuccess("Descrição do produto atualizada com sucesso!"),await this.loadProductHistory()}catch(s){console.error("Erro ao salvar descrição:",s),this.showError(((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||"Erro ao salvar descrição do produto")}finally{this.loading=!1}}},toggleHistory(){this.showHistory=!this.showHistory,this.showHistory&&this.history.length===0&&this.loadProductHistory()},showError(e){this.errors.push(e)},showSuccess(e){this.$emit("notification",{type:"success",message:e})},removeError(e){this.errors.splice(e,1)},formatDate(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{return new Date(e).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}},formatCurrency(e){return e?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):"R$ 0,00"},handleModalClick(e){e.target.classList.contains("modal-overlay")&&this.closeModal()},resetToOriginal(){this.editableProduct.client_description=this.originalDescription}},mounted(){this.product&&(this.editableProduct={...this.product},this.originalDescription=this.product.client_description||"")}},Zf={class:"modal-content medium product-edit-modal"},eh={class:"modal-header"},th={key:0,class:"error-container"},sh=["onClick"],nh={key:1,class:"loading-container"},oh={class:"modal-body"},ih={class:"product-info"},rh={class:"info-grid"},ah={class:"info-item"},lh={class:"code"},ch={class:"info-item"},dh={class:"info-item"},uh={class:"info-item"},fh={class:"info-item"},hh={class:"info-item"},ph={class:"editable-fields"},mh={class:"form-group"},gh={class:"form-group"},bh={key:0,class:"invalid-feedback"},yh={class:"form-group"},vh={class:"history-section"},Sh={class:"history-header"},Ch={key:0,class:"history-content"},wh={key:0,class:"empty-state"},_h={key:1,class:"history-timeline"},Eh={class:"history-date"},Ah={class:"history-content"},Dh={key:0,class:"changes"},kh={class:"modal-footer"},Th=["disabled"],Ph={key:2,class:"changes-indicator"};function xh(e,t,s,o,n,i){return s.showModal?(m(),g("div",{key:0,class:"modal-overlay",onClick:t[8]||(t[8]=(...r)=>i.handleModalClick&&i.handleModalClick(...r))},[a("div",Zf,[a("div",eh,[t[10]||(t[10]=a("h3",null,[a("i",{class:"fas fa-edit"}),N(" Editar Produto ")],-1)),a("button",{class:"btn-close",onClick:t[0]||(t[0]=(...r)=>i.closeModal&&i.closeModal(...r))},t[9]||(t[9]=[a("i",{class:"fas fa-times"},null,-1)]))]),n.errors.length>0?(m(),g("div",th,[(m(!0),g(W,null,pe(n.errors,(r,l)=>(m(),g("div",{key:l,class:"error-message"},[t[12]||(t[12]=a("i",{class:"fas fa-exclamation-triangle"},null,-1)),N(" "+_(r)+" ",1),a("button",{onClick:c=>i.removeError(l),class:"btn-close-error"},t[11]||(t[11]=[a("i",{class:"fas fa-times"},null,-1)]),8,sh)]))),128))])):M("",!0),n.loading?(m(),g("div",nh,t[13]||(t[13]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1),a("p",null,"Carregando...",-1)]))):M("",!0),a("div",oh,[a("div",ih,[t[20]||(t[20]=a("h4",null,"Informações do Produto",-1)),a("div",rh,[a("div",ah,[t[14]||(t[14]=a("label",null,"Código do Fornecedor:",-1)),a("span",lh,_(n.editableProduct.supplier_code),1)]),a("div",ch,[t[15]||(t[15]=a("label",null,"Descrição do Fornecedor:",-1)),a("span",null,_(n.editableProduct.supplier_description),1)]),a("div",dh,[t[16]||(t[16]=a("label",null,"Quantidade:",-1)),a("span",null,_(n.editableProduct.quantity)+" "+_(n.editableProduct.unit),1)]),a("div",uh,[t[17]||(t[17]=a("label",null,"Valor Unitário:",-1)),a("span",null,_(i.formatCurrency(n.editableProduct.unit_value)),1)]),a("div",fh,[t[18]||(t[18]=a("label",null,"Valor Total:",-1)),a("span",null,_(i.formatCurrency(n.editableProduct.total_value)),1)]),a("div",hh,[t[19]||(t[19]=a("label",null,"Fator de Conversão:",-1)),a("span",null,_(n.editableProduct.factor||1),1)])])]),a("div",ph,[t[25]||(t[25]=a("h4",null,"Campos Editáveis",-1)),a("div",mh,[t[21]||(t[21]=a("label",{for:"client-code"},"Código do Cliente:",-1)),X(a("input",{id:"client-code",type:"text","onUpdate:modelValue":t[1]||(t[1]=r=>n.editableProduct.client_code=r),class:"form-control",placeholder:"Digite o código do cliente"},null,512),[[ue,n.editableProduct.client_code]])]),a("div",gh,[t[22]||(t[22]=a("label",{for:"client-description"},"Descrição do Cliente:",-1)),X(a("textarea",{id:"client-description","onUpdate:modelValue":t[2]||(t[2]=r=>n.editableProduct.client_description=r),class:Q(["form-control",{"is-invalid":!n.editableProduct.client_description&&i.hasChanges}]),rows:"3",placeholder:"Digite a descrição do cliente"},"            ",2),[[ue,n.editableProduct.client_description]]),!n.editableProduct.client_description&&i.hasChanges?(m(),g("div",bh," A descrição do cliente é obrigatória ")):M("",!0)]),a("div",yh,[t[23]||(t[23]=a("label",{for:"factor"},"Fator de Conversão:",-1)),X(a("input",{id:"factor",type:"number",step:"0.01",min:"0.01","onUpdate:modelValue":t[3]||(t[3]=r=>n.editableProduct.factor=r),class:"form-control",placeholder:"1.00"},null,512),[[ue,n.editableProduct.factor]]),t[24]||(t[24]=a("small",{class:"form-text text-muted"}," Fator usado para converter a quantidade do fornecedor para a quantidade do cliente ",-1))])]),a("div",vh,[a("div",Sh,[t[26]||(t[26]=a("h4",null,"Histórico de Alterações",-1)),a("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[4]||(t[4]=(...r)=>i.toggleHistory&&i.toggleHistory(...r))},[a("i",{class:Q(n.showHistory?"fas fa-chevron-up":"fas fa-chevron-down")},null,2),N(" "+_(n.showHistory?"Ocultar":"Mostrar")+" Histórico ",1)])]),n.showHistory?(m(),g("div",Ch,[n.history.length===0&&!n.loading?(m(),g("div",wh,t[27]||(t[27]=[a("i",{class:"fas fa-history"},null,-1),a("p",null,"Nenhum histórico de alterações encontrado",-1)]))):(m(),g("div",_h,[(m(!0),g(W,null,pe(n.history,r=>(m(),g("div",{key:r.id,class:"history-item"},[a("div",Eh,_(i.formatDate(r.created_at)),1),a("div",Ah,[a("h5",null,_(r.action),1),a("p",null,_(r.description),1),r.changes?(m(),g("div",Dh,[a("small",null,[t[28]||(t[28]=a("strong",null,"Alterações:",-1)),N(" "+_(r.changes),1)])])):M("",!0)])]))),128))]))])):M("",!0)])]),a("div",kh,[i.hasChanges?(m(),g("button",{key:0,onClick:t[5]||(t[5]=(...r)=>i.resetToOriginal&&i.resetToOriginal(...r)),class:"btn btn-outline-secondary"},t[29]||(t[29]=[a("i",{class:"fas fa-undo"},null,-1),N(" Resetar ")]))):M("",!0),a("button",{onClick:t[6]||(t[6]=(...r)=>i.closeModal&&i.closeModal(...r)),class:"btn btn-secondary"},"Cancelar"),a("button",{onClick:t[7]||(t[7]=(...r)=>i.saveDescription&&i.saveDescription(...r)),disabled:!i.canSave||n.loading,class:"btn btn-primary"},[t[30]||(t[30]=a("i",{class:"fas fa-save"},null,-1)),N(" "+_(n.loading?"Salvando...":"Salvar Alterações"),1)],8,Th)]),i.hasChanges?(m(),g("div",Ph,t[31]||(t[31]=[a("i",{class:"fas fa-circle"},null,-1),N(" Alterações não salvas ")]))):M("",!0)])])):M("",!0)}const Nh=qe(Qf,[["render",xh]]),Fh={name:"ScheduleCreationModal",components:{ProductEditModal:Nh},props:{showModal:{type:Boolean,default:!1}},data(){return{currentStep:1,selectedFile:null,nfeData:{},products:[],loading:!1,errors:[],uploadProgress:0,showProductEditModal:!1,selectedProduct:null,clients:[],selectedClient:null,showClientSelectionModal:!1,loadingClients:!1,scheduledDate:"",loadingPrefill:!1}},computed:{canProceedToStep2(){return this.selectedFile&&this.nfeData&&Object.keys(this.nfeData).length>0},canProceedToStep3(){return this.nfeData&&this.products.length>0&&this.selectedClient&&this.scheduledDate},canCreateSchedule(){return this.products.length>0&&this.selectedClient&&this.scheduledDate},stepClasses(){return{1:{active:this.currentStep===1,completed:this.currentStep>1},2:{active:this.currentStep===2,completed:this.currentStep>2},3:{active:this.currentStep===3,completed:!1}}},totalValue(){return this.products.reduce((e,t)=>e+(t.total_value||0),0)},totalQuantity(){return this.products.reduce((e,t)=>e+(t.quantity||0),0)},isClientAutoSelected(){const e=this.getCurrentUser();return e&&e.cli_access&&this.nfeData.client_cnpj&&e.cli_access[this.nfeData.client_cnpj]},hasCreatePermission(){const e=this.getCurrentUser();return e&&e.level_access!==void 0&&e.level_access>=0},createButtonText(){return"Efetivar Agendamento"}},methods:{closeModal(){this.resetModal(),this.$emit("close")},resetModal(){this.currentStep=1,this.selectedFile=null,this.nfeData={},this.products=[],this.loading=!1,this.loadingPrefill=!1,this.errors=[],this.uploadProgress=0,this.selectedClient=null,this.scheduledDate=""},async handleFileSelect(e){const t=e.target.files[0];t&&(this.selectedFile=t,await this.parseAndExtractXML())},async handleDrop(e){e.preventDefault();const t=e.dataTransfer.files[0];t&&t.name.endsWith(".xml")?(this.selectedFile=t,await this.parseAndExtractXML()):this.showError("Por favor, selecione um arquivo XML válido")},async parseAndExtractXML(){if(this.selectedFile){this.loading=!0,this.errors=[],this.uploadProgress=0;try{const e=await new Promise((o,n)=>{const i=new FileReader;i.onload=r=>o(r.target.result),i.onerror=r=>n(r),i.readAsText(this.selectedFile)}),{nfeData:t,products:s}=this.parseNFeXML(e);this.nfeData=t,this.products=s,this.uploadProgress=100,this.loadAvailableClientsWithTimeout().then(()=>{console.log("Carregamento de clientes concluído")}).catch(()=>{console.log("Timeout no carregamento de clientes")}),this.showSuccess("XML processado com sucesso!")}catch(e){console.error("Erro ao processar XML:",e),e.message&&(e.message.includes("CNPJ do destinatário não encontrado")||e.message.includes("não possui acesso ao cliente")||e.message.includes("não autenticado"))?this.showError(e.message):this.showError("Erro ao processar arquivo XML: "+(e.message||"Erro desconhecido")),this.nfeData={},this.products=[],this.selectedFile=null}finally{this.loading=!1}}},parseNFeXML(e){var y,w,C,v,D,U,B,$,O;const s=new DOMParser().parseFromString(e,"text/xml"),o=s.querySelector("ide"),n=s.querySelector("emit"),i=s.querySelector("dest"),r=s.querySelector("vol"),l=s.querySelector("infNFe"),c=((y=l==null?void 0:l.getAttribute("Id"))==null?void 0:y.replace(/^NFe/,""))||"",d={number:((w=o==null?void 0:o.querySelector("nNF"))==null?void 0:w.textContent)||"",nfe_key:c,client_cnpj:((C=i==null?void 0:i.querySelector("CNPJ"))==null?void 0:C.textContent)||"",client_name:((v=i==null?void 0:i.querySelector("xNome"))==null?void 0:v.textContent)||"",supplier_cnpj:((D=n==null?void 0:n.querySelector("CNPJ"))==null?void 0:D.textContent)||"",supplier_name:((U=n==null?void 0:n.querySelector("xNome"))==null?void 0:U.textContent)||"",case_count:parseInt(((B=r==null?void 0:r.querySelector("qVol"))==null?void 0:B.textContent)||"0"),date:((O=($=o==null?void 0:o.querySelector("dhEmi"))==null?void 0:$.textContent)==null?void 0:O.slice(0,10))||"",qt_prod:0,products:[]},u=[];return s.querySelectorAll("det").forEach((H,ee)=>{var me,z,te,ae,L,ie,ye,je,ge;const Y=H.querySelector("prod");if(Y){const le=((me=Y.querySelector("cProd"))==null?void 0:me.textContent)||"",se=((z=Y.querySelector("xProd"))==null?void 0:z.textContent)||"";u.push({id:`product_${ee}_${Date.now()}`,item:((te=H.querySelector("nItem"))==null?void 0:te.textContent)||"",code:le,supplier_code:le,client_code:"",ean_code:((ae=Y.querySelector("cEAN"))==null?void 0:ae.textContent)||"",description:se,supplier_description:se,client_description:"",ncm:((L=Y.querySelector("NCM"))==null?void 0:L.textContent)||"",quantity:parseFloat(((ie=Y.querySelector("qCom"))==null?void 0:ie.textContent)||"0"),unit:((ye=Y.querySelector("uCom"))==null?void 0:ye.textContent)||"",unit_value:parseFloat(((je=Y.querySelector("vUnCom"))==null?void 0:je.textContent)||"0"),total_value:parseFloat(((ge=Y.querySelector("vProd"))==null?void 0:ge.textContent)||"0"),factor:1,isLocked:!1})}}),d.products=u,d.qt_prod=u.length,console.log("JSON resultante do parse do XML NFe:",JSON.stringify(d,null,2)),{nfeData:d,products:u}},async uploadAndParseXML(){this.showError("O parseamento do XML agora é feito no navegador. Use a nova função de upload.")},async checkExistingProducts(){if(!(!this.products.length||!this.selectedClient))try{console.log("🔍 Buscando pré-preenchimento para produtos...");const e=window.apiClient,t=this.products.map(o=>({supp_code:o.supplier_code||o.code,supp_cnpj:this.nfeData.supplier_cnpj})),s=await e.request("/products/batch-prefill",{method:"POST",data:{products:t,cliCnpj:this.selectedClient.cnpj.replace(/[^\d]/g,"")}});if(!s.success){console.error("Erro ao buscar pré-preenchimento:",s.message);return}console.log(`📊 Pré-preenchimento: ${s.summary.found} de ${s.summary.total} produtos encontrados`),s.data.forEach((o,n)=>{const i=this.products[n];if(console.log(`🔍 PRODUTO ${n+1}: ${o.supp_code}`),console.log(`   has_data: ${o.has_data}`),console.log(`   prefill_data: ${!!o.prefill_data}`),console.log("   client_code antes:",i.client_code),console.log("   client_description antes:",i.client_description),o.has_data&&o.prefill_data){const r=o.prefill_data;console.log(`✅ Pré-preenchendo produto: ${r.supp_code}`),i.client_code=r.cli_code,i.client_description=r.cli_desc,i.isLocked=r.is_locked,r.is_locked&&console.log(`🔒 Produto ${r.supp_code} bloqueado para alteração`)}else console.log("❌ Produto não encontrado - aplicando valores padrão"),i.isLocked=!1,i.factor=1,i.client_code="",i.client_description="",console.log("   client_code depois:",i.client_code),console.log("   client_description depois:",i.client_description)}),this.forceReactiveUpdate(),console.log("✅ Pré-preenchimento aplicado e interface atualizada")}catch(e){console.error("❌ Erro ao aplicar pré-preenchimento:",e),this.products.forEach(t=>{t.isLocked=!1,t.factor=1,t.client_code="",t.client_description=""}),this.forceReactiveUpdate()}},async checkExistingProductsWithTimeout(){const e=new Promise((t,s)=>setTimeout(()=>s(new Error("Timeout")),1e4));try{await Promise.race([this.checkExistingProducts(),e])}catch(t){console.warn("Timeout ou erro ao verificar produtos existentes:",t.message),this.products.forEach(s=>{s.exists===void 0&&(s.exists=!1,s.factor=1)})}},async loadClientsForModal(){this.loadingClients=!0;try{await this.loadAvailableClients()}catch(e){console.error("Erro ao carregar clientes para o modal:",e),this.showError("Erro ao carregar lista de estoques. Tente novamente.")}finally{this.loadingClients=!1}},async loadAvailableClients(){try{let s=(await window.apiClient.request("/clients",{method:"GET"})).data||[];s=s.filter(n=>n.cnpj);const o=this.getCurrentUser();if(console.log("DEBUG cli_access:",o==null?void 0:o.cli_access),console.log("DEBUG lista de clientes recebida:",s),o&&o.level_access!==0)if(o.cli_access){const n=Object.keys(o.cli_access).map(i=>i.replace(/[^\d]/g,""));s=s.filter(i=>{const r=(i.cnpj||"").replace(/[^\d]/g,"");return n.includes(r)}),console.log("DEBUG allowedCNPJs:",n),console.log("DEBUG lista de clientes após filtro:",s)}else s=[];if(this.clients=s,this.nfeData.client_cnpj){const n=this.nfeData.client_cnpj.replace(/[^\d]/g,""),i=this.clients.find(r=>r.cnpj?r.cnpj.replace(/[^\d]/g,"")===n:!1);i?(this.selectedClient=i,console.log("Cliente selecionado automaticamente:",i.name)):console.log("Cliente não encontrado na lista para CNPJ:",this.nfeData.client_cnpj)}}catch(e){console.error("Erro ao carregar clientes:",e)}},async loadAvailableClientsWithTimeout(){const e=new Promise((t,s)=>setTimeout(()=>s(new Error("Timeout")),8e3));try{await Promise.race([this.loadAvailableClients(),e])}catch(t){console.warn("Timeout ou erro ao carregar clientes:",t.message),(!this.clients||this.clients.length===0)&&console.log("Lista de clientes não carregada - usuário poderá selecionar manualmente")}},async nextStep(){if(this.currentStep===1&&this.canProceedToStep2)this.currentStep=2;else if(this.currentStep===2&&this.canProceedToStep3){this.loadingPrefill=!0;try{this.products.length>0&&this.selectedClient&&await this.checkExistingProducts(),this.currentStep=3}catch(e){console.error("Erro ao verificar produtos:",e),this.showError("Erro ao verificar produtos. Tente novamente.")}finally{this.loadingPrefill=!1}}},previousStep(){this.currentStep>1&&this.currentStep--},updateProduct(e){const t=this.products.findIndex(s=>s.id===e.id);t!==-1&&(this.products[t]={...this.products[t],...e})},forceReactiveUpdate(){this.products=[...this.products]},editProduct(e){this.selectedProduct=e,this.showProductEditModal=!0},closeProductEditModal(){this.showProductEditModal=!1,this.selectedProduct=null},async openClientSelectionModal(){this.showClientSelectionModal=!0,(!this.clients||this.clients.length===0)&&await this.loadClientsForModal()},closeClientSelectionModal(){this.showClientSelectionModal=!1},async selectClient(e){this.selectedClient=e,this.closeClientSelectionModal()},async createSchedule(){var l,c,d,u,h;if(!this.canCreateSchedule)return;const e=this.getCurrentUser();if(!e){this.showError("Usuário não autenticado. Faça login novamente.");return}if(e.level_access===void 0||e.level_access<0){this.showError("Usuário não autenticado. Faça login novamente.");return}this.loading=!0,this.errors=[];const t=localStorage.getItem("token");if(!t){this.showError("Token de autenticação não encontrado. Faça login novamente."),this.loading=!1;return}if(!this.nfeData.nfe_key){this.showError("Chave da NFe é obrigatória."),this.loading=!1;return}if(!this.selectedClient||!this.selectedClient.cnpj){this.showError("Estoque é obrigatório. Selecione um estoque para o agendamento."),this.loading=!1;return}if(!this.nfeData.date){this.showError("Data da NFe é obrigatória."),this.loading=!1;return}const s=this.selectedClient.cnpj.replace(/[^\d]/g,"");if(s.length!==14){this.showError("CNPJ do estoque selecionado deve ter exatamente 14 dígitos."),this.loading=!1;return}let o=this.nfeData.supplier_name||this.nfeData.supplier_cnpj||"";if(!o){this.showError("Dados do fornecedor são obrigatórios."),this.loading=!1;return}o.length>50&&(o=o.substring(0,50));const n=String(this.nfeData.number||"").trim();if(!n||!/^\d{1,10}$/.test(n)){this.showError("Número da NFe deve conter apenas dígitos e ter no máximo 10 caracteres."),this.loading=!1;return}const i=this.scheduledDate;if(!i){this.showError("Por favor, selecione a data desejada para entrega física."),this.loading=!1;return}if(!/^\d{4}-\d{2}-\d{2}$/.test(i)){this.showError("Data de entrega deve estar no formato YYYY-MM-DD."),this.loading=!1;return}console.log("Data de agendamento para envio:",i);const r={number:n,nfe_key:this.nfeData.nfe_key,client:s,case_count:parseInt(this.nfeData.case_count)||0,date:i,status:"Solicitado",supplier:o,qt_prod:parseInt(this.nfeData.qt_prod)||this.products.length,info:{...this.nfeData,products:this.products}};console.log("Enviando dados do agendamento:",r),console.log("Token presente:",!!t);try{const w=await window.apiClient.request("/schedules",{method:"POST",data:r});console.log("Agendamento criado com sucesso:",w),this.showSuccess("Agendamento criado com sucesso!"),this.$emit("created",w),setTimeout(()=>{this.closeModal()},1500)}catch(y){if(console.error("Erro ao criar agendamento:",y),console.error("Resposta da API:",(l=y.response)==null?void 0:l.data),((c=y.response)==null?void 0:c.status)===403)this.showError("Acesso negado. Usuário não possui permissão para criar agendamentos.");else if(((d=y.response)==null?void 0:d.status)===401)this.showError("Token de autenticação inválido. Faça login novamente."),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="login.html";else if(((u=y.response)==null?void 0:u.status)===400){const w=(h=y.response)==null?void 0:h.data;let C=(w==null?void 0:w.error)||"Dados inválidos enviados para a API.";if(w!=null&&w.details&&Array.isArray(w.details)){const v=w.details.map(D=>typeof D=="string"?D:D.message?D.message:D.path?`Campo ${D.path}: ${D.message||"inválido"}`:JSON.stringify(D)).join(", ");C+=`. Detalhes: ${v}`}this.showError("Erro de validação: "+C),console.error("Dados enviados que causaram erro:",r),console.error("Resposta completa da API:",w),console.error("Detalhes do erro (expandido):",JSON.stringify(w.details,null,2))}else this.showError("Erro ao criar agendamento: "+(y.message||"Erro desconhecido"))}finally{this.loading=!1}},getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},async validateClientAccess(e){const t=this.getCurrentUser();if(!t)throw new Error("Usuário não autenticado");if(t.level_access===0||t.cli_access&&t.cli_access[e])return!0;throw new Error(`Usuário ${t.user} não possui acesso ao cliente com CNPJ ${e}`)},showError(e){this.errors.push(e)},showSuccess(e){console.log("Sucesso:",e)},removeError(e){this.errors.splice(e,1)},formatCurrency(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},formatCNPJ(e){return e?e.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5"):""},handleModalClick(e){e.stopPropagation()}}},Rh={class:"modal-content large schedule-creation-modal"},Mh={class:"modal-header"},Oh={class:"progress-steps"},Lh={key:0,class:"error-container"},Uh=["onClick"],Ih={key:1,class:"loading-container"},qh={key:0,class:"progress-bar"},jh={key:2,class:"loading-container prefill-loading"},Bh={key:3,class:"modal-body"},$h={class:"upload-section"},Vh={key:0,class:"file-info"},Hh={class:"file-size"},zh={key:4,class:"modal-body"},Jh={class:"nfe-info"},Kh={class:"info-grid"},Wh={class:"info-item"},Gh={class:"info-item"},Xh={class:"info-item"},Yh={class:"info-item"},Qh={class:"info-item"},Zh={class:"info-item"},ep={class:"info-item"},tp={class:"info-item"},sp={class:"estoque-data-container"},np={class:"client-selection"},op={key:0,class:"selected-client-info"},ip={class:"info-item"},rp={class:"info-item"},ap={key:0,class:"info-item"},lp={key:1},cp={class:"delivery-date-selection mt-3"},dp={class:"date-input-container"},up=["min"],fp={class:"modal-content small"},hp={class:"modal-header"},pp={class:"modal-body"},mp={key:0,class:"loading-clients-container"},gp={key:1,class:"estoque-lista-vertical"},bp={class:"estoque-lista-info"},yp={class:"estoque-nome"},vp={class:"estoque-cnpj"},Sp={key:0,class:"estoque-numero"},Cp=["onClick"],wp={key:0,class:"text-muted estoque-lista-vazia"},_p={key:6,class:"modal-body"},Ep={class:"products-section"},Ap={class:"products-table-container"},Dp={class:"products-table"},kp=["title"],Tp={key:0,class:"fas fa-lock product-lock-icon",title:"Produto já cadastrado - campos bloqueados"},Pp=["onUpdate:modelValue","disabled","onChange"],xp=["title"],Np=["onUpdate:modelValue","disabled","onChange"],Fp=["onUpdate:modelValue","onChange"],Rp=["onUpdate:modelValue","onChange"],Mp={class:"modal-footer"},Op=["disabled"],Lp=["disabled"],Up=["disabled"];function Ip(e,t,s,o,n,i){const r=Ue("product-edit-modal");return s.showModal?(m(),g("div",{key:0,class:"modal-overlay",onClick:t[13]||(t[13]=(...l)=>i.handleModalClick&&i.handleModalClick(...l))},[a("div",Rh,[a("div",Mh,[t[15]||(t[15]=a("h3",null,[a("i",{class:"fas fa-plus-circle"}),N(" Criar Novo Agendamento ")],-1)),a("button",{class:"btn-close",onClick:t[0]||(t[0]=(...l)=>i.closeModal&&i.closeModal(...l))},t[14]||(t[14]=[a("i",{class:"fas fa-times"},null,-1)]))]),a("div",Oh,[a("div",{class:Q(["step",i.stepClasses[1]])},t[16]||(t[16]=[a("div",{class:"step-number"},"1",-1),a("div",{class:"step-label"},"Upload XML",-1)]),2),a("div",{class:Q(["step",i.stepClasses[2]])},t[17]||(t[17]=[a("div",{class:"step-number"},"2",-1),a("div",{class:"step-label"},"Informações",-1)]),2),a("div",{class:Q(["step",i.stepClasses[3]])},t[18]||(t[18]=[a("div",{class:"step-number"},"3",-1),a("div",{class:"step-label"},"Produtos",-1)]),2)]),n.errors.length>0?(m(),g("div",Lh,[(m(!0),g(W,null,pe(n.errors,(l,c)=>(m(),g("div",{key:c,class:"error-message"},[t[20]||(t[20]=a("i",{class:"fas fa-exclamation-triangle"},null,-1)),N(" "+_(l)+" ",1),a("button",{onClick:d=>i.removeError(c),class:"btn-close-error"},t[19]||(t[19]=[a("i",{class:"fas fa-times"},null,-1)]),8,Uh)]))),128))])):M("",!0),n.loading?(m(),g("div",Ih,[t[21]||(t[21]=a("i",{class:"fas fa-spinner fa-spin"},null,-1)),t[22]||(t[22]=a("p",null,"Processando...",-1)),n.uploadProgress>0?(m(),g("div",qh,[a("div",{class:"progress-fill",style:en({width:n.uploadProgress+"%"})},null,4)])):M("",!0)])):M("",!0),n.loadingPrefill?(m(),g("div",jh,t[23]||(t[23]=[cs('<div class="prefill-spinner" data-v-8fcd1dbc><i class="fas fa-sync-alt fa-spin" data-v-8fcd1dbc></i></div><h3 class="prefill-title" data-v-8fcd1dbc>Verificando Produtos</h3><p class="prefill-message" data-v-8fcd1dbc>Consultando produtos já cadastrados e aplicando pré-preenchimento...</p><div class="prefill-progress" data-v-8fcd1dbc><div class="prefill-dots" data-v-8fcd1dbc><span data-v-8fcd1dbc></span><span data-v-8fcd1dbc></span><span data-v-8fcd1dbc></span></div></div><small class="prefill-help" data-v-8fcd1dbc><i class="fas fa-info-circle" data-v-8fcd1dbc></i> Produtos já cadastrados serão pré-preenchidos e bloqueados para alteração </small>',5)]))):M("",!0),n.currentStep===1&&!n.loading&&!n.loadingPrefill?(m(),g("div",Bh,[a("div",$h,[a("div",{class:"upload-area",onDrop:t[2]||(t[2]=(...l)=>i.handleDrop&&i.handleDrop(...l)),onDragover:t[3]||(t[3]=ts(()=>{},["prevent"])),onDragenter:t[4]||(t[4]=ts(()=>{},["prevent"]))},[t[24]||(t[24]=a("i",{class:"fas fa-upload"},null,-1)),t[25]||(t[25]=a("h4",null,"Arraste o arquivo XML da NFe aqui",-1)),t[26]||(t[26]=a("p",null,"ou clique para selecionar",-1)),a("input",{type:"file",accept:".xml",onChange:t[1]||(t[1]=(...l)=>i.handleFileSelect&&i.handleFileSelect(...l)),id:"xml-file-input",style:{display:"none"}},null,32),t[27]||(t[27]=a("label",{for:"xml-file-input",class:"btn btn-primary"},[a("i",{class:"fas fa-folder-open"}),N(" Selecionar Arquivo ")],-1))],32),n.selectedFile?(m(),g("div",Vh,[t[28]||(t[28]=a("i",{class:"fas fa-file-code"},null,-1)),a("span",null,_(n.selectedFile.name),1),a("span",Hh,"("+_((n.selectedFile.size/1024).toFixed(1))+" KB)",1)])):M("",!0)])])):M("",!0),n.currentStep===2&&!n.loading&&!n.loadingPrefill?(m(),g("div",zh,[a("div",Jh,[t[47]||(t[47]=a("h4",null,"Informações da NFe",-1)),a("div",Kh,[a("div",Wh,[t[29]||(t[29]=a("label",null,"Número da NFe:",-1)),a("span",null,_(n.nfeData.number),1)]),a("div",Gh,[t[30]||(t[30]=a("label",null,"Fornecedor:",-1)),a("span",null,_(n.nfeData.supplier_name),1)]),a("div",Xh,[t[31]||(t[31]=a("label",null,"CNPJ Fornecedor:",-1)),a("span",null,_(i.formatCNPJ(n.nfeData.supplier_cnpj)),1)]),a("div",Yh,[t[32]||(t[32]=a("label",null,"Destinatário:",-1)),a("span",null,_(n.nfeData.client_name),1)]),a("div",Qh,[t[33]||(t[33]=a("label",null,"CNPJ Destinatário:",-1)),a("span",null,_(i.formatCNPJ(n.nfeData.client_cnpj)),1)]),a("div",Zh,[t[34]||(t[34]=a("label",null,"Volumes:",-1)),a("span",null,_(n.nfeData.case_count),1)]),a("div",ep,[t[35]||(t[35]=a("label",null,"Qtd. Total Produtos:",-1)),a("span",null,_(i.totalQuantity),1)]),a("div",tp,[t[36]||(t[36]=a("label",null,"Valor Total:",-1)),a("span",null,_(i.formatCurrency(i.totalValue)),1)])]),a("div",sp,[a("div",np,[t[43]||(t[43]=a("h5",null,"Estoque Selecionado",-1)),n.selectedClient?(m(),g("div",op,[a("div",ip,[t[37]||(t[37]=a("label",null,"Nome:",-1)),a("span",null,_(n.selectedClient.name),1)]),a("div",rp,[t[38]||(t[38]=a("label",null,"CNPJ:",-1)),a("span",null,_(i.formatCNPJ(n.selectedClient.cnpj)),1)]),n.selectedClient.numero?(m(),g("div",ap,[t[39]||(t[39]=a("label",null,"Número:",-1)),a("span",null,_(n.selectedClient.numero),1)])):M("",!0),a("button",{type:"button",class:"btn btn-outline-primary btn-sm mt-2 btn-alterar-estoque",onClick:t[5]||(t[5]=(...l)=>i.openClientSelectionModal&&i.openClientSelectionModal(...l))},t[40]||(t[40]=[a("i",{class:"fas fa-edit"},null,-1),N(" Alterar Estoque ")]))])):(m(),g("div",lp,[a("button",{type:"button",class:"btn btn-primary btn-alterar-estoque",onClick:t[6]||(t[6]=(...l)=>i.openClientSelectionModal&&i.openClientSelectionModal(...l))},t[41]||(t[41]=[a("i",{class:"fas fa-warehouse"},null,-1),N(" Selecionar Estoque ")])),t[42]||(t[42]=a("small",{class:"text-muted d-block mt-2"},"Clique para escolher o estoque de destino",-1))]))]),a("div",cp,[t[46]||(t[46]=a("h5",null,"Data de Entrega Desejada",-1)),a("div",dp,[t[44]||(t[44]=a("label",{for:"scheduledDate"},"Selecione a data para entrega física:",-1)),X(a("input",{type:"date",id:"scheduledDate","onUpdate:modelValue":t[7]||(t[7]=l=>n.scheduledDate=l),class:"form-control",min:new Date().toISOString().split("T")[0],required:""},null,8,up),[[ue,n.scheduledDate]]),t[45]||(t[45]=a("small",{class:"help-text"},"Esta será a data para agendamento da entrega física das mercadorias",-1))])])])])])):M("",!0),n.showClientSelectionModal?(m(),g("div",{key:5,class:"modal-overlay",onClick:t[9]||(t[9]=ts((...l)=>i.closeClientSelectionModal&&i.closeClientSelectionModal(...l),["self"]))},[a("div",fp,[a("div",hp,[t[49]||(t[49]=a("h4",null,"Selecione o Estoque",-1)),a("button",{class:"btn-close",onClick:t[8]||(t[8]=(...l)=>i.closeClientSelectionModal&&i.closeClientSelectionModal(...l))},t[48]||(t[48]=[a("i",{class:"fas fa-times"},null,-1)]))]),a("div",pp,[n.loadingClients?(m(),g("div",mp,t[50]||(t[50]=[a("div",{class:"loading-spinner"},[a("i",{class:"fas fa-spinner fa-spin"})],-1),a("p",{class:"loading-text"},"Carregando opções de estoque...",-1),a("small",{class:"loading-subtext"},"Processando permissões e estoques disponíveis",-1)]))):(m(),g("div",gp,[(m(!0),g(W,null,pe(n.clients,l=>(m(),g("div",{key:l.cnpj,class:"estoque-lista-item"},[a("div",bp,[t[51]||(t[51]=a("i",{class:"fas fa-warehouse"},null,-1)),a("span",yp,_(l.name),1),a("span",vp,"CNPJ: "+_(i.formatCNPJ(l.cnpj)),1),l.numero?(m(),g("span",Sp,"Nº: "+_(l.numero),1)):M("",!0)]),a("button",{class:"btn btn-primary btn-sm btn-selecionar-estoque",onClick:ts(c=>i.selectClient(l),["stop"])}," Selecionar ",8,Cp)]))),128)),n.clients.length===0?(m(),g("div",wp,t[52]||(t[52]=[a("i",{class:"fas fa-info-circle"},null,-1),N(" Nenhum estoque disponível para seu usuário. ")]))):M("",!0)]))])])])):M("",!0),n.currentStep===3&&!n.loading&&!n.loadingPrefill?(m(),g("div",_p,[a("div",Ep,[t[54]||(t[54]=a("h4",null,"Produtos da NFe",-1)),a("div",Ap,[a("table",Dp,[t[53]||(t[53]=a("thead",null,[a("tr",null,[a("th",null,"Cód. Forn."),a("th",null,[N(" Cód. Venda "),a("i",{class:"fas fa-edit",title:"Editável"})]),a("th",null,"Descrição Fornecedor"),a("th",null,[N(" Descrição Venda "),a("i",{class:"fas fa-edit",title:"Editável"})]),a("th",null,"Quant."),a("th",null,[N(" Fator "),a("i",{class:"fas fa-question-circle",title:"Fator de conversão"})]),a("th",null,"Valor Un."),a("th",null,"Valor Total"),a("th",null,[N(" Código EAN "),a("i",{class:"fas fa-edit",title:"Editável"})])])],-1)),a("tbody",null,[(m(!0),g(W,null,pe(n.products,l=>(m(),g("tr",{key:l.id,class:Q({"product-locked":l.isLocked})},[a("td",{title:l.supplier_code},[a("strong",null,_(l.supplier_code),1),l.isLocked?(m(),g("i",Tp)):M("",!0)],8,kp),a("td",null,[X(a("input",{"onUpdate:modelValue":c=>l.client_code=c,disabled:l.isLocked,onChange:c=>i.updateProduct(l),class:"form-control form-control-sm"},null,40,Pp),[[ue,l.client_code]])]),a("td",{title:l.supplier_description,class:"description-cell"},_(l.supplier_description),9,xp),a("td",null,[X(a("input",{"onUpdate:modelValue":c=>l.client_description=c,disabled:l.isLocked,onChange:c=>i.updateProduct(l),class:"form-control form-control-sm"},null,40,Np),[[ue,l.client_description]])]),a("td",null,_(l.quantity)+" "+_(l.unit),1),a("td",null,[X(a("input",{"onUpdate:modelValue":c=>l.factor=c,type:"number",step:"0.01",onChange:c=>i.updateProduct(l),class:"form-control form-control-sm"},null,40,Fp),[[ue,l.factor]])]),a("td",null,_(i.formatCurrency(l.unit_value)),1),a("td",null,_(i.formatCurrency(l.total_value)),1),a("td",null,[X(a("input",{"onUpdate:modelValue":c=>l.ean_code=c,onChange:c=>i.updateProduct(l),class:"form-control form-control-sm",placeholder:"Código EAN"},null,40,Rp),[[ue,l.ean_code]])])],2))),128))])])])])])):M("",!0),a("div",Mp,[n.currentStep>1?(m(),g("button",{key:0,onClick:t[10]||(t[10]=(...l)=>i.previousStep&&i.previousStep(...l)),disabled:n.loadingPrefill,class:"btn btn-secondary"},t[55]||(t[55]=[a("i",{class:"fas fa-arrow-left"},null,-1),N(" Anterior ")]),8,Op)):M("",!0),n.currentStep<3?(m(),g("button",{key:1,onClick:t[11]||(t[11]=(...l)=>i.nextStep&&i.nextStep(...l)),disabled:n.currentStep===1&&!i.canProceedToStep2||n.currentStep===2&&!i.canProceedToStep3||n.loadingPrefill,class:"btn btn-primary"},[n.loadingPrefill?(m(),g(W,{key:0},[t[56]||(t[56]=a("i",{class:"fas fa-spinner fa-spin"},null,-1)),t[57]||(t[57]=N(" Verificando... "))],64)):(m(),g(W,{key:1},[t[58]||(t[58]=N(" Próximo ")),t[59]||(t[59]=a("i",{class:"fas fa-arrow-right"},null,-1))],64))],8,Lp)):M("",!0),n.currentStep===3?(m(),g("button",{key:2,onClick:t[12]||(t[12]=(...l)=>i.createSchedule&&i.createSchedule(...l)),disabled:!i.canCreateSchedule||n.loading,class:"btn btn-success"},t[60]||(t[60]=[a("i",{class:"fas fa-check"},null,-1),N(" Efetivar Agendamento ")]),8,Up)):M("",!0)]),n.showProductEditModal?(m(),Tt(r,{key:7,product:n.selectedProduct,"show-modal":n.showProductEditModal,onClose:i.closeProductEditModal,onUpdated:i.updateProduct},null,8,["product","show-modal","onClose","onUpdated"])):M("",!0)])])):M("",!0)}const qp=qe(Fh,[["render",Ip],["__scopeId","data-v-8fcd1dbc"]]),jp={name:"SettingsPage",data(){return{loadingSettings:!1,emailSettings:{primaryEmail:"",ccEmails:[],statusNotifications:{solicitado:!0,contestado:!0,agendado:!0,conferencia:!0,tratativa:!0,estoque:!0,recusado:!0,cancelado:!0}},newCcEmail:"",savingEmailSettings:!1,passwordForm:{currentPassword:"",newPassword:"",confirmPassword:""},passwordErrors:{currentPassword:"",newPassword:"",confirmPassword:""},changingPassword:!1,statusList:[{key:"solicitado",label:"Solicitado",class:"status-warning"},{key:"contestado",label:"Contestado",class:"status-contestado"},{key:"agendado",label:"Agendado",class:"status-primary"},{key:"conferencia",label:"Conferência",class:"status-success"},{key:"tratativa",label:"Tratativa",class:"status-danger"},{key:"estoque",label:"Estoque",class:"status-success"},{key:"recusado",label:"Recusado",class:"status-dark"},{key:"cancelado",label:"Cancelado",class:"status-secondary"}]}},async mounted(){await this.loadUserSettings()},computed:{allStatusNotificationsEnabled(){return Object.values(this.emailSettings.statusNotifications).every(e=>e)},isPasswordFormValid(){return this.passwordForm.currentPassword.trim()&&this.passwordForm.newPassword.trim()&&this.passwordForm.confirmPassword.trim()&&this.passwordForm.newPassword.length>=6&&this.passwordForm.newPassword===this.passwordForm.confirmPassword&&!this.passwordErrors.currentPassword&&!this.passwordErrors.newPassword&&!this.passwordErrors.confirmPassword}},methods:{async loadUserSettings(){this.loadingSettings=!0;try{const t=await window.apiClient.getUserSettings();t.settings&&(this.emailSettings={...this.emailSettings,...t.settings.emailSettings}),console.log("Configurações carregadas:",t.settings)}catch(e){console.error("Erro ao carregar configurações:",e),this.$emit("notification","Erro ao carregar configurações","error")}finally{this.loadingSettings=!1}},async testEmailSettings(){if(!this.emailSettings.primaryEmail){this.$emit("notification","E-mail principal é obrigatório para testar","warning");return}try{console.log("📧 Testando e-mail..."),console.log("   E-mail principal:",this.emailSettings.primaryEmail),console.log("   E-mails CC:",this.emailSettings.ccEmails);const e=[this.emailSettings.primaryEmail];this.emailSettings.ccEmails&&this.emailSettings.ccEmails.length>0&&e.push(...this.emailSettings.ccEmails),console.log("   Enviando para:",e.join(", "));const s=await window.apiClient.testEmailDirect(e);console.log("✅ Resposta do teste:",s),this.$emit("notification",`E-mail de teste enviado com sucesso para: ${s.recipients.join(", ")}`,"success")}catch(e){console.error("❌ Erro ao testar e-mail:",e),this.$emit("notification","Erro ao testar e-mail: "+(e.message||"Erro desconhecido"),"error")}},addCcEmail(){this.newCcEmail.trim()&&!this.emailSettings.ccEmails.includes(this.newCcEmail.trim())?(this.emailSettings.ccEmails.push(this.newCcEmail.trim()),this.newCcEmail="",this.$emit("notification","E-mail CC adicionado!","success")):this.emailSettings.ccEmails.includes(this.newCcEmail.trim())&&this.$emit("notification","Este e-mail já está na lista","warning")},removeCcEmail(e){this.emailSettings.ccEmails.splice(e,1),this.$emit("notification","E-mail CC removido!","success")},async saveEmailSettings(){var e,t;this.savingEmailSettings=!0;try{this.$emit("notification","Salvando configurações de e-mail...","info");const o=await window.apiClient.updateEmailSettings(this.emailSettings);this.$emit("notification",o.message||"Configurações de e-mail salvas com sucesso!","success")}catch(s){console.error("Erro ao salvar configurações:",s),this.$emit("notification",((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.error)||"Erro ao salvar configurações","error")}finally{this.savingEmailSettings=!1}},toggleAllStatusNotifications(e){const t=e.target.checked;Object.keys(this.emailSettings.statusNotifications).forEach(s=>{this.emailSettings.statusNotifications[s]=t})},validatePasswordForm(){return this.passwordErrors={currentPassword:"",newPassword:"",confirmPassword:""},this.passwordForm.currentPassword.trim()||(this.passwordErrors.currentPassword="Senha atual é obrigatória"),this.passwordForm.newPassword.trim()?this.passwordForm.newPassword.length<6&&(this.passwordErrors.newPassword="Nova senha deve ter pelo menos 6 caracteres"):this.passwordErrors.newPassword="Nova senha é obrigatória",this.passwordForm.confirmPassword.trim()?this.passwordForm.newPassword!==this.passwordForm.confirmPassword&&(this.passwordErrors.confirmPassword="Senhas não coincidem"):this.passwordErrors.confirmPassword="Confirmação de senha é obrigatória",!Object.values(this.passwordErrors).some(e=>e)},async changePassword(){if(this.validatePasswordForm()){this.changingPassword=!0;try{this.$emit("notification","Alterando senha...","info");const t=await window.apiClient.updateProfile({password:this.passwordForm.newPassword,currentPassword:this.passwordForm.currentPassword});this.$emit("notification","Senha alterada com sucesso!","success"),this.resetPasswordForm()}catch(e){console.error("Erro ao alterar senha:",e);let t="Erro ao alterar senha";e.message&&e.message.includes("401")?(t="Senha atual incorreta",this.passwordErrors.currentPassword="Senha atual incorreta"):e.message&&e.message.includes("400")?t="Dados inválidos":t=e.message||"Erro desconhecido",this.$emit("notification",t,"error")}finally{this.changingPassword=!1}}},resetPasswordForm(){this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},this.passwordErrors={currentPassword:"",newPassword:"",confirmPassword:""},this.$emit("notification","Formulário de senha limpo","info")}}},Bp={class:"settings-page"},$p={class:"settings-container"},Vp={class:"settings-card"},Hp={class:"email-settings-content"},zp={class:"setting-group"},Jp={class:"setting-control"},Kp={class:"setting-group"},Wp={class:"add-email-section"},Gp={class:"add-email-controls"},Xp=["disabled"],Yp={key:0,class:"cc-emails-list"},Qp={class:"email-info"},Zp={class:"email-address"},em=["onClick"],tm={class:"setting-group"},sm={class:"master-toggle-section"},nm={class:"toggle-switch master-toggle"},om=["checked"],im={class:"status-notifications-grid"},rm={class:"status-info"},am={class:"status-details"},lm={class:"status-name"},cm={class:"toggle-switch"},dm=["onUpdate:modelValue"],um={class:"email-actions"},fm=["disabled"],hm=["disabled"],pm={class:"settings-card"},mm={class:"password-settings-content"},gm={class:"setting-group"},bm={class:"setting-control"},ym={key:0,class:"error-message"},vm={class:"setting-group"},Sm={class:"setting-control"},Cm={key:0,class:"error-message"},wm={class:"setting-group"},_m={class:"setting-control"},Em={key:0,class:"error-message"},Am={class:"password-actions"},Dm=["disabled"],km=["disabled"];function Tm(e,t,s,o,n,i){return m(),g("div",Bp,[t[30]||(t[30]=cs('<div class="page-header" data-v-459f2459><div class="header-content" data-v-459f2459><div class="header-info" data-v-459f2459><h1 class="page-title" data-v-459f2459><i class="fas fa-cog" data-v-459f2459></i> Configurações do Sistema </h1><p class="page-description" data-v-459f2459> Configure e-mail e notificações do sistema </p></div></div></div>',1)),a("div",$p,[a("div",Vp,[t[23]||(t[23]=cs('<div class="card-header" data-v-459f2459><div class="header-left" data-v-459f2459><h2 class="section-title" data-v-459f2459><i class="fas fa-envelope" data-v-459f2459></i> Configurações de E-mail </h2><p class="section-subtitle" data-v-459f2459>Configure notificações e destinatários de e-mail</p></div></div>',1)),a("div",Hp,[a("div",zp,[t[12]||(t[12]=a("div",{class:"setting-header"},[a("h3",{class:"setting-title"},[a("i",{class:"fas fa-at"}),N(" E-mail Principal ")]),a("p",{class:"setting-description"},"E-mail principal para notificações do sistema")],-1)),a("div",Jp,[X(a("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=r=>n.emailSettings.primaryEmail=r),placeholder:"admin@empresa.com",class:"form-input email-input"},null,512),[[ue,n.emailSettings.primaryEmail]])])]),a("div",Kp,[t[16]||(t[16]=a("div",{class:"setting-header"},[a("h3",{class:"setting-title"},[a("i",{class:"fas fa-copy"}),N(" E-mails para Cópia (CC) ")]),a("p",{class:"setting-description"},"Adicione e-mails que devem receber cópia das notificações")],-1)),a("div",Wp,[a("div",Gp,[X(a("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=r=>n.newCcEmail=r),placeholder:"novo.email@empresa.com",class:"form-input add-email-input",onKeyup:t[2]||(t[2]=Ic((...r)=>i.addCcEmail&&i.addCcEmail(...r),["enter"]))},null,544),[[ue,n.newCcEmail]]),a("button",{type:"button",onClick:t[3]||(t[3]=(...r)=>i.addCcEmail&&i.addCcEmail(...r)),class:"btn btn-primary",disabled:!n.newCcEmail.trim()},t[13]||(t[13]=[a("i",{class:"fas fa-plus"},null,-1),N(" Adicionar ")]),8,Xp)])]),n.emailSettings.ccEmails.length?(m(),g("div",Yp,[(m(!0),g(W,null,pe(n.emailSettings.ccEmails,(r,l)=>(m(),g("div",{key:l,class:"cc-email-item"},[a("div",Qp,[t[14]||(t[14]=a("i",{class:"fas fa-envelope"},null,-1)),a("span",Zp,_(r),1)]),a("button",{type:"button",onClick:c=>i.removeCcEmail(l),class:"btn btn-sm btn-outline-danger",title:"Remover e-mail"},t[15]||(t[15]=[a("i",{class:"fas fa-times"},null,-1)]),8,em)]))),128))])):M("",!0)]),a("div",tm,[t[20]||(t[20]=a("div",{class:"setting-header"},[a("h3",{class:"setting-title"},[a("i",{class:"fas fa-list-check"}),N(" Notificações por Status ")]),a("p",{class:"setting-description"},"Configure quais mudanças de status devem gerar e-mails com a notificação")],-1)),a("div",sm,[a("label",nm,[a("input",{type:"checkbox",checked:i.allStatusNotificationsEnabled,onChange:t[4]||(t[4]=(...r)=>i.toggleAllStatusNotifications&&i.toggleAllStatusNotifications(...r))},null,40,om),t[17]||(t[17]=a("span",{class:"toggle-slider"},null,-1)),t[18]||(t[18]=a("span",{class:"toggle-label"},"Ativar Todos os Status",-1))])]),a("div",im,[(m(!0),g(W,null,pe(n.statusList,r=>(m(),g("div",{key:r.key,class:"status-notification-item"},[a("div",rm,[a("div",{class:Q(["status-indicator",r.class])},null,2),a("div",am,[a("h4",lm,_(r.label),1)])]),a("label",cm,[X(a("input",{type:"checkbox","onUpdate:modelValue":l=>n.emailSettings.statusNotifications[r.key]=l},null,8,dm),[[po,n.emailSettings.statusNotifications[r.key]]]),t[19]||(t[19]=a("span",{class:"toggle-slider"},null,-1))])]))),128))])]),a("div",um,[a("button",{onClick:t[5]||(t[5]=(...r)=>i.testEmailSettings&&i.testEmailSettings(...r)),class:"btn btn-outline-primary",disabled:!n.emailSettings.primaryEmail},t[21]||(t[21]=[a("i",{class:"fas fa-paper-plane"},null,-1),N(" Testar E-mail ")]),8,fm),a("button",{onClick:t[6]||(t[6]=(...r)=>i.saveEmailSettings&&i.saveEmailSettings(...r)),class:"btn btn-success",disabled:n.savingEmailSettings},[t[22]||(t[22]=a("i",{class:"fas fa-save"},null,-1)),N(" "+_(n.savingEmailSettings?"Salvando...":"Salvar Configurações"),1)],8,hm)])])]),a("div",pm,[t[29]||(t[29]=cs('<div class="card-header" data-v-459f2459><div class="header-left" data-v-459f2459><h2 class="section-title" data-v-459f2459><i class="fas fa-key" data-v-459f2459></i> Alteração de Senha </h2><p class="section-subtitle" data-v-459f2459>Altere sua senha de acesso ao sistema</p></div></div>',1)),a("div",mm,[a("div",gm,[t[24]||(t[24]=a("div",{class:"setting-header"},[a("h3",{class:"setting-title"},[a("i",{class:"fas fa-lock"}),N(" Senha Atual ")]),a("p",{class:"setting-description"},"Digite sua senha atual para confirmar a alteração")],-1)),a("div",bm,[X(a("input",{type:"password","onUpdate:modelValue":t[7]||(t[7]=r=>n.passwordForm.currentPassword=r),placeholder:"Digite sua senha atual",class:Q(["form-input password-input",{"input-error":n.passwordErrors.currentPassword}])},null,2),[[ue,n.passwordForm.currentPassword]]),n.passwordErrors.currentPassword?(m(),g("div",ym,_(n.passwordErrors.currentPassword),1)):M("",!0)])]),a("div",vm,[t[25]||(t[25]=a("div",{class:"setting-header"},[a("h3",{class:"setting-title"},[a("i",{class:"fas fa-key"}),N(" Nova Senha ")]),a("p",{class:"setting-description"},"Digite a nova senha (mínimo 6 caracteres)")],-1)),a("div",Sm,[X(a("input",{type:"password","onUpdate:modelValue":t[8]||(t[8]=r=>n.passwordForm.newPassword=r),placeholder:"Digite a nova senha",class:Q(["form-input password-input",{"input-error":n.passwordErrors.newPassword}])},null,2),[[ue,n.passwordForm.newPassword]]),n.passwordErrors.newPassword?(m(),g("div",Cm,_(n.passwordErrors.newPassword),1)):M("",!0)])]),a("div",wm,[t[26]||(t[26]=a("div",{class:"setting-header"},[a("h3",{class:"setting-title"},[a("i",{class:"fas fa-check-circle"}),N(" Confirmar Nova Senha ")]),a("p",{class:"setting-description"},"Digite novamente a nova senha para confirmar")],-1)),a("div",_m,[X(a("input",{type:"password","onUpdate:modelValue":t[9]||(t[9]=r=>n.passwordForm.confirmPassword=r),placeholder:"Confirme a nova senha",class:Q(["form-input password-input",{"input-error":n.passwordErrors.confirmPassword}])},null,2),[[ue,n.passwordForm.confirmPassword]]),n.passwordErrors.confirmPassword?(m(),g("div",Em,_(n.passwordErrors.confirmPassword),1)):M("",!0)])]),a("div",Am,[a("button",{onClick:t[10]||(t[10]=(...r)=>i.resetPasswordForm&&i.resetPasswordForm(...r)),class:"btn btn-outline-secondary",disabled:n.changingPassword},t[27]||(t[27]=[a("i",{class:"fas fa-times"},null,-1),N(" Cancelar ")]),8,Dm),a("button",{onClick:t[11]||(t[11]=(...r)=>i.changePassword&&i.changePassword(...r)),class:"btn btn-primary",disabled:n.changingPassword||!i.isPasswordFormValid},[t[28]||(t[28]=a("i",{class:"fas fa-save"},null,-1)),N(" "+_(n.changingPassword?"Alterando...":"Alterar Senha"),1)],8,km)])])])])])}const Pm=qe(jp,[["render",Tm],["__scopeId","data-v-459f2459"]]);function Vn(e){var s;const t=localStorage.getItem("user");if(!t)return!1;try{const o=JSON.parse(t);return o.level_access===0?!0:((s={create_schedule:[0,1,2,3],manage_users:[0,2],view_reports:[0,2,3],system_config:[0]}[e])==null?void 0:s.includes(o.level_access))||!1}catch(o){return console.error("Erro ao verificar permissão:",o),!1}}function Hn(e){const t=localStorage.getItem("user");if(!t)return!1;try{return JSON.parse(t).level_access<=e}catch(s){return console.error("Erro ao verificar nível do usuário:",s),!1}}function xm(e){return{0:"Desenvolvedor",1:"Usuário",2:"Administrador",3:"Gerente"}[e]||"Usuário"}typeof window<"u"&&(window.checkPermission=Vn,window.checkUserLevel=Hn,window.getLevelName=xm);function Mr(e,t){return function(){return e.apply(t,arguments)}}const{toString:Nm}=Object.prototype,{getPrototypeOf:mo}=Object,{iterator:ln,toStringTag:Or}=Symbol,cn=(e=>t=>{const s=Nm.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Je=e=>(e=e.toLowerCase(),t=>cn(t)===e),dn=e=>t=>typeof t===e,{isArray:zt}=Array,bs=dn("undefined");function Fm(e){return e!==null&&!bs(e)&&e.constructor!==null&&!bs(e.constructor)&&Re(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Lr=Je("ArrayBuffer");function Rm(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Lr(e.buffer),t}const Mm=dn("string"),Re=dn("function"),Ur=dn("number"),un=e=>e!==null&&typeof e=="object",Om=e=>e===!0||e===!1,Os=e=>{if(cn(e)!=="object")return!1;const t=mo(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Or in e)&&!(ln in e)},Lm=Je("Date"),Um=Je("File"),Im=Je("Blob"),qm=Je("FileList"),jm=e=>un(e)&&Re(e.pipe),Bm=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Re(e.append)&&((t=cn(e))==="formdata"||t==="object"&&Re(e.toString)&&e.toString()==="[object FormData]"))},$m=Je("URLSearchParams"),[Vm,Hm,zm,Jm]=["ReadableStream","Request","Response","Headers"].map(Je),Km=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ws(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let o,n;if(typeof e!="object"&&(e=[e]),zt(e))for(o=0,n=e.length;o<n;o++)t.call(null,e[o],o,e);else{const i=s?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let l;for(o=0;o<r;o++)l=i[o],t.call(null,e[l],l,e)}}function Ir(e,t){t=t.toLowerCase();const s=Object.keys(e);let o=s.length,n;for(;o-- >0;)if(n=s[o],t===n.toLowerCase())return n;return null}const At=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qr=e=>!bs(e)&&e!==At;function zn(){const{caseless:e}=qr(this)&&this||{},t={},s=(o,n)=>{const i=e&&Ir(t,n)||n;Os(t[i])&&Os(o)?t[i]=zn(t[i],o):Os(o)?t[i]=zn({},o):zt(o)?t[i]=o.slice():t[i]=o};for(let o=0,n=arguments.length;o<n;o++)arguments[o]&&ws(arguments[o],s);return t}const Wm=(e,t,s,{allOwnKeys:o}={})=>(ws(t,(n,i)=>{s&&Re(n)?e[i]=Mr(n,s):e[i]=n},{allOwnKeys:o}),e),Gm=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Xm=(e,t,s,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Ym=(e,t,s,o)=>{let n,i,r;const l={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)r=n[i],(!o||o(r,e,t))&&!l[r]&&(t[r]=e[r],l[r]=!0);e=s!==!1&&mo(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Qm=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const o=e.indexOf(t,s);return o!==-1&&o===s},Zm=e=>{if(!e)return null;if(zt(e))return e;let t=e.length;if(!Ur(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},eg=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&mo(Uint8Array)),tg=(e,t)=>{const o=(e&&e[ln]).call(e);let n;for(;(n=o.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},sg=(e,t)=>{let s;const o=[];for(;(s=e.exec(t))!==null;)o.push(s);return o},ng=Je("HTMLFormElement"),og=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,o,n){return o.toUpperCase()+n}),ii=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),ig=Je("RegExp"),jr=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),o={};ws(s,(n,i)=>{let r;(r=t(n,i,e))!==!1&&(o[i]=r||n)}),Object.defineProperties(e,o)},rg=e=>{jr(e,(t,s)=>{if(Re(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const o=e[s];if(Re(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},ag=(e,t)=>{const s={},o=n=>{n.forEach(i=>{s[i]=!0})};return zt(e)?o(e):o(String(e).split(t)),s},lg=()=>{},cg=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function dg(e){return!!(e&&Re(e.append)&&e[Or]==="FormData"&&e[ln])}const ug=e=>{const t=new Array(10),s=(o,n)=>{if(un(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[n]=o;const i=zt(o)?[]:{};return ws(o,(r,l)=>{const c=s(r,n+1);!bs(c)&&(i[l]=c)}),t[n]=void 0,i}}return o};return s(e,0)},fg=Je("AsyncFunction"),hg=e=>e&&(un(e)||Re(e))&&Re(e.then)&&Re(e.catch),Br=((e,t)=>e?setImmediate:t?((s,o)=>(At.addEventListener("message",({source:n,data:i})=>{n===At&&i===s&&o.length&&o.shift()()},!1),n=>{o.push(n),At.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Re(At.postMessage)),pg=typeof queueMicrotask<"u"?queueMicrotask.bind(At):typeof process<"u"&&process.nextTick||Br,mg=e=>e!=null&&Re(e[ln]),b={isArray:zt,isArrayBuffer:Lr,isBuffer:Fm,isFormData:Bm,isArrayBufferView:Rm,isString:Mm,isNumber:Ur,isBoolean:Om,isObject:un,isPlainObject:Os,isReadableStream:Vm,isRequest:Hm,isResponse:zm,isHeaders:Jm,isUndefined:bs,isDate:Lm,isFile:Um,isBlob:Im,isRegExp:ig,isFunction:Re,isStream:jm,isURLSearchParams:$m,isTypedArray:eg,isFileList:qm,forEach:ws,merge:zn,extend:Wm,trim:Km,stripBOM:Gm,inherits:Xm,toFlatObject:Ym,kindOf:cn,kindOfTest:Je,endsWith:Qm,toArray:Zm,forEachEntry:tg,matchAll:sg,isHTMLForm:ng,hasOwnProperty:ii,hasOwnProp:ii,reduceDescriptors:jr,freezeMethods:rg,toObjectSet:ag,toCamelCase:og,noop:lg,toFiniteNumber:cg,findKey:Ir,global:At,isContextDefined:qr,isSpecCompliantForm:dg,toJSONObject:ug,isAsyncFn:fg,isThenable:hg,setImmediate:Br,asap:pg,isIterable:mg};function J(e,t,s,o,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),o&&(this.request=o),n&&(this.response=n,this.status=n.status?n.status:null)}b.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});const $r=J.prototype,Vr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Vr[e]={value:e}});Object.defineProperties(J,Vr);Object.defineProperty($r,"isAxiosError",{value:!0});J.from=(e,t,s,o,n,i)=>{const r=Object.create($r);return b.toFlatObject(e,r,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),J.call(r,e.message,t,s,o,n),r.cause=e,r.name=e.name,i&&Object.assign(r,i),r};const gg=null;function Jn(e){return b.isPlainObject(e)||b.isArray(e)}function Hr(e){return b.endsWith(e,"[]")?e.slice(0,-2):e}function ri(e,t,s){return e?e.concat(t).map(function(n,i){return n=Hr(n),!s&&i?"["+n+"]":n}).join(s?".":""):t}function bg(e){return b.isArray(e)&&!e.some(Jn)}const yg=b.toFlatObject(b,{},null,function(t){return/^is[A-Z]/.test(t)});function fn(e,t,s){if(!b.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=b.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,D){return!b.isUndefined(D[v])});const o=s.metaTokens,n=s.visitor||u,i=s.dots,r=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(t);if(!b.isFunction(n))throw new TypeError("visitor must be a function");function d(C){if(C===null)return"";if(b.isDate(C))return C.toISOString();if(b.isBoolean(C))return C.toString();if(!c&&b.isBlob(C))throw new J("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(C)||b.isTypedArray(C)?c&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function u(C,v,D){let U=C;if(C&&!D&&typeof C=="object"){if(b.endsWith(v,"{}"))v=o?v:v.slice(0,-2),C=JSON.stringify(C);else if(b.isArray(C)&&bg(C)||(b.isFileList(C)||b.endsWith(v,"[]"))&&(U=b.toArray(C)))return v=Hr(v),U.forEach(function($,O){!(b.isUndefined($)||$===null)&&t.append(r===!0?ri([v],O,i):r===null?v:v+"[]",d($))}),!1}return Jn(C)?!0:(t.append(ri(D,v,i),d(C)),!1)}const h=[],y=Object.assign(yg,{defaultVisitor:u,convertValue:d,isVisitable:Jn});function w(C,v){if(!b.isUndefined(C)){if(h.indexOf(C)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(C),b.forEach(C,function(U,B){(!(b.isUndefined(U)||U===null)&&n.call(t,U,b.isString(B)?B.trim():B,v,y))===!0&&w(U,v?v.concat(B):[B])}),h.pop()}}if(!b.isObject(e))throw new TypeError("data must be an object");return w(e),t}function ai(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function go(e,t){this._pairs=[],e&&fn(e,this,t)}const zr=go.prototype;zr.append=function(t,s){this._pairs.push([t,s])};zr.toString=function(t){const s=t?function(o){return t.call(this,o,ai)}:ai;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function vg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jr(e,t,s){if(!t)return e;const o=s&&s.encode||vg;b.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let i;if(n?i=n(t,s):i=b.isURLSearchParams(t)?t.toString():new go(t,s).toString(o),i){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class li{constructor(){this.handlers=[]}use(t,s,o){return this.handlers.push({fulfilled:t,rejected:s,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){b.forEach(this.handlers,function(o){o!==null&&t(o)})}}const Kr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sg=typeof URLSearchParams<"u"?URLSearchParams:go,Cg=typeof FormData<"u"?FormData:null,wg=typeof Blob<"u"?Blob:null,_g={isBrowser:!0,classes:{URLSearchParams:Sg,FormData:Cg,Blob:wg},protocols:["http","https","file","blob","url","data"]},bo=typeof window<"u"&&typeof document<"u",Kn=typeof navigator=="object"&&navigator||void 0,Eg=bo&&(!Kn||["ReactNative","NativeScript","NS"].indexOf(Kn.product)<0),Ag=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dg=bo&&window.location.href||"http://localhost",kg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bo,hasStandardBrowserEnv:Eg,hasStandardBrowserWebWorkerEnv:Ag,navigator:Kn,origin:Dg},Symbol.toStringTag,{value:"Module"})),Ee={...kg,..._g};function Tg(e,t){return fn(e,new Ee.classes.URLSearchParams,Object.assign({visitor:function(s,o,n,i){return Ee.isNode&&b.isBuffer(s)?(this.append(o,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Pg(e){return b.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function xg(e){const t={},s=Object.keys(e);let o;const n=s.length;let i;for(o=0;o<n;o++)i=s[o],t[i]=e[i];return t}function Wr(e){function t(s,o,n,i){let r=s[i++];if(r==="__proto__")return!0;const l=Number.isFinite(+r),c=i>=s.length;return r=!r&&b.isArray(n)?n.length:r,c?(b.hasOwnProp(n,r)?n[r]=[n[r],o]:n[r]=o,!l):((!n[r]||!b.isObject(n[r]))&&(n[r]=[]),t(s,o,n[r],i)&&b.isArray(n[r])&&(n[r]=xg(n[r])),!l)}if(b.isFormData(e)&&b.isFunction(e.entries)){const s={};return b.forEachEntry(e,(o,n)=>{t(Pg(o),n,s,0)}),s}return null}function Ng(e,t,s){if(b.isString(e))try{return(t||JSON.parse)(e),b.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(s||JSON.stringify)(e)}const _s={transitional:Kr,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const o=s.getContentType()||"",n=o.indexOf("application/json")>-1,i=b.isObject(t);if(i&&b.isHTMLForm(t)&&(t=new FormData(t)),b.isFormData(t))return n?JSON.stringify(Wr(t)):t;if(b.isArrayBuffer(t)||b.isBuffer(t)||b.isStream(t)||b.isFile(t)||b.isBlob(t)||b.isReadableStream(t))return t;if(b.isArrayBufferView(t))return t.buffer;if(b.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Tg(t,this.formSerializer).toString();if((l=b.isFileList(t))||o.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return fn(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||n?(s.setContentType("application/json",!1),Ng(t)):t}],transformResponse:[function(t){const s=this.transitional||_s.transitional,o=s&&s.forcedJSONParsing,n=this.responseType==="json";if(b.isResponse(t)||b.isReadableStream(t))return t;if(t&&b.isString(t)&&(o&&!this.responseType||n)){const r=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(l){if(r)throw l.name==="SyntaxError"?J.from(l,J.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ee.classes.FormData,Blob:Ee.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],e=>{_s.headers[e]={}});const Fg=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rg=e=>{const t={};let s,o,n;return e&&e.split(`
`).forEach(function(r){n=r.indexOf(":"),s=r.substring(0,n).trim().toLowerCase(),o=r.substring(n+1).trim(),!(!s||t[s]&&Fg[s])&&(s==="set-cookie"?t[s]?t[s].push(o):t[s]=[o]:t[s]=t[s]?t[s]+", "+o:o)}),t},ci=Symbol("internals");function Zt(e){return e&&String(e).trim().toLowerCase()}function Ls(e){return e===!1||e==null?e:b.isArray(e)?e.map(Ls):String(e)}function Mg(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=s.exec(e);)t[o[1]]=o[2];return t}const Og=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function kn(e,t,s,o,n){if(b.isFunction(o))return o.call(this,t,s);if(n&&(t=s),!!b.isString(t)){if(b.isString(o))return t.indexOf(o)!==-1;if(b.isRegExp(o))return o.test(t)}}function Lg(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,o)=>s.toUpperCase()+o)}function Ug(e,t){const s=b.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+s,{value:function(n,i,r){return this[o].call(this,t,n,i,r)},configurable:!0})})}let Me=class{constructor(t){t&&this.set(t)}set(t,s,o){const n=this;function i(l,c,d){const u=Zt(c);if(!u)throw new Error("header name must be a non-empty string");const h=b.findKey(n,u);(!h||n[h]===void 0||d===!0||d===void 0&&n[h]!==!1)&&(n[h||c]=Ls(l))}const r=(l,c)=>b.forEach(l,(d,u)=>i(d,u,c));if(b.isPlainObject(t)||t instanceof this.constructor)r(t,s);else if(b.isString(t)&&(t=t.trim())&&!Og(t))r(Rg(t),s);else if(b.isObject(t)&&b.isIterable(t)){let l={},c,d;for(const u of t){if(!b.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?b.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}r(l,s)}else t!=null&&i(s,t,o);return this}get(t,s){if(t=Zt(t),t){const o=b.findKey(this,t);if(o){const n=this[o];if(!s)return n;if(s===!0)return Mg(n);if(b.isFunction(s))return s.call(this,n,o);if(b.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Zt(t),t){const o=b.findKey(this,t);return!!(o&&this[o]!==void 0&&(!s||kn(this,this[o],o,s)))}return!1}delete(t,s){const o=this;let n=!1;function i(r){if(r=Zt(r),r){const l=b.findKey(o,r);l&&(!s||kn(o,o[l],l,s))&&(delete o[l],n=!0)}}return b.isArray(t)?t.forEach(i):i(t),n}clear(t){const s=Object.keys(this);let o=s.length,n=!1;for(;o--;){const i=s[o];(!t||kn(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const s=this,o={};return b.forEach(this,(n,i)=>{const r=b.findKey(o,i);if(r){s[r]=Ls(n),delete s[i];return}const l=t?Lg(i):String(i).trim();l!==i&&delete s[i],s[l]=Ls(n),o[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return b.forEach(this,(o,n)=>{o!=null&&o!==!1&&(s[n]=t&&b.isArray(o)?o.join(", "):o)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const o=new this(t);return s.forEach(n=>o.set(n)),o}static accessor(t){const o=(this[ci]=this[ci]={accessors:{}}).accessors,n=this.prototype;function i(r){const l=Zt(r);o[l]||(Ug(n,r),o[l]=!0)}return b.isArray(t)?t.forEach(i):i(t),this}};Me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(Me.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[s]=o}}});b.freezeMethods(Me);function Tn(e,t){const s=this||_s,o=t||s,n=Me.from(o.headers);let i=o.data;return b.forEach(e,function(l){i=l.call(s,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function Gr(e){return!!(e&&e.__CANCEL__)}function Jt(e,t,s){J.call(this,e??"canceled",J.ERR_CANCELED,t,s),this.name="CanceledError"}b.inherits(Jt,J,{__CANCEL__:!0});function Xr(e,t,s){const o=s.config.validateStatus;!s.status||!o||o(s.status)?e(s):t(new J("Request failed with status code "+s.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Ig(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qg(e,t){e=e||10;const s=new Array(e),o=new Array(e);let n=0,i=0,r;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=o[i];r||(r=d),s[n]=c,o[n]=d;let h=i,y=0;for(;h!==n;)y+=s[h++],h=h%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),d-r<t)return;const w=u&&d-u;return w?Math.round(y*1e3/w):void 0}}function jg(e,t){let s=0,o=1e3/t,n,i;const r=(d,u=Date.now())=>{s=u,n=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-s;h>=o?r(d,u):(n=d,i||(i=setTimeout(()=>{i=null,r(n)},o-h)))},()=>n&&r(n)]}const Ws=(e,t,s=3)=>{let o=0;const n=qg(50,250);return jg(i=>{const r=i.loaded,l=i.lengthComputable?i.total:void 0,c=r-o,d=n(c),u=r<=l;o=r;const h={loaded:r,total:l,progress:l?r/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-r)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},s)},di=(e,t)=>{const s=e!=null;return[o=>t[0]({lengthComputable:s,total:e,loaded:o}),t[1]]},ui=e=>(...t)=>b.asap(()=>e(...t)),Bg=Ee.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Ee.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Ee.origin),Ee.navigator&&/(msie|trident)/i.test(Ee.navigator.userAgent)):()=>!0,$g=Ee.hasStandardBrowserEnv?{write(e,t,s,o,n,i){const r=[e+"="+encodeURIComponent(t)];b.isNumber(s)&&r.push("expires="+new Date(s).toGMTString()),b.isString(o)&&r.push("path="+o),b.isString(n)&&r.push("domain="+n),i===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vg(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Hg(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Yr(e,t,s){let o=!Vg(t);return e&&(o||s==!1)?Hg(e,t):t}const fi=e=>e instanceof Me?{...e}:e;function Ft(e,t){t=t||{};const s={};function o(d,u,h,y){return b.isPlainObject(d)&&b.isPlainObject(u)?b.merge.call({caseless:y},d,u):b.isPlainObject(u)?b.merge({},u):b.isArray(u)?u.slice():u}function n(d,u,h,y){if(b.isUndefined(u)){if(!b.isUndefined(d))return o(void 0,d,h,y)}else return o(d,u,h,y)}function i(d,u){if(!b.isUndefined(u))return o(void 0,u)}function r(d,u){if(b.isUndefined(u)){if(!b.isUndefined(d))return o(void 0,d)}else return o(void 0,u)}function l(d,u,h){if(h in t)return o(d,u);if(h in e)return o(void 0,d)}const c={url:i,method:i,data:i,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:l,headers:(d,u,h)=>n(fi(d),fi(u),h,!0)};return b.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||n,y=h(e[u],t[u],u);b.isUndefined(y)&&h!==l||(s[u]=y)}),s}const Qr=e=>{const t=Ft({},e);let{data:s,withXSRFToken:o,xsrfHeaderName:n,xsrfCookieName:i,headers:r,auth:l}=t;t.headers=r=Me.from(r),t.url=Jr(Yr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&r.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(b.isFormData(s)){if(Ee.hasStandardBrowserEnv||Ee.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((c=r.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];r.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Ee.hasStandardBrowserEnv&&(o&&b.isFunction(o)&&(o=o(t)),o||o!==!1&&Bg(t.url))){const d=n&&i&&$g.read(i);d&&r.set(n,d)}return t},zg=typeof XMLHttpRequest<"u",Jg=zg&&function(e){return new Promise(function(s,o){const n=Qr(e);let i=n.data;const r=Me.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=n,u,h,y,w,C;function v(){w&&w(),C&&C(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let D=new XMLHttpRequest;D.open(n.method.toUpperCase(),n.url,!0),D.timeout=n.timeout;function U(){if(!D)return;const $=Me.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),H={data:!l||l==="text"||l==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:$,config:e,request:D};Xr(function(Y){s(Y),v()},function(Y){o(Y),v()},H),D=null}"onloadend"in D?D.onloadend=U:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(U)},D.onabort=function(){D&&(o(new J("Request aborted",J.ECONNABORTED,e,D)),D=null)},D.onerror=function(){o(new J("Network Error",J.ERR_NETWORK,e,D)),D=null},D.ontimeout=function(){let O=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const H=n.transitional||Kr;n.timeoutErrorMessage&&(O=n.timeoutErrorMessage),o(new J(O,H.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,D)),D=null},i===void 0&&r.setContentType(null),"setRequestHeader"in D&&b.forEach(r.toJSON(),function(O,H){D.setRequestHeader(H,O)}),b.isUndefined(n.withCredentials)||(D.withCredentials=!!n.withCredentials),l&&l!=="json"&&(D.responseType=n.responseType),d&&([y,C]=Ws(d,!0),D.addEventListener("progress",y)),c&&D.upload&&([h,w]=Ws(c),D.upload.addEventListener("progress",h),D.upload.addEventListener("loadend",w)),(n.cancelToken||n.signal)&&(u=$=>{D&&(o(!$||$.type?new Jt(null,e,D):$),D.abort(),D=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const B=Ig(n.url);if(B&&Ee.protocols.indexOf(B)===-1){o(new J("Unsupported protocol "+B+":",J.ERR_BAD_REQUEST,e));return}D.send(i||null)})},Kg=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let o=new AbortController,n;const i=function(d){if(!n){n=!0,l();const u=d instanceof Error?d:this.reason;o.abort(u instanceof J?u:new Jt(u instanceof Error?u.message:u))}};let r=t&&setTimeout(()=>{r=null,i(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))},t);const l=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=o;return c.unsubscribe=()=>b.asap(l),c}},Wg=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let o=0,n;for(;o<s;)n=o+t,yield e.slice(o,n),o=n},Gg=async function*(e,t){for await(const s of Xg(e))yield*Wg(s,t)},Xg=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:o}=await t.read();if(s)break;yield o}}finally{await t.cancel()}},hi=(e,t,s,o)=>{const n=Gg(e,t);let i=0,r,l=c=>{r||(r=!0,o&&o(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){l(),c.close();return}let h=u.byteLength;if(s){let y=i+=h;s(y)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},hn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Zr=hn&&typeof ReadableStream=="function",Yg=hn&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ea=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Qg=Zr&&ea(()=>{let e=!1;const t=new Request(Ee.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),pi=64*1024,Wn=Zr&&ea(()=>b.isReadableStream(new Response("").body)),Gs={stream:Wn&&(e=>e.body)};hn&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Gs[t]&&(Gs[t]=b.isFunction(e[t])?s=>s[t]():(s,o)=>{throw new J(`Response type '${t}' is not supported`,J.ERR_NOT_SUPPORT,o)})})})(new Response);const Zg=async e=>{if(e==null)return 0;if(b.isBlob(e))return e.size;if(b.isSpecCompliantForm(e))return(await new Request(Ee.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(b.isArrayBufferView(e)||b.isArrayBuffer(e))return e.byteLength;if(b.isURLSearchParams(e)&&(e=e+""),b.isString(e))return(await Yg(e)).byteLength},eb=async(e,t)=>{const s=b.toFiniteNumber(e.getContentLength());return s??Zg(t)},tb=hn&&(async e=>{let{url:t,method:s,data:o,signal:n,cancelToken:i,timeout:r,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:y}=Qr(e);d=d?(d+"").toLowerCase():"text";let w=Kg([n,i&&i.toAbortSignal()],r),C;const v=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let D;try{if(c&&Qg&&s!=="get"&&s!=="head"&&(D=await eb(u,o))!==0){let H=new Request(t,{method:"POST",body:o,duplex:"half"}),ee;if(b.isFormData(o)&&(ee=H.headers.get("content-type"))&&u.setContentType(ee),H.body){const[Y,me]=di(D,Ws(ui(c)));o=hi(H.body,pi,Y,me)}}b.isString(h)||(h=h?"include":"omit");const U="credentials"in Request.prototype;C=new Request(t,{...y,signal:w,method:s.toUpperCase(),headers:u.normalize().toJSON(),body:o,duplex:"half",credentials:U?h:void 0});let B=await fetch(C,y);const $=Wn&&(d==="stream"||d==="response");if(Wn&&(l||$&&v)){const H={};["status","statusText","headers"].forEach(z=>{H[z]=B[z]});const ee=b.toFiniteNumber(B.headers.get("content-length")),[Y,me]=l&&di(ee,Ws(ui(l),!0))||[];B=new Response(hi(B.body,pi,Y,()=>{me&&me(),v&&v()}),H)}d=d||"text";let O=await Gs[b.findKey(Gs,d)||"text"](B,e);return!$&&v&&v(),await new Promise((H,ee)=>{Xr(H,ee,{data:O,headers:Me.from(B.headers),status:B.status,statusText:B.statusText,config:e,request:C})})}catch(U){throw v&&v(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new J("Network Error",J.ERR_NETWORK,e,C),{cause:U.cause||U}):J.from(U,U&&U.code,e,C)}}),Gn={http:gg,xhr:Jg,fetch:tb};b.forEach(Gn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mi=e=>`- ${e}`,sb=e=>b.isFunction(e)||e===null||e===!1,ta={getAdapter:e=>{e=b.isArray(e)?e:[e];const{length:t}=e;let s,o;const n={};for(let i=0;i<t;i++){s=e[i];let r;if(o=s,!sb(s)&&(o=Gn[(r=String(s)).toLowerCase()],o===void 0))throw new J(`Unknown adapter '${r}'`);if(o)break;n[r||"#"+i]=o}if(!o){const i=Object.entries(n).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let r=t?i.length>1?`since :
`+i.map(mi).join(`
`):" "+mi(i[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return o},adapters:Gn};function Pn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Jt(null,e)}function gi(e){return Pn(e),e.headers=Me.from(e.headers),e.data=Tn.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ta.getAdapter(e.adapter||_s.adapter)(e).then(function(o){return Pn(e),o.data=Tn.call(e,e.transformResponse,o),o.headers=Me.from(o.headers),o},function(o){return Gr(o)||(Pn(e),o&&o.response&&(o.response.data=Tn.call(e,e.transformResponse,o.response),o.response.headers=Me.from(o.response.headers))),Promise.reject(o)})}const sa="1.10.0",pn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{pn[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const bi={};pn.transitional=function(t,s,o){function n(i,r){return"[Axios v"+sa+"] Transitional option '"+i+"'"+r+(o?". "+o:"")}return(i,r,l)=>{if(t===!1)throw new J(n(r," has been removed"+(s?" in "+s:"")),J.ERR_DEPRECATED);return s&&!bi[r]&&(bi[r]=!0,console.warn(n(r," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,r,l):!0}};pn.spelling=function(t){return(s,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function nb(e,t,s){if(typeof e!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let n=o.length;for(;n-- >0;){const i=o[n],r=t[i];if(r){const l=e[i],c=l===void 0||r(l,i,e);if(c!==!0)throw new J("option "+i+" must be "+c,J.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new J("Unknown option "+i,J.ERR_BAD_OPTION)}}const Us={assertOptions:nb,validators:pn},Qe=Us.validators;let Pt=class{constructor(t){this.defaults=t||{},this.interceptors={request:new li,response:new li}}async request(t,s){try{return await this._request(t,s)}catch(o){if(o instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Ft(this.defaults,s);const{transitional:o,paramsSerializer:n,headers:i}=s;o!==void 0&&Us.assertOptions(o,{silentJSONParsing:Qe.transitional(Qe.boolean),forcedJSONParsing:Qe.transitional(Qe.boolean),clarifyTimeoutError:Qe.transitional(Qe.boolean)},!1),n!=null&&(b.isFunction(n)?s.paramsSerializer={serialize:n}:Us.assertOptions(n,{encode:Qe.function,serialize:Qe.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Us.assertOptions(s,{baseUrl:Qe.spelling("baseURL"),withXsrfToken:Qe.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let r=i&&b.merge(i.common,i[s.method]);i&&b.forEach(["delete","get","head","post","put","patch","common"],C=>{delete i[C]}),s.headers=Me.concat(r,i);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(s)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let u,h=0,y;if(!c){const C=[gi.bind(this),void 0];for(C.unshift.apply(C,l),C.push.apply(C,d),y=C.length,u=Promise.resolve(s);h<y;)u=u.then(C[h++],C[h++]);return u}y=l.length;let w=s;for(h=0;h<y;){const C=l[h++],v=l[h++];try{w=C(w)}catch(D){v.call(this,D);break}}try{u=gi.call(this,w)}catch(C){return Promise.reject(C)}for(h=0,y=d.length;h<y;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=Ft(this.defaults,t);const s=Yr(t.baseURL,t.url,t.allowAbsoluteUrls);return Jr(s,t.params,t.paramsSerializer)}};b.forEach(["delete","get","head","options"],function(t){Pt.prototype[t]=function(s,o){return this.request(Ft(o||{},{method:t,url:s,data:(o||{}).data}))}});b.forEach(["post","put","patch"],function(t){function s(o){return function(i,r,l){return this.request(Ft(l||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}Pt.prototype[t]=s(),Pt.prototype[t+"Form"]=s(!0)});let ob=class na{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const o=this;this.promise.then(n=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](n);o._listeners=null}),this.promise.then=n=>{let i;const r=new Promise(l=>{o.subscribe(l),i=l}).then(n);return r.cancel=function(){o.unsubscribe(i)},r},t(function(i,r,l){o.reason||(o.reason=new Jt(i,r,l),s(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=o=>{t.abort(o)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new na(function(n){t=n}),cancel:t}}};function ib(e){return function(s){return e.apply(null,s)}}function rb(e){return b.isObject(e)&&e.isAxiosError===!0}const Xn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xn).forEach(([e,t])=>{Xn[t]=e});function oa(e){const t=new Pt(e),s=Mr(Pt.prototype.request,t);return b.extend(s,Pt.prototype,t,{allOwnKeys:!0}),b.extend(s,t,null,{allOwnKeys:!0}),s.create=function(n){return oa(Ft(e,n))},s}const he=oa(_s);he.Axios=Pt;he.CanceledError=Jt;he.CancelToken=ob;he.isCancel=Gr;he.VERSION=sa;he.toFormData=fn;he.AxiosError=J;he.Cancel=he.CanceledError;he.all=function(t){return Promise.all(t)};he.spread=ib;he.isAxiosError=rb;he.mergeConfig=Ft;he.AxiosHeaders=Me;he.formToJSON=e=>Wr(b.isHTMLForm(e)?new FormData(e):e);he.getAdapter=ta.getAdapter;he.HttpStatusCode=Xn;he.default=he;const{Axios:ry,AxiosError:ay,CanceledError:ly,isCancel:cy,CancelToken:dy,VERSION:uy,all:fy,Cancel:hy,isAxiosError:py,spread:my,toFormData:gy,AxiosHeaders:by,HttpStatusCode:yy,formToJSON:vy,getAdapter:Sy,mergeConfig:Cy}=he;function ab(){console.log("=== Sistema de Permissões ==="),Vn("create_schedule")?console.log("✅ Usuário pode criar agendamentos"):console.log("❌ Usuário não pode criar agendamentos"),Vn("manage_users")?console.log("✅ Usuário pode gerenciar usuários"):console.log("❌ Usuário não pode gerenciar usuários"),Hn(0)?console.log("✅ Usuário é desenvolvedor - acesso total"):console.log("❌ Usuário não é desenvolvedor"),Hn(2)?console.log("✅ Usuário tem acesso administrativo"):console.log("❌ Usuário não tem acesso administrativo")}const ve=window.apiClient||new class{constructor(){this.baseURL="https://schedule-mercocamp-back-end.up.railway.app/api",this.token=localStorage.getItem("token")}async request(t,s={}){var i;const o=localStorage.getItem("token"),n={baseURL:this.baseURL,headers:{"Content-Type":"application/json",...s.headers},...s};o&&(n.headers.Authorization=`Bearer ${o}`);try{return(await he({...n,url:t})).data}catch(r){if(((i=r.response)==null?void 0:i.status)===401){localStorage.removeItem("token"),localStorage.removeItem("user"),console.log("Token expirado, redirecionando para login"),window.location.href="/login.html";return}throw r}}async getDashboardStats(){return{pendingDeliveries:7,processing:23,completedToday:156,divergences:2}}async getRecentActivities(){return[{id:1,type:"received",title:"Produto em Conferência",description:"Smartphone Samsung Galaxy - Código: 4587956321",time:"15 minutos atrás",status:"success"},{id:2,type:"pending",title:"Aguardando Conferência",description:"Lote de Notebooks Dell - Pedido: PED-789654",time:"1 hora atrás",status:"warning"},{id:3,type:"divergence",title:"Divergência Detectada",description:"Diferença na quantidade - Produto: MON-4578123",time:"2 horas atrás",status:"danger"}]}async getPendingDeliveries(){return[{id:1,nfe:"35240414200166000182550010000134151123456789",supplier:"TechCorp Ltda",volumes:"15 volumes",scheduledDate:"14/07/2025",warehouse:"Estoque Principal",status:"scheduled"},{id:2,nfe:"35240414200166000182550010000134152234567890",supplier:"SmartPhone Inc",volumes:"8 volumes",scheduledDate:"14/07/2025",warehouse:"Estoque Eletrônicos",status:"on_way"},{id:3,nfe:"35240414200166000182550010000134153345678901",supplier:"Office Solutions",volumes:"20 volumes",scheduledDate:"15/07/2025",warehouse:"Estoque Periféricos",status:"scheduled"},{id:4,nfe:"35240414200166000182550010000134154456789012",supplier:"Industrial Corp",volumes:"5 volumes",scheduledDate:"15/07/2025",warehouse:"Estoque Industrial",status:"processing"}]}async getSchedules(t={}){return this.request("/schedules",{params:t})}async createSchedule(t){return this.request("/schedules",{method:"POST",data:t})}async updateScheduleStatus(t,s,o){var n;return this.request(`/schedules/${t}/status`,{method:"PATCH",data:{status:s,historic_entry:{user:((n=this.getCurrentUser())==null?void 0:n.user)||"system",action:`Status alterado para ${s}`,comment:o}}})}async createScheduleWithProducts(t){return this.request("/schedules/create-with-products",{method:"POST",data:{nfe_data:t}})}async getUserSettings(){return this.request("/user-settings")}async updateUserSettings(t){return this.request("/user-settings",{method:"PUT",data:t})}async updateEmailSettings(t){return this.request("/user-settings/email",{method:"PATCH",data:{emailSettings:t}})}async updateUISettings(t){return this.request("/user-settings/ui",{method:"PATCH",data:{uiSettings:t}})}async testEmailSettings(){return this.request("/user-settings/test-email",{method:"POST"})}async resetUserSettings(){return this.request("/user-settings",{method:"DELETE"})}getCurrentUser(){const t=localStorage.getItem("user");return t?JSON.parse(t):null}};window.apiClient||(window.apiClient=ve);const lb={name:"App",components:{SidebarComponent:od,StatsCards:ud,RecentActivities:wd,PendingDeliveries:Nd,NotificationsComponent:jd,SchedulesList:Yf,ScheduleFilters:Rr,NfeInfoModal:Nr,ScheduleEditModal:Fr,ScheduleCreationModal:qp,SettingsPage:Pm},data(){return{loading:!0,user:null,activeMenu:"dashboard",showSchedulesList:!1,showSettingsPage:!1,dashboardStats:{pendingDeliveries:0,processing:0,completedToday:0,divergences:0},statsLoading:!1,recentActivities:[],activitiesLoading:!1,pendingDeliveries:[],deliveriesLoading:!1,notifications:[],schedules:[],selectedSchedules:[],newDate:"",bulkActionLoading:!1,showInfoModal:!1,showEditModal:!1,showScheduleCreationModal:!1,scheduleToEdit:null,pagination:{page:1,limit:20,total:0,pages:1,hasMore:!0},loadingMore:!1,selectedSchedule:null,currentFilters:{status:"",client:"",date_from:"",date_to:"",nfe_number:""},availableClients:[]}},computed:{displayedSchedules(){if(!Array.isArray(this.schedules))return[];const e=["Estoque","Recusado","Cancelado"];return this.schedules.filter(t=>!e.includes(t.status))},selectedScheduleStatuses(){const e=(this.schedules||[]).filter(t=>(this.selectedSchedules||[]).includes(t.id));return[...new Set(e.map(t=>t.status))]},cancelRequestedBy(){if(this.selectedSchedules.length===0)return"administrador";const e=(this.schedules||[]).filter(n=>(this.selectedSchedules||[]).includes(n.id));if(e.length===0)return"administrador";const t=e[0];if(!t.historic)return"administrador";const o=Object.values(t.historic).find(n=>n.action&&n.action.includes("Cancelar")||n.action&&n.action.includes("cancelamento"));return o&&o.user?o.user:"administrador"},canBulkManage(){return(this.selectedSchedules||[]).length>0&&this.selectedScheduleStatuses.length===1},userLevel(){try{const e=localStorage.getItem("user");return e?JSON.parse(e).level_access:null}catch{return null}},today(){return new Date().toISOString().split("T")[0]},statusOptions(){return[{value:"",label:"Todos os status"},{value:"Solicitado",label:"Solicitado"},{value:"Contestado",label:"Contestado"},{value:"Agendado",label:"Agendado"},{value:"Conferência",label:"Em conferência"},{value:"Tratativa",label:"Em tratativa"},{value:"Estoque",label:"Em estoque"},{value:"Cancelar",label:"Cancelar"},{value:"Cancelado",label:"Cancelado"},{value:"Recusado",label:"Recusado"}]},hasCreatePermission(){const e=this.user;return e&&e.level_access!==void 0&&e.level_access>=0}},async mounted(){try{console.log("🚀 Iniciando carregamento otimizado..."),await this.checkAuth(),ab(),this.loadAvailableClients(),console.log("📊 Carregando dados essenciais..."),await this.loadEssentialDataOptimized(),this.loading=!1,console.log("✅ Interface liberada!"),this.$nextTick(()=>{this.loadSecondaryDataLazy()})}catch(e){console.error("Erro ao inicializar dashboard:",e),this.addNotification("Erro ao carregar dados do dashboard","error"),this.loading=!1}},methods:{async checkAuth(){const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(console.log("Verificando autenticação...",{token:!!e,userData:!!t}),!e||!t){console.log("Redirecionando para login - token ou userData não encontrados"),window.location.href="/login.html";return}try{this.user=JSON.parse(t),console.log("Usuário autenticado:",this.user)}catch(s){console.error("Erro ao parsear dados do usuário:",s),window.location.href="/login.html"}},async loadDashboardData(){const e=[this.loadStats(),this.loadRecentActivities(),this.loadPendingDeliveries()];try{await Promise.all(e),console.log("Dashboard carregado com sucesso!")}catch(t){console.error("Erro ao carregar dashboard:",t),this.addNotification("Erro ao carregar dashboard","error")}},async loadStats(){this.statsLoading=!0;try{console.log("Buscando estatísticas...");const e=this.schedules||[],t=[...new Set(e.map(s=>s.status))];console.log("Status únicos encontrados:",t),console.log("Total de schedules:",e.length),this.dashboardStats={solicitacoes:e.filter(s=>s.status==="Solicitado").length,agendamentos:e.filter(s=>s.status==="Agendado").length,conferencia:e.filter(s=>s.status==="Conferência"||s.status==="Recebido").length,tratativa:e.filter(s=>s.status==="Tratativa").length},console.log("Estatísticas carregadas:",this.dashboardStats)}catch(e){console.error("Erro ao carregar estatísticas:",e),this.addNotification("Erro ao carregar estatísticas","error")}finally{this.statsLoading=!1}},async loadRecentActivities(){this.activitiesLoading=!0;try{console.log("Buscando atividades recentes..."),this.recentActivities=await ve.getRecentActivities(),console.log("Atividades recentes carregadas:",this.recentActivities)}catch(e){console.error("Erro ao carregar atividades:",e),this.addNotification("Erro ao carregar atividades recentes","error")}finally{this.activitiesLoading=!1}},async loadPendingDeliveries(){this.deliveriesLoading=!0;try{console.log("Buscando entregas pendentes..."),this.pendingDeliveries=await ve.getPendingDeliveries(),console.log("Entregas pendentes carregadas:",this.pendingDeliveries)}catch(e){console.error("Erro ao carregar entregas:",e),this.addNotification("Erro ao carregar entregas agendadas","error")}finally{this.deliveriesLoading=!1}},handleMenuClick(e){switch(this.activeMenu=e,console.log("Menu clicado:",e),this.showSchedulesList=!1,this.showSettingsPage=!1,e){case"dashboard":this.loadDashboardData();break;case"agendamento":this.showSchedulesList=!0;break;case"configuracoes":this.showSettingsPage=!0;break;default:console.log("Menu não implementado:",e)}},handleLogout(){confirm("Tem certeza que deseja sair?")&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login.html")},async handleDeliveryAction(e,t){switch(console.log("Ação na entrega:",e,t),e){case"start":try{await ve.updateScheduleStatus(t,"processing","Recebimento iniciado"),this.addNotification("Recebimento iniciado","success"),await this.loadPendingDeliveries()}catch{this.addNotification("Erro ao iniciar recebimento","error")}break;case"track":this.addNotification("Abrindo rastreamento...","info");break;case"view":this.addNotification("Abrindo detalhes...","info");break;default:this.addNotification("Ação não reconhecida","warning")}},addNotification(e,t="info"){const s={id:Date.now(),message:e,type:t,timestamp:new Date};this.notifications.push(s),setTimeout(()=>{this.removeNotification(s.id)},5e3)},removeNotification(e){const t=this.notifications.findIndex(s=>s.id===e);t>-1&&this.notifications.splice(t,1)},async refresh(){await this.refreshPageAfterAction("Dados atualizados com sucesso")},async loadSchedules(){var e;this.pagination.page===1&&(this.loading=!0);try{console.log("Buscando agendamentos...");const t=await ve.request("/schedules",{method:"GET",params:{page:this.pagination.page,limit:this.pagination.limit,...this.currentFilters}}),s=t.schedules||[];this.pagination.page===1?this.schedules=s:this.schedules=[...this.schedules,...s],this.pagination.total=((e=t.pagination)==null?void 0:e.total)||0,this.pagination.hasMore=s.length===this.pagination.limit,console.log("Agendamentos carregados:",this.schedules.length)}catch(t){this.pagination.page===1&&(this.schedules=[]),console.error("Erro ao carregar agendamentos:",t),this.addNotification("Erro ao carregar agendamentos","error")}finally{this.pagination.page===1&&(this.loading=!1),console.log("Finalizou loading dos agendamentos")}},async loadSchedulesInBackground(){var e,t;try{console.log("Carregando agendamentos em background...");const s=await ve.getSchedules();this.schedules=s.schedules||[],this.pagination.total=((e=s.pagination)==null?void 0:e.total)||this.schedules.length,this.pagination.pages=((t=s.pagination)==null?void 0:t.pages)||Math.ceil(this.schedules.length/this.pagination.limit),console.log("Agendamentos carregados em background:",this.schedules.length)}catch(s){this.schedules=[],console.error("Erro ao carregar agendamentos em background:",s),this.addNotification("Erro ao carregar agendamentos","error")}},async loadDashboardDataInBackground(){try{console.log("Carregando dados do dashboard em background...");const e=[this.loadStatsInBackground(),this.loadRecentActivitiesInBackground(),this.loadPendingDeliveriesInBackground()];await Promise.allSettled(e),console.log("Dashboard carregado em background!")}catch(e){console.error("Erro ao carregar dashboard em background:",e)}},async loadStatsInBackground(){try{await new Promise(t=>{const s=()=>{this.schedules&&this.schedules.length>=0?t():setTimeout(s,100)};s()}),console.log("Calculando estatísticas...");const e=this.schedules||[];this.dashboardStats={solicitacoes:e.filter(t=>t.status==="Solicitado").length,agendamentos:e.filter(t=>t.status==="Agendado").length,conferencia:e.filter(t=>t.status==="Conferência"||t.status==="Recebido").length,tratativa:e.filter(t=>t.status==="Tratativa").length},console.log("Estatísticas calculadas:",this.dashboardStats)}catch(e){console.error("Erro ao calcular estatísticas:",e)}},async loadEssentialDataOptimized(){this.statsLoading=!0;try{console.log("🎯 Fazendo única requisição para /schedules..."),console.log("📝 Filtros aplicados:",this.currentFilters);const e=await ve.request("/schedules",{method:"GET",params:{page:this.pagination.page,limit:this.pagination.limit,...this.currentFilters}});e&&e.schedules&&(this.schedules=e.schedules,this.pagination=e.pagination||{},this.calculateStatsFromData(e.schedules),console.log("💡 Dados reutilizados para stats e lista!"))}catch(e){console.error("Erro ao carregar dados essenciais:",e),this.addNotification("Erro ao carregar dados iniciais","error")}finally{this.statsLoading=!1}},calculateStatsFromData(e){const t={solicitacoes:0,agendamentos:0,conferencia:0,tratativa:0};e.forEach(s=>{var n;switch((n=s.status)==null?void 0:n.toLowerCase()){case"solicitado":t.solicitacoes++;break;case"agendado":t.agendamentos++;break;case"conferencia":case"recebido":case"estoque":t.conferencia++;break;case"tratativa":t.tratativa++;break}}),this.dashboardStats=t,console.log("📈 Stats calculadas localmente:",t)},async loadSecondaryDataLazy(){console.log("⏳ Carregando dados secundários...");const e=[];this.schedules.length<(this.pagination.total||0)&&e.push(this.loadRemainingSchedules()),e.push(this.loadRecentActivitiesIfNeeded()),e.length>0&&(await Promise.allSettled(e),console.log("🎉 Dados secundários carregados!"))},async loadRemainingSchedules(){if(!(!this.pagination.total||this.schedules.length>=this.pagination.total))try{const e=await ve.request("/schedules",{method:"GET",params:{page:2,limit:this.pagination.total-this.schedules.length}});e&&e.schedules&&this.schedules.push(...e.schedules)}catch(e){console.error("Erro ao carregar agendamentos restantes:",e)}},async loadRecentActivitiesIfNeeded(){},async loadStatsImmediately(){try{console.log("Carregando estatísticas imediatamente...");const t=(await ve.getSchedules()).schedules||[];this.dashboardStats={solicitacoes:t.filter(s=>s.status==="Solicitado").length,agendamentos:t.filter(s=>s.status==="Agendado").length,conferencia:t.filter(s=>s.status==="Conferência"||s.status==="Recebido").length,tratativa:t.filter(s=>s.status==="Tratativa").length},console.log("Estatísticas carregadas imediatamente:",this.dashboardStats)}catch(e){console.error("Erro ao carregar estatísticas imediatamente:",e),this.dashboardStats={solicitacoes:0,agendamentos:0,conferencia:0,tratativa:0}}},async loadRecentActivitiesInBackground(){try{console.log("Carregando atividades recentes..."),this.recentActivities=await ve.getRecentActivities(),console.log("Atividades recentes carregadas:",this.recentActivities.length)}catch(e){console.error("Erro ao carregar atividades:",e),this.recentActivities=[]}},async loadPendingDeliveriesInBackground(){try{console.log("Carregando entregas pendentes..."),this.pendingDeliveries=await ve.getPendingDeliveries(),console.log("Entregas pendentes carregadas:",this.pendingDeliveries.length)}catch(e){console.error("Erro ao carregar entregas:",e),this.pendingDeliveries=[]}},canSelectSchedule(e){if(!["Solicitado","Contestado","Cancelar","Agendado","Conferência","Recebido","Tratativa","Estoque"].includes(e.status))return!1;if((this.selectedSchedules||[]).length>0){const s=this.selectedScheduleStatuses;if(s.length===1&&!s.includes(e.status))return!1}return!0},getStatusBadge(e){return{Solicitado:{class:"warning",label:"Solicitado"},Contestado:{class:"contestado",label:"Contestado"},Agendado:{class:"primary",label:"Agendado"},Conferência:{class:"success",label:"Em conferência"},Recebido:{class:"success",label:"Em conferência"},Tratativa:{class:"danger",label:"Em tratativa"},Estoque:{class:"success",label:"Em estoque"},Recusar:{class:"danger",label:"Recusar"},Cancelar:{class:"warning",label:"Cancelar"},Recusado:{class:"dark",label:"Recusado"},Cancelado:{class:"secondary",label:"Cancelado"}}[e]||{class:"secondary",label:"Desconhecido"}},onScheduleSelect(){if((this.displayedSchedules||[]).filter(t=>this.canSelectSchedule(t)),this.selectedScheduleStatuses.length>1){const t=this.selectedSchedules[this.selectedSchedules.length-1],s=(this.schedules||[]).find(o=>o.id===t);s&&(this.selectedSchedules=this.selectedSchedules.filter(o=>{const n=(this.schedules||[]).find(i=>i.id===o);return n&&n.status===s.status}))}},formatDate(e){if(!e)return"";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{const t=new Date(e);return isNaN(t)?e:t.toLocaleDateString("pt-BR")}catch{return e}},formatDateForDisplay(e){if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,s,o]=e.split("-");return`${o}/${s}/${t}`}try{const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("pt-BR")}catch{return e}},openInfoModal(e){this.selectedSchedule=e,this.showInfoModal=!0},closeInfoModal(){this.showInfoModal=!1,this.selectedSchedule=null},openEditModal(e){console.log("openEditModal chamado com:",e),this.scheduleToEdit=e||this.selectedSchedule,this.showEditModal=!0,setTimeout(()=>{console.log("showEditModal:",this.showEditModal,"scheduleToEdit:",this.scheduleToEdit)},100)},closeEditModal(){this.showEditModal=!1,this.scheduleToEdit=null,this.closeInfoModal()},openScheduleCreationModal(){this.showScheduleCreationModal=!0},closeScheduleCreationModal(){this.showScheduleCreationModal=!1},async handleScheduleCreated(e){console.log("Agendamento criado:",e),this.addNotification("Agendamento criado com sucesso!","success"),this.closeScheduleCreationModal(),await this.refreshPageAfterAction("Lista atualizada com novo agendamento")},async handleScheduleUpdated(e){console.log("✅ Agendamento atualizado:",e),window.apiClient&&window.apiClient.clearCache&&(window.apiClient.clearCache("/schedules"),console.log("🗑️ Cache de agendamentos limpo")),this.loading=!0,this.statsLoading=!0;try{await this.loadEssentialDataOptimized(),this.addNotification("Agendamento atualizado com sucesso","success"),console.log("🔄 Página atualizada completamente após edição")}catch(t){console.error("Erro ao atualizar página:",t),this.addNotification("Erro ao atualizar dados","error")}finally{this.loading=!1,this.statsLoading=!1}this.closeEditModal()},async refreshPageAfterAction(e){window.apiClient&&window.apiClient.clearCache&&(window.apiClient.clearCache("/schedules"),console.log("🗑️ Cache de agendamentos limpo após ação")),this.loading=!0,this.statsLoading=!0;try{await this.loadEssentialDataOptimized(),e&&this.addNotification(e,"success"),console.log("🔄 Página atualizada completamente após ação")}catch(t){console.error("Erro ao atualizar página:",t),this.addNotification("Erro ao atualizar dados","error")}finally{this.loading=!1,this.statsLoading=!1}},canSelectSchedule(e){if(!["Solicitado","Contestado","Cancelar","Agendado","Conferência","Recebido","Tratativa","Estoque"].includes(e.status))return!1;if((this.selectedSchedules||[]).length>0){const s=this.selectedScheduleStatuses;if(s.length===1&&!s.includes(e.status))return!1}return!0},clearSelection(){this.selectedSchedules=[],this.newDate=""},async loadMoreSchedules(){if(!(this.loadingMore||!this.pagination.hasMore)){this.loadingMore=!0,this.pagination.page+=1;try{await this.loadSchedules()}catch{this.pagination.page-=1}finally{this.loadingMore=!1}}},handleScroll(e){const{scrollTop:t,scrollHeight:s,clientHeight:o}=e.target;t+o>=s-100&&this.loadMoreSchedules()},async acceptSchedules(){if(this.selectedSchedules.length!==0){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Agendado","Agendamento aceito"),this.clearSelection(),await this.refreshPageAfterAction(`${this.selectedSchedules.length} agendamento(s) aceito(s) com sucesso`)}catch(e){console.error("Erro ao aceitar agendamentos:",e),this.addNotification("Erro ao aceitar agendamentos","error")}finally{this.bulkActionLoading=!1}}},async changeDateToContestado(){if(!(this.selectedSchedules.length===0||!this.newDate)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatusWithDateAndComment("Contestado",this.newDate),this.clearSelection(),await this.refreshPageAfterAction(`Data alterada para ${this.selectedSchedules.length} agendamento(s)`)}catch(e){console.error("Erro ao alterar data:",e),this.addNotification("Erro ao alterar data dos agendamentos","error")}finally{this.bulkActionLoading=!1}}},async acceptNewDate(){if(this.selectedSchedules.length!==0){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Agendado","Nova data aceita"),this.clearSelection(),await this.refreshPageAfterAction(`Nova data aceita para ${this.selectedSchedules.length} agendamento(s)`)}catch(e){console.error("Erro ao aceitar nova data:",e),this.addNotification("Erro ao aceitar nova data","error")}finally{this.bulkActionLoading=!1}}},async confirmContestado(){if(this.selectedSchedules.length!==0){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Agendado","Data contestada confirmada"),this.clearSelection(),await this.refreshPageAfterAction(`${this.selectedSchedules.length} agendamento(s) confirmado(s)`)}catch(e){console.error("Erro ao confirmar agendamentos:",e),this.addNotification("Erro ao confirmar agendamentos","error")}finally{this.bulkActionLoading=!1}}},async changeContestadoToAgendado(){if(!(this.selectedSchedules.length===0||!this.newDate)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatusWithDate("Agendado",this.newDate,"Data contestada reagendada"),this.clearSelection(),await this.refreshPageAfterAction(`${this.selectedSchedules.length} agendamento(s) reagendado(s)`)}catch(e){console.error("Erro ao reagendar:",e),this.addNotification("Erro ao reagendar agendamentos","error")}finally{this.bulkActionLoading=!1}}},async cancelSchedules(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja cancelar ${this.selectedSchedules.length} agendamento(s)?`)){this.bulkActionLoading=!0;try{const e=this.userLevel===1?"Cancelar":"Cancelado",t=this.userLevel===1?"Agendamento solicitado para cancelamento":"Agendamento cancelado diretamente";await this.bulkUpdateStatus(e,t);const s=this.userLevel===1?`${this.selectedSchedules.length} agendamento(s) marcado(s) para cancelamento`:`${this.selectedSchedules.length} agendamento(s) cancelado(s) com sucesso`;this.clearSelection(),await this.refreshPageAfterAction(s)}catch(e){console.error("Erro ao cancelar agendamentos:",e),this.addNotification("Erro ao cancelar agendamentos","error")}finally{this.bulkActionLoading=!1}}},async markAsReceived(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja marcar ${this.selectedSchedules.length} agendamento(s) como em conferência?`)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Conferência","Agendamento marcado como em conferência"),this.clearSelection(),await this.refreshPageAfterAction(`${this.selectedSchedules.length} agendamento(s) marcado(s) como em conferência`)}catch(e){console.error("Erro ao marcar como em conferência:",e),this.addNotification("Erro ao marcar agendamentos como em conferência","error")}finally{this.bulkActionLoading=!1}}},async markAsEstoque(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja marcar ${this.selectedSchedules.length} agendamento(s) como em estoque?`)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Estoque","Agendamento marcado como em estoque"),this.clearSelection(),await this.refreshPageAfterAction(`${this.selectedSchedules.length} agendamento(s) marcado(s) como em estoque`)}catch(e){console.error("Erro ao marcar como em estoque:",e),this.addNotification("Erro ao marcar agendamentos como em estoque","error")}finally{this.bulkActionLoading=!1}}},async markAsTratativa(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja marcar ${this.selectedSchedules.length} agendamento(s) como em tratativa?`)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Tratativa","Agendamento marcado como em tratativa devido a problemas identificados"),this.clearSelection(),await this.refreshPageAfterAction(`${this.selectedSchedules.length} agendamento(s) marcado(s) como em tratativa`)}catch(e){console.error("Erro ao marcar como tratativa:",e),this.addNotification("Erro ao marcar agendamentos como em tratativa","error")}finally{this.bulkActionLoading=!1}}},async handleMarkSingleAsTratativa(e){if(console.log("🔄 Marcando agendamento individual como tratativa:",e),!e||!e.id){this.addNotification("Erro: dados do agendamento não encontrados","error");return}if(confirm(`Tem certeza que deseja marcar o agendamento "${e.number||e.id}" como em tratativa?`)){this.loading=!0;try{await window.apiClient.updateScheduleStatus(e.id,"Tratativa","Agendamento marcado como em tratativa devido a problemas identificados"),this.addNotification("Agendamento marcado como em tratativa com sucesso!","success"),this.closeInfoModal(),await this.refreshPageAfterAction("Status atualizado para tratativa")}catch(t){console.error("Erro ao marcar agendamento como tratativa:",t),this.addNotification("Erro ao marcar agendamento como em tratativa","error")}finally{this.loading=!1}}},async handleChangeStatusFromTratativa({scheduleData:e,newStatus:t}){if(console.log("🔄 Alterando status de tratativa para:",t,"agendamento:",e),!e||!e.id){this.addNotification("Erro: dados do agendamento não encontrados","error");return}if(!t){this.addNotification("Erro: novo status não informado","error");return}const o={Solicitado:"Solicitado",Contestado:"Contestado",Agendado:"Agendado",Conferência:"Em conferência",Recebido:"Em conferência",Estoque:"Em estoque",Tratativa:"Em tratativa",Cancelar:"Cancelar",Cancelado:"Cancelado",Recusado:"Recusado"}[t]||t;if(confirm(`Tem certeza que deseja alterar o agendamento "${e.number||e.id}" de "Em tratativa" para "${o}"?`)){this.loading=!0;try{await window.apiClient.updateScheduleStatus(e.id,t,`Status alterado de "Em tratativa" para "${o}" pelo usuário`),this.addNotification(`Status alterado para "${o}" com sucesso!`,"success"),this.closeInfoModal(),await this.refreshPageAfterAction(`Status atualizado para ${o}`)}catch(n){console.error("Erro ao alterar status do agendamento:",n),this.addNotification(`Erro ao alterar status para "${o}"`,"error")}finally{this.loading=!1}}},async acceptCancellation(){if(this.selectedSchedules.length!==0&&confirm(`Tem certeza que deseja aceitar o cancelamento de ${this.selectedSchedules.length} agendamento(s)?`)){this.bulkActionLoading=!0;try{await this.bulkUpdateStatus("Cancelado","Cancelamento aceito"),this.clearSelection(),await this.refreshPageAfterAction(`${this.selectedSchedules.length} cancelamento(s) aceito(s)`)}catch(e){console.error("Erro ao aceitar cancelamento:",e),this.addNotification("Erro ao aceitar cancelamento","error")}finally{this.bulkActionLoading=!1}}},async bulkUpdateStatus(e,t){for(const s of this.selectedSchedules){const o={status:e,historic_entry:{user:this.getCurrentUser(),action:`Status alterado para ${e}`,comment:t}};await ve.request(`/schedules/${s}/status`,{method:"PATCH",data:o})}},async bulkUpdateStatusWithDate(e,t,s){const o=this.formatDateForBackend(t);for(const n of this.selectedSchedules){const r=(await ve.request(`/schedules/${n}`,{method:"GET"})).schedule,l={number:r.number,nfe_key:r.nfe_key,client:r.client_cnpj||r.client,case_count:r.case_count,date:o,qt_prod:r.qt_prod,historic:{...r.historic,[`date_change_${Date.now()}`]:{timestamp:new Date().toISOString(),user:this.getCurrentUser(),action:`Data alterada de ${this.formatDateForDisplay(r.date)} para ${this.formatDateForDisplay(o)}`,comment:"Data alterada via bulk action",previous_date:r.date,new_date:o}}};await ve.request(`/schedules/${n}`,{method:"PUT",data:l});const c={status:e,historic_entry:{user:this.getCurrentUser(),action:`Status alterado para ${e} com nova data ${this.formatDateForDisplay(o)}`,comment:s}};await ve.request(`/schedules/${n}/status`,{method:"PATCH",data:c})}},async bulkUpdateStatusWithDateAndComment(e,t){const s=this.formatDateForBackend(t);for(const o of this.selectedSchedules){const i=(await ve.request(`/schedules/${o}`,{method:"GET"})).schedule,r=this.formatDateForDisplay(i.date),l=this.formatDateForDisplay(s),c=`A data escolhida (${r}) está indisponível, a data escolhida pela nossa equipe é ${l}. Por gentileza confirmar em nossa plataforma.`,d={number:i.number,nfe_key:i.nfe_key,client:i.client_cnpj||i.client,case_count:i.case_count,date:s,qt_prod:i.qt_prod,historic:{...i.historic,[`date_change_${Date.now()}`]:{timestamp:new Date().toISOString(),user:this.getCurrentUser(),action:`Data alterada de ${r} para ${l}`,comment:c,previous_date:i.date,new_date:s}}};await ve.request(`/schedules/${o}`,{method:"PUT",data:d});const u={status:e,historic_entry:{user:this.getCurrentUser(),action:`Status alterado para ${e} com nova data ${l}`,comment:c}};await ve.request(`/schedules/${o}/status`,{method:"PATCH",data:u})}},getCurrentUser(){try{const e=localStorage.getItem("user");return e&&JSON.parse(e).user||"Usuário desconhecido"}catch{return"Usuário desconhecido"}},formatDateForBackend(e){if(!e)return null;if(e.match(/^\d{4}-\d{2}-\d{2}$/))return e;const t=new Date(e),s=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${s}-${o}-${n}`},handleFiltersChanged(e){console.log("🔍 Filtros alterados:",e),this.currentFilters={...e},this.pagination.page=1,this.pagination.hasMore=!0,this.schedules=[],this.loadSchedules()},handleResetFilters(){console.log("🔄 Resetando filtros"),this.currentFilters={status:"",client:"",date_from:"",date_to:"",nfe_number:""},this.pagination.page=1,this.pagination.hasMore=!0,this.schedules=[],this.loadSchedules()},loadAvailableClients(){try{const e=localStorage.getItem("user");if(console.log("🔍 DEBUG: userData do localStorage:",e),!e){console.log("❌ Nenhum dado de usuário encontrado no localStorage");return}const t=JSON.parse(e);console.log("👤 Usuário logado completo:",t),console.log("📊 Level access:",t.level_access),console.log("🏢 cli_access:",t.cli_access),console.log("🏢 cli_access type:",typeof t.cli_access);let s=t.cli_access;if(typeof s=="string"&&s)try{s=JSON.parse(s),console.log("🔄 cli_access parsed from string:",s)}catch(o){console.log("❌ Erro ao fazer parse do cli_access string:",o),s=null}if(t.level_access===0){console.log("🔓 Usuário desenvolvedor - buscando todos os clientes via API"),this.availableClients=[],console.log("📝 availableClients definido como vazio para desenvolvedor");return}if(s&&typeof s=="object"){console.log("✅ cli_access encontrado, processando...");const o=Object.entries(s);console.log("📋 Entradas do cli_access:",o);const n=o.map(([i,r])=>(console.log(`🏪 Processando cliente ${i}:`,r),{cnpj:i,name:r.nome||`Cliente ${i}`,number:r.numero||i}));console.log("👥 Clientes processados:",n),this.availableClients=n,console.log("💾 availableClients definido:",this.availableClients)}else console.log("⚠️ Usuário sem cli_access definido ou cli_access não é objeto"),console.log("⚠️ cli_access value:",s),this.availableClients=[]}catch(e){console.error("❌ Erro ao carregar clientes disponíveis:",e),this.availableClients=[]}}}};window.apiClient=ve;const cb={id:"app"},db={key:0,class:"loading-screen"},ub={key:1,class:"container"},fb={class:"main-content"},hb={key:0,class:"content-area"},pb={class:"schedules-list"},mb={class:"page-header"},gb={class:"header-actions"},bb=["disabled"],yb=["disabled"],vb={key:0,class:"bulk-actions-bar"},Sb={class:"selected-info"},Cb={class:"selection-badge"},wb={class:"bulk-actions"},_b={key:0,class:"contestado-actions"},Eb={key:0,class:"level-1-actions"},Ab=["disabled"],Db={key:1,class:"non-level-1-actions"},kb=["disabled"],Tb=["min"],Pb=["disabled"],xb={key:1,class:"solicitado-actions"},Nb=["disabled"],Fb=["min"],Rb=["disabled"],Mb={key:2,class:"agendado-actions"},Ob=["disabled"],Lb={key:3,class:"conferencia-actions"},Ub=["disabled"],Ib={key:4,class:"cancelar-actions"},qb=["disabled"],jb={class:"text-muted",style:{"font-size":"0.85em"}},Bb={key:5,class:"universal-actions"},$b=["disabled"],Vb={class:"table-container"},Hb={key:0,class:"loading-container"},zb={key:1,class:"empty-state"},Jb={class:"schedules-table"},Kb=["value","disabled"],Wb=["onClick"],Gb={key:0,class:"loading-more"},Xb={key:1,style:{color:"red","font-weight":"bold"}},Yb={key:1,class:"content-area"},Qb={key:2,class:"content-area"};function Zb(e,t,s,o,n,i){const r=Ue("SidebarComponent"),l=Ue("StatsCards"),c=Ue("ScheduleFilters"),d=Ue("NfeInfoModal"),u=Ue("ScheduleEditModal"),h=Ue("ScheduleCreationModal"),y=Ue("SchedulesList"),w=Ue("SettingsPage"),C=Ue("NotificationsComponent");return m(),g("div",cb,[n.loading?(m(),g("div",db,t[17]||(t[17]=[a("div",{class:"loading-spinner"},[a("i",{class:"fas fa-spinner fa-spin"}),a("p",null,"Carregando dashboard...")],-1)]))):(m(),g("div",ub,[Se(r,{user:n.user,"active-menu":n.activeMenu,onMenuClick:i.handleMenuClick,onLogout:i.handleLogout},null,8,["user","active-menu","onMenuClick","onLogout"]),a("main",fb,[!n.showSchedulesList&&!n.showSettingsPage?(m(),g("div",hb,[Se(l,{stats:n.dashboardStats,loading:n.statsLoading},null,8,["stats","loading"]),a("div",pb,[a("div",mb,[t[20]||(t[20]=a("h2",null,"Lista de Agendamentos",-1)),a("div",gb,[i.hasCreatePermission?(m(),g("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=(...v)=>i.openScheduleCreationModal&&i.openScheduleCreationModal(...v)),disabled:n.loading,title:"Criar novo agendamento"},t[18]||(t[18]=[a("i",{class:"fas fa-plus"},null,-1),N(" Criar Agendamento ")]),8,bb)):M("",!0),a("button",{class:"btn btn-outline-primary",onClick:t[1]||(t[1]=(...v)=>i.refresh&&i.refresh(...v)),disabled:n.loading,title:"Atualizar dados"},[a("i",{class:Q(n.loading?"fas fa-spinner fa-spin":"fas fa-sync-alt")},null,2),t[19]||(t[19]=N(" Atualizar "))],8,yb)])]),Se(c,{filters:n.currentFilters,"status-options":i.statusOptions,"available-clients":n.availableClients,onFiltersChanged:i.handleFiltersChanged,onResetFilters:i.handleResetFilters},null,8,["filters","status-options","available-clients","onFiltersChanged","onResetFilters"]),i.canBulkManage?(m(),g("div",vb,[a("div",Sb,[a("button",{class:"btn btn-outline-secondary action-btn selection-btn",onClick:t[2]||(t[2]=(...v)=>i.clearSelection&&i.clearSelection(...v))},[t[21]||(t[21]=a("i",{class:"fas fa-times"},null,-1)),t[22]||(t[22]=N(" Limpar seleção ")),a("span",Cb,_(n.selectedSchedules.length),1)])]),a("div",wb,[i.selectedScheduleStatuses[0]==="Contestado"?(m(),g("div",_b,[i.userLevel===1?(m(),g("div",Eb,[a("button",{class:"btn btn-success action-btn",onClick:t[3]||(t[3]=(...v)=>i.acceptNewDate&&i.acceptNewDate(...v)),disabled:n.bulkActionLoading},t[23]||(t[23]=[a("i",{class:"fas fa-check"},null,-1),N(" Aceitar Nova Data ")]),8,Ab),t[24]||(t[24]=a("span",{class:"contact-text"},"Ou entre em contato com nossa equipe",-1))])):(m(),g("div",Db,[a("button",{class:"btn btn-success action-btn",onClick:t[4]||(t[4]=(...v)=>i.confirmContestado&&i.confirmContestado(...v)),disabled:n.bulkActionLoading},t[25]||(t[25]=[a("i",{class:"fas fa-check"},null,-1),N(" Confirmar ")]),8,kb),X(a("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=v=>n.newDate=v),class:"form-control",min:i.today},null,8,Tb),[[ue,n.newDate]]),a("button",{class:"btn btn-success action-btn",onClick:t[6]||(t[6]=(...v)=>i.changeContestadoToAgendado&&i.changeContestadoToAgendado(...v)),disabled:!n.newDate||n.bulkActionLoading},t[26]||(t[26]=[a("i",{class:"fas fa-calendar-alt"},null,-1),N(" Agendar ")]),8,Pb)]))])):M("",!0),i.selectedScheduleStatuses[0]==="Solicitado"&&i.userLevel!==1?(m(),g("div",xb,[a("button",{class:"btn btn-success action-btn",onClick:t[7]||(t[7]=(...v)=>i.acceptSchedules&&i.acceptSchedules(...v)),disabled:n.bulkActionLoading},t[27]||(t[27]=[a("i",{class:"fas fa-check"},null,-1),N(" Aceitar Agendamento ")]),8,Nb),X(a("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=v=>n.newDate=v),class:"form-control",min:i.today},null,8,Fb),[[ue,n.newDate]]),a("button",{class:"btn btn-warning action-btn",onClick:t[9]||(t[9]=(...v)=>i.changeDateToContestado&&i.changeDateToContestado(...v)),disabled:!n.newDate||n.bulkActionLoading},t[28]||(t[28]=[a("i",{class:"fas fa-calendar-alt"},null,-1),N(" Alterar Data ")]),8,Rb)])):M("",!0),i.selectedScheduleStatuses[0]==="Agendado"&&i.userLevel!==1?(m(),g("div",Mb,[a("button",{class:"btn btn-success action-btn",onClick:t[10]||(t[10]=(...v)=>i.markAsReceived&&i.markAsReceived(...v)),disabled:n.bulkActionLoading},t[29]||(t[29]=[a("i",{class:"fas fa-check-circle"},null,-1),N(" Marcar como Em conferência ")]),8,Ob)])):M("",!0),(i.selectedScheduleStatuses[0]==="Conferência"||i.selectedScheduleStatuses[0]==="Recebido")&&i.userLevel!==1?(m(),g("div",Lb,[a("button",{class:"btn btn-info action-btn",onClick:t[11]||(t[11]=(...v)=>i.markAsEstoque&&i.markAsEstoque(...v)),disabled:n.bulkActionLoading},t[30]||(t[30]=[a("i",{class:"fas fa-warehouse"},null,-1),N(" Marcar como Em estoque ")]),8,Ub)])):M("",!0),i.selectedScheduleStatuses[0]==="Cancelar"&&i.userLevel!==1?(m(),g("div",Ib,[a("button",{class:"btn btn-danger action-btn btn-accept-cancel",onClick:t[12]||(t[12]=(...v)=>i.acceptCancellation&&i.acceptCancellation(...v)),disabled:n.bulkActionLoading},t[31]||(t[31]=[a("i",{class:"fas fa-times-circle"},null,-1),N(" Aceitar Cancelamento ")]),8,qb),a("span",jb,"Solicitado por "+_(i.cancelRequestedBy),1)])):M("",!0),n.selectedSchedules.length>0&&!["Cancelar","Cancelado","Recusado","Estoque"].includes(i.selectedScheduleStatuses[0])?(m(),g("div",Bb,[a("button",{class:"btn btn-outline-danger action-btn",onClick:t[13]||(t[13]=(...v)=>i.cancelSchedules&&i.cancelSchedules(...v)),disabled:n.bulkActionLoading},[t[32]||(t[32]=a("i",{class:"fas fa-ban"},null,-1)),N(" "+_(i.userLevel===1?"Solicitar Cancelamento":"Cancelar Agendamento"),1)],8,$b)])):M("",!0)])])):M("",!0),a("div",Vb,[n.loading?(m(),g("div",Hb,t[33]||(t[33]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1),a("p",null,"Carregando agendamentos...",-1)]))):n.schedules.length===0?(m(),g("div",zb,t[34]||(t[34]=[a("i",{class:"fas fa-inbox"},null,-1),a("h3",null,"Nenhum agendamento encontrado",-1),a("p",null,"Não há agendamentos que correspondam aos filtros aplicados.",-1)]))):(m(),g("div",{key:2,class:"table-wrapper",onScroll:t[16]||(t[16]=(...v)=>i.handleScroll&&i.handleScroll(...v)),ref:"tableWrapper"},[a("table",Jb,[t[36]||(t[36]=a("thead",null,[a("tr",null,[a("th",{style:{width:"50px"}}),a("th",null,"N° NF-e"),a("th",null,"Cliente"),a("th",null,"Data de Entrega"),a("th",null,"Volumes"),a("th",null,"Status"),a("th")])],-1)),a("tbody",null,[(m(!0),g(W,null,pe(i.displayedSchedules,v=>(m(),g("tr",{key:v.id},[a("td",null,[X(a("input",{type:"checkbox",value:v.id,"onUpdate:modelValue":t[14]||(t[14]=D=>n.selectedSchedules=D),onChange:t[15]||(t[15]=(...D)=>i.onScheduleSelect&&i.onScheduleSelect(...D)),disabled:!i.canSelectSchedule(v)},null,40,Kb),[[po,n.selectedSchedules]])]),a("td",null,_(v.number),1),a("td",null,_(v.client),1),a("td",null,_(i.formatDate(v.date)),1),a("td",null,_(v.case_count),1),a("td",null,[a("span",{class:Q(["status-badge "+i.getStatusBadge(v.status).class,"status-badge"])},_(i.getStatusBadge(v.status).label),3)]),a("td",null,[a("button",{class:"btn btn-sm btn-outline-primary",onClick:D=>i.openInfoModal(v),title:"Mais informações"},t[35]||(t[35]=[a("i",{class:"fas fa-info-circle"},null,-1),N(" Detalhes ")]),8,Wb)])]))),128))])]),n.loadingMore?(m(),g("div",Gb,t[37]||(t[37]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1),a("p",null,"Carregando mais agendamentos...",-1)]))):M("",!0)],544))]),n.showEditModal?(m(),g("div",Xb,"DEBUG: Modal de edição deveria estar visível")):M("",!0),n.showInfoModal?(m(),Tt(d,{key:2,"nfe-data":n.selectedSchedule,"show-modal":n.showInfoModal,user:n.user,onClose:i.closeInfoModal,onEdit:i.openEditModal,onMarkTratativa:i.handleMarkSingleAsTratativa,onChangeStatus:i.handleChangeStatusFromTratativa},null,8,["nfe-data","show-modal","user","onClose","onEdit","onMarkTratativa","onChangeStatus"])):M("",!0),n.showEditModal?(m(),Tt(u,{key:3,"schedule-data":n.scheduleToEdit,"show-modal":n.showEditModal,onClose:i.closeEditModal,onUpdated:i.handleScheduleUpdated,onNotification:i.addNotification},null,8,["schedule-data","show-modal","onClose","onUpdated","onNotification"])):M("",!0),n.showScheduleCreationModal?(m(),Tt(h,{key:4,"show-modal":n.showScheduleCreationModal,onClose:i.closeScheduleCreationModal,onCreated:i.handleScheduleCreated},null,8,["show-modal","onClose","onCreated"])):M("",!0)])])):M("",!0),n.showSchedulesList?(m(),g("div",Yb,[Se(y,{onNotification:i.addNotification},null,8,["onNotification"])])):M("",!0),n.showSettingsPage?(m(),g("div",Qb,[Se(w,{onNotification:i.addNotification},null,8,["onNotification"])])):M("",!0)])])),Se(C,{notifications:n.notifications,onClose:i.removeNotification},null,8,["notifications","onClose"])])}const ey=qe(lb,[["render",Zb],["__scopeId","data-v-9342d748"]]);he.defaults.baseURL="https://schedule-mercocamp-back-end.up.railway.app/api";async function ty(){const e=localStorage.getItem("token")||localStorage.getItem("authToken");if(!e)return window.location.href="login.html",!1;try{return(await he.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}})).data.user.level_access===9?(window.location.href="schedule-verification.html",!1):!0}catch(t){return console.error("Erro na verificação de acesso:",t),localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="login.html",!1}}ty().then(e=>{if(e){const t=Bc(ey);t.config.globalProperties.$http=he,t.mount("#app")}});
